if (self.CavalryLogger) { CavalryLogger.start_js(["g0wmw"]); }

__d("WorkUserAvailabilityStatusType",[],(function a(b,c,d,e,f,g){f.exports={NONE:"None",AVAILABLE:"Available",SPORADIC:"Sporadic",TENTATIVE:"Tentative",BUSY:"Busy",DO_NOT_DISTURB:"Do Not Disturb",FOCUS:"Focus"};}),null);
__d('EventDateTimePollActionsLogger',['EventsActionsLogger'],(function a(b,c,d,e,f,g){'use strict';f.exports={logClickOnEntryPoint:function h(i){c('EventsActionsLogger').log(null,{type:c('EventsActionsLogger').Type.CLICK,target:c('EventsActionsLogger').Target.MESSENGER_POLL_ENTRY_POINT,acontext:i});},logClickOnDateTimeTypeOption:function h(i){c('EventsActionsLogger').log(null,{type:c('EventsActionsLogger').Type.CLICK,target:c('EventsActionsLogger').Target.MESSENGER_POLL_DATE_TIME_TYPE_BUTTON,acontext:i});},logClickOnCustomTypeOption:function h(i){c('EventsActionsLogger').log(null,{type:c('EventsActionsLogger').Type.CLICK,target:c('EventsActionsLogger').Target.MESSENGER_POLL_BASIC_TYPE_BUTTON,acontext:i});},logClickOnCreateButton:function h(i){c('EventsActionsLogger').log(null,{type:c('EventsActionsLogger').Type.CLICK,target:c('EventsActionsLogger').Target.MESSENGER_POLL_CREATE_BUTTON,acontext:i});},logClickOnCancelButton:function h(i){c('EventsActionsLogger').log(null,{type:c('EventsActionsLogger').Type.CLICK,target:c('EventsActionsLogger').Target.MESSENGER_POLL_CANCEL_BUTTON,acontext:i});}};}),null);
__d('EventPlanExperiment',['EventRemindersGating','QE2Logger'],(function a(b,c,d,e,f,g){'use strict';var h='event_plan_entry_point_nux',i={shouldShowEntryPointNuxWithExposure:function j(){c('QE2Logger').logExposureForUser(h);return c('EventRemindersGating').shouldShowEntryPointNux;}};f.exports=i;}),null);
__d('EventReminderActionsLogger',['EventsActionsLogger'],(function a(b,c,d,e,f,g){f.exports={logViewOnChatTabSheet:function h(i){c('EventsActionsLogger').log(i,{type:c('EventsActionsLogger').Type.VIEW,target:c('EventsActionsLogger').Target.REMINDER_BANNER,acontext:{action_history:[{surface:c('EventsActionsLogger').Surface.MESSENGER_CHAT_TAB,mechanism:c('EventsActionsLogger').Mechanism.REMINDER_BANNER}]}});},logClickOnChatTabSheet:function h(i){c('EventsActionsLogger').log(i,{type:c('EventsActionsLogger').Type.CLICK,target:c('EventsActionsLogger').Target.REMINDER_BANNER,acontext:{action_history:[{surface:c('EventsActionsLogger').Surface.MESSENGER_CHAT_TAB,mechanism:c('EventsActionsLogger').Mechanism.REMINDER_BANNER}]}});},logClickOnEntryPoint:function h(){c('EventsActionsLogger').log(null,{type:c('EventsActionsLogger').Type.CLICK,target:c('EventsActionsLogger').Target.REMINDER_ENTRYPOINT,acontext:{action_history:[{surface:c('EventsActionsLogger').Surface.MESSENGER_CHAT_TAB,mechanism:c('EventsActionsLogger').Mechanism.MESSENGER_COMPOSER}]}});},logClickOnTriggerWord:function h(){c('EventsActionsLogger').log(null,{type:c('EventsActionsLogger').Type.CLICK,target:c('EventsActionsLogger').Target.TRIGGER_WORD,acontext:{action_history:[{surface:c('EventsActionsLogger').Surface.MESSENGER_CHAT_TAB,mechanism:c('EventsActionsLogger').Mechanism.REMINDER_WORD}]}});},logClickOnTriggerCTA:function h(){c('EventsActionsLogger').log(null,{type:c('EventsActionsLogger').Type.CLICK,target:c('EventsActionsLogger').Target.TRIGGER_CTA,acontext:{action_history:[{surface:c('EventsActionsLogger').Surface.MESSENGER_CHAT_TAB,mechanism:c('EventsActionsLogger').Mechanism.REMINDER_WORD}]}});}};}),null);
__d("XEventReminderController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/eventreminder\/",{event_reminder_id:{type:"Int",required:true}});}),null);
__d('EventReminderRequestHelper',['AsyncRequest','EventReminderActions','XEventReminderController'],(function a(b,c,d,e,f,g){'use strict';var h={fetchEventReminder:function i(j,k,l){var m=c('XEventReminderController').getURIBuilder().setInt('event_reminder_id',k);new (c('AsyncRequest'))(m.getURI()).setHandler(function(n){if(n.payload){c('EventReminderActions').updateEventReminder(j,n.payload);l();}}).send();}};f.exports=h;}),null);
__d('ChatAnimatedGifs',['URI'],(function a(b,c,d,e,f,g){var h={shouldHideBody:function i(j){if(!j.has_attachment)return false;for(var k=0;k<j.attachments.length;k++){var l=j.attachments[k];if(l.preview_url){var m=h.getRawUrlFromSafeUrl(l.preview_url);if(j.body==m)return true;}}return false;},getRawUrlFromSafeUrl:function i(j){return new (c('URI'))(j).getQueryData().url;}};f.exports=h;}),null);
__d('ChatBubble.react',['cx','DOMDimensions','EmojiOnlyMessage.react','MercuryMessageBody.react','MercuryMessageRenderLocations','MessagingGiftWrap.react','MessengerMathUtils','MessengerSupportedEmojiUtils','React','ReactDOM','joinClasses','messengerCustomColorUtils'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=2,k=c('React').createClass({displayName:'ChatBubble',_boxWidth:0,propTypes:{insideDecorators:i.arrayOf(i.object),attachments:i.node,body:i.string,className:i.string,customColor:i.string,customLike:i.object,isEmojiLike:i.bool,isFromViewer:i.bool,isGiftWrapped:i.bool,maxWidth:i.number.isRequired,message:i.object,metaRanges:i.array,onUnwrap:i.func,ranges:i.array,threadCustomColor:i.string,threadID:i.string},getInitialState:function l(){return {emojis:undefined,bubbleWidth:null};},componentDidMount:function l(){if(this.props.attachments&&!this.props.isEmojiLike)return;if(!this.props.emojis){var m=this.props.body||'',n=c('MessengerSupportedEmojiUtils').getEmojiOnlyContents(m);if(n&&n.length)this.setState({emojis:n});}this._restyleBubble(this.props);},componentDidUpdate:function l(m){if(m.maxWidth!==this.props.maxWidth||m.body!==this.props.body||!m.attachments&&this.props.attachments)this._restyleBubble(m);},render:function l(){var m=this.props,n=m.attachments,o=m.body,p=o===undefined?'':o,q=m.className,r=m.insideDecorators,s=m.maxWidth,t=babelHelpers.objectWithoutProperties(m,['attachments','body','className','insideDecorators','maxWidth']),u=Object.assign({},t);delete u.customColor;delete u.customLike;delete u.isEmojiLike;delete u.isFromViewer;delete u.message;delete u.metaRanges;delete u.ranges;delete u.threadCustomColor;delete u.threadID;return c('React').createElement('div',babelHelpers['extends']({},u,{className:c('joinClasses')("_5w1r"+(!this.state.emojis?' '+"_3_om":'')+(!!this.state.emojis?' '+"_31xx":''),q),ref:'bubble',style:{maxWidth:s,width:this.state.emojis?null:this.state.bubbleWidth,wordWrap:p.length>=15?'break-word':'inherit'}}),c('React').createElement('div',{className:"_4gx_",ref:'inner'},this._renderContent(),n),r,this.props.isGiftWrapped?c('React').createElement(c('MessagingGiftWrap.react'),{onUnwrap:this.props.onUnwrap}):null);},_renderContent:function l(){if(!this.props.body||this.props.isEmojiLike)return null;var m={},n=null;if(this.state.emojis){n=c('React').createElement(c('EmojiOnlyMessage.react'),{contents:this.state.emojis});}else{n=c('React').createElement(c('MercuryMessageBody.react'),{body:this.props.body,ranges:this.props.ranges,metaRanges:this.props.metaRanges,threadID:this.props.threadID,customLike:this.props.customLike,threadCustomColor:this.props.threadCustomColor,isFromViewer:this.props.isFromViewer,renderLocation:c('MercuryMessageRenderLocations').CHAT});if(this.props.customColor)m=c('messengerCustomColorUtils').customBubbleStyle(this.props.customColor,m);}return c('React').createElement('div',{className:"_d97"+(!!this.state.emojis?' '+"_31xy":''),ref:'contentWrapper',style:m},c('React').createElement('span',{className:"_5yl5",ref:'content'},n));},_restyleBubble:function l(m){if(this.props.attachments||this.props.body!=null&&c('MessengerMathUtils').isMathBlock(this.props.body.trim())){this.setState({bubbleWidth:null});return;}var n=c('ReactDOM').findDOMNode(this.refs.bubble);if(m.maxWidth!==this.props.maxWidth||c('DOMDimensions').getElementDimensions(n).width>this.props.maxWidth){var o=this.props.maxWidth;this.setState({bubbleWidth:o},this._shrinkBubble);return;}this._shrinkBubble();},_shrinkBubble:function l(){var m=c('ReactDOM').findDOMNode(this.refs.bubble),n=c('DOMDimensions').getElementDimensions(m).width,o=c('ReactDOM').findDOMNode(this.refs.content),p=o?c('DOMDimensions').getElementDimensions(o).width+c('DOMDimensions').measureElementBox(c('ReactDOM').findDOMNode(this.refs.contentWrapper),'width',true,false,false):0,q=p+j;if(p>0&&q<this.props.maxWidth&&n-q-this.getBoxWidth()>0)this.setState({bubbleWidth:q});},contentWraps:function l(){var m=c('ReactDOM').findDOMNode(this.refs.content);if(!m)return false;var n=m.getClientRects(),o=c('DOMDimensions').getElementDimensions(m).height;return n&&n.length>1&&n[0].height<o;},getBoxWidth:function l(){if(!this._boxWidth)this._boxWidth=c('DOMDimensions').measureElementBox(c('ReactDOM').findDOMNode(this.refs.bubble),'width',true,true,false);return this._boxWidth;}});f.exports=k;}),null);
__d('ChatCodePasteUtils',['cx','BanzaiODS','ChatBubble.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=/`{3,}/;function j(l){return !!(l&&i.test(l)&&l.split('\n').length>1);}function k(l,m,n,o,p){var q=l.split(i),r=[];for(var s=0;s<q.length;s+=2){var t=q[s].trim();if(t)r.push(c('React').createElement('div',{key:s,className:"_5wde"+(' '+"_n4o")},c('React').createElement(c('ChatBubble.react'),{body:t,customColor:p||undefined,className:"clearfix _5wdf",maxWidth:m,ranges:n||undefined,threadID:o||undefined})));if(s+1<q.length&&q[s+1]){var u=q[s+1].split('\n'),v=u[0].replace(/[^a-zA-Z]+/g,''),w=u.slice(1).join('\n');c('BanzaiODS').bumpEntityKey('chat_code_paste','render_bubble');r.push(c('React').createElement('div',{key:s+1,className:"_5wde"+(' '+"_n4o")},c('React').createElement('div',{ref:'bubble',className:"_3_om _4yng _5wdf"},c('React').createElement('div',{ref:'syntaxTarget'+s,className:'language-'+v},w))));}}return r;}f.exports={containsCodeBlock:j,getCodeAndMessageBubbles:k};}),null);
__d('ChatEmployeeAwayWarning',['MercuryIDs','MercuryParticipants','MercuryViewer'],(function a(b,c,d,e,f,g){var h={updateEmployeeAwayWarning:function i(j,k,l){c('MercuryParticipants').get(c('MercuryViewer').getID(),function(m){var n=m.employee;if(n)c('MercuryParticipants').getMulti(j.participants,function(o){var p=false,q=c('MercuryIDs').getUserIDFromThreadID(j.thread_id);if(!q)return;var r='fbid:'+q;for(var s in o)if(r==o[s].id&&o[s].is_employee_away)p=true;if(p){k();}else l();});});}};f.exports=h;}),null);
__d('ChatPrivacyActionController',['ChatVisibility','JSLogger','PresencePrivacy'],(function a(b,c,d,e,f,g){var h=function i(j,k){this._userID=j;this._logger=c('JSLogger').create('blackbird');this._getState=function(){if(c('ChatVisibility').isOnline())return c('PresencePrivacy').allows(this._userID)?i.NORMAL:i.BLOCKED;return i.OFFLINE;};this._togglePrivacy=function(){var m=this._getState();switch(this._getState()){case i.OFFLINE:if(c('ChatVisibility').isOnline()){this._logger.error('tabs_already_online');break;}this._logger.log('tabs_go_online',{tab_id:this._userID});c('ChatVisibility').goOnline(function(){if(!c('PresencePrivacy').allows(this._userID)){if(this._getState()!==i.BLOCKED)this._logger.error('privacy_action_controller_blocked_inconsistency');this._togglePrivacy();}}.bind(this));break;case i.BLOCKED:c('PresencePrivacy').allow(this._userID);this._logger.log('tabs_unblock',{tab_id:this._userID});break;case i.NORMAL:c('PresencePrivacy').disallow(this._userID);this._logger.log('tabs_block',{tab_id:this._userID});break;}};var l=function(){k&&k(this._getState());}.bind(this);l();this._subscribeToken=c('PresencePrivacy').subscribe('privacy-changed',l);};h.OFFLINE='offline';h.BLOCKED='blocked';h.NORMAL='normal';Object.assign(h.prototype,{togglePrivacy:function i(){this._logger.log('gear_menu_toggle_privacy',{tab_id:this._userID});this._togglePrivacy();},destroy:function i(){this._subscribeToken&&c('PresencePrivacy').unsubscribe(this._subscribeToken);}});f.exports=h;}),null);
__d('ChatTabBlinking',['cx','CSS','setIntervalAcrossTransitions'],(function a(b,c,d,e,f,g,h){'use strict';var i=600,j="highlightTitle",k={_blinkMap:{},_interval:null,_isHighlighting:false,blinkTab:function l(m,n){if(!this._blinkMap[m])this._blinkMap[m]={view:n,elem:n.getTabElem()};this.checkInterval();},unblinkTab:function l(m){if(this._blinkMap[m]){var n=this._blinkMap[m].elem;if(n)c('CSS').removeClass(n,j);delete this._blinkMap[m];}this.checkInterval();},checkInterval:function l(){var m=Object.keys(this._blinkMap).length;if(m>0){if(!this._interval)this._interval=c('setIntervalAcrossTransitions')(this._toggleBlinkHighlight.bind(this),i);}else if(this._interval){clearInterval(this._interval);this._interval=null;}},_toggleBlinkHighlight:function l(){this._isHighlighting=!this._isHighlighting;for(var m in this._blinkMap)if(Object.prototype.hasOwnProperty.call(this._blinkMap,m)){var n=this._blinkMap[m],o=n.elem,p=n.view;if(o&&o.parentNode&&!p.isFocused()&&!p.isHovered()){c('CSS').conditionClass(o,j,this._isHighlighting);}else this.unblinkTab(m);}}};f.exports=k;}),null);
__d('ChatUserFocusWarning',['MercuryParticipants','MercuryViewer','emptyFunction','ifRequired'],(function a(b,c,d,e,f,g){'use strict';var h=void 0,i=void 0,j=function m(n){if(!h)c('ifRequired')('ChatUserFocusLogging',function(o){return h=o;},c('emptyFunction'));if(h&&h.registerThreadID)h.registerThreadID(n);},k=function m(n,o,p){if(!i)c('ifRequired')('ChatSubscribeToFocusModeChanges',function(q){i=q;},c('emptyFunction'));if(i&&i.subscribe)i.subscribe(n,o,p);},l={updateUserFocusWarning:function m(n,o,p){c('MercuryParticipants').get(c('MercuryViewer').getID(),function(q){var r=q.employee;if(r)c('MercuryParticipants').getMulti(n.participants,function(s){var t=false;for(var u in s){if(q.id!==s[u].id&&s[u].is_user_focusing)t=true;if(s[u].employee&&q.fbid)k(q.fbid,n.thread_id,s[u]);}if(t){j(n.thread_id);var v=n&&n.bypass_focus_mode_until&&n.bypass_focus_mode_until>Date.now()/1000;o(v);}else p();});});}};f.exports=l;}),null);
__d('ChatCloseButton.react',['cx','fbt','Link.react','React','TrackingNodes','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;m.prototype.render=function(){var n=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.CLOSE_BUTTON),o=i._("Pulsa \"Esc\" para cerrar"),p=i._("Cerrar pesta\u00f1a"),q="_4vu4";return c('React').createElement(c('Link.react'),{'aria-label':this.props.active?o:p,className:c('joinClasses')(this.props.className,'close','button',q),'data-ft':n,'data-hover':'tooltip','data-tooltip-content':this.props.active?o:p,'data-tooltip-position':'above',onClick:this.props.onClick,onKeyUp:this.props.onKeyUp,onMouseDown:this.props.onMouseDown});};function m(){j.apply(this,arguments);}m.propTypes={onClick:l.func,onKeyUp:l.func,onMouseDown:l.func,active:l.bool};m.defaultProps={active:false};f.exports=m;}),null);
__d('ChatCollapsedLogMessageGroup.react',['cx','fbt','Link.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={collapsed:true},n;}l.prototype.render=function(){var m=i._("Ver actividad reciente"),n=i._("Ver menos actividad");return c('React').createElement('div',{className:"_5w0o"},c('React').createElement(c('Link.react'),{className:"_4ea1",onClick:function(){return this.setState({collapsed:!this.state.collapsed});}.bind(this)},this.state.collapsed?m:n),!this.state.collapsed?c('React').createElement('div',null,c('React').createElement('div',{className:"_2zsu"}),this.props.children,c('React').createElement('div',{className:"_2zsu"})):null);};f.exports=l;}),null);
__d('ChatDateBreak.react',['cx','React','formatDate','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.shouldComponentUpdate=function(m){'use strict';return this.props.date.getTime()!==m.date.getTime();};l.prototype.render=function(){'use strict';var m=c('formatDate')(this.props.date,{today:'g:ia',withinWeek:'D g:ia',thisYear:'M jS, g:ia',older:'m/d/Y g:ia'});return c('React').createElement('time',{className:c('joinClasses')(this.props.className,"_5w-5")},c('React').createElement('span',{className:"_5w-6"},m));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={date:k.instanceOf(Date).isRequired};f.exports=l;}),null);
__d('ChatMessage.react',['cx','fbt','BootloadedComponent.react','ChatAnimatedGifs','ChatBubble.react','EmojiLikeUtils','FluxContainer','MercuryTimestamp','CSS','immutable','ImmutableObject','Locale','JSResource','MercuryAttachment','MercuryConfig','MercuryErrorInfo','MercuryIDs','MercuryMessageCustomizations','MercuryMessageError.react','MercuryMessageInfo','MessageBorderType','MessageCustomizationType','MessagingGiftWrapChecker','MessengerDecorator','MessengerInnerDecorators.react','MessengerVideoAutoplayStore','ChatCodePasteUtils','MNCommerceMessageType','MercuryDisplayTimeFilterMessageRenderer','React','ReactDOM','TooltipData','XUISpinner.react','convertMIGColorToFIGColor','isRTL','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={isVisible:false},this.$ChatMessage1=function(){return this.setState({hovered:true});}.bind(this),this.$ChatMessage2=function(){return this.setState({hovered:false});}.bind(this),o;}m.getStores=function(){return [c('MessengerVideoAutoplayStore')];};m.calculateState=function(n,o){return {isVisible:c('MessengerVideoAutoplayStore').isVisible(o.message.thread_id,o.message.message_id)};};m.prototype.componentDidMount=function(){c('CSS').conditionClass(c('ReactDOM').findDOMNode(this),"_2cnu",this.isOneLine());};m.prototype.isOneLine=function(){var n=this.props.message;return c('MercuryMessageInfo').isInbound(n)&&!this.refs.attachmentsInside&&this.refs.bubble&&!this.refs.bubble.contentWraps();};m.prototype.shouldComponentUpdate=function(n,o){var p=n.message!==this.props.message,q=false,r=false,s=this.props.thread;if(s){q=s.custom_like_icon!==n.thread.custom_like_icon;r=s.custom_color!==n.thread.custom_color;}else if(n.thread)return true;return p||q||r||o.isVisible!==this.state.isVisible;};m.prototype.render=function(){var n=this.props.message,o=c('MercuryAttachment').get(n).length>0,p=c('MercuryMessageInfo').isInbound(n),q=c('MercuryIDs').isGroupChat(n.thread_id),r=c('MercuryErrorInfo').hasErrorStatus(n),s="_5wd4"+(p?' '+"_1nc7":'')+(!p?' '+"_1nc6":'')+(o?' '+"_2_-t":'')+(p&&q?' '+"_5ysy":'')+(r?' '+"_1zcs":''),t=this.props,u=t.isFromViewer,v=t.participants,w=[],x=n;if(x)c('MessengerDecorator').getBeforeDecorators().forEach(function(y){if(y.check(x))w.push(y.render(x,u));});return c('React').createElement('div',{className:c('joinClasses')(this.props.className,s),onMouseEnter:this.$ChatMessage1,onMouseLeave:this.$ChatMessage2},c('React').createElement('div',{className:"_h8t"},w,this.$ChatMessage3()),c('React').createElement(c('MessengerInnerDecorators.react'),{message:n,isFromViewer:this.props.isFromViewer||false,hovered:this.state.hovered,messageProps:this.props}),this.$ChatMessage4(x,u),this.$ChatMessage5());};m.prototype.$ChatMessage3=function(){var n=this.props.message,o={};if(c('MercuryMessageInfo').isOutbound(n)){var p=i._("{time}",[i.param('time',c('MercuryTimestamp').getPreciseTimestamp(n.timestamp))]);Object.assign(o,c('TooltipData').propsFor(p,'right'));}if(n.is_filtered_content)return c('React').createElement('div',babelHelpers['extends']({className:"_5wd9"+(' '+"_5wdc")+(' '+"uiBoxYellow")+(' '+"clearfix"),ref:'inner'},o),c('MercuryDisplayTimeFilterMessageRenderer').renderFilteredContent(n));var q=this.$ChatMessage6('outside'),r=n.body&&n.body!==''?c('isRTL')(n.body):c('Locale').isRTL();return c('React').createElement('div',babelHelpers['extends']({className:"_5wd9"+(r?' '+"direction_rtl":'')+(!r?' '+"direction_ltr":''),ref:'inner'},o),this.$ChatMessage7(!q),q);};m.prototype.$ChatMessage4=function(n,o){var p,q=this;if(n){var p=function(){var r=[],s=[];c('MessengerDecorator').getAfterExternalDecorators().forEach(function(u){if(n&&u.check(n)){r.push(u.render(n,o,this.props));s.push(u.getAdditionalClassNames());}}.bind(q));if(s.length===0&&r.length===0)return {v:null};var t=s.join(' ');return {v:c('React').createElement('div',{className:c('joinClasses')(t,"_5ijz"+(!o?' '+"isFromOther":''))},r)};}();if(typeof p==="object")return p.v;}return null;};m.prototype.$ChatMessage5=function(){var n=this.props.message;if(n.is_filtered_content||!c('MercuryMessageInfo').hasError(n))return null;return c('React').createElement('div',{className:"_3ry4",ref:'undertext'},c('React').createElement(c('MercuryMessageError.react'),{className:"_5wda clearfix",message:n,ref:'status'}),this.$ChatMessage8());};m.prototype.$ChatMessage8=function(){return this.props.message.is_spoof_warning?c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('MercurySpoofWarning.react').__setRef('ChatMessage.react'),authorID:this.props.message.author,className:"_5wdb"}):null;};m.prototype.$ChatMessage9=function(){return c('React').createElement('div',{style:{padding:'20px',text_align:'center'}},c('React').createElement(c('XUISpinner.react'),null));};m.prototype.$ChatMessage6=function(n){if(this.props.message.commerce_message_type===c('MNCommerceMessageType').RIDE_INTENT)return null;var o=this.props.message,p=this.props.thread?this.props.thread.custom_like_icon:null,q=n=='inside'?'attachmentsInside':'attachmentsOutside',r=c('MercuryAttachment').get(o).filter(function(v){var w=c('MercuryAttachment').isBubblePreferred(v);return w&&n==='inside'||!w&&n==='outside';}),s=this.props.thread?c('convertMIGColorToFIGColor')(this.props.thread.custom_color):'',t=[],u=[];if(n==='outside'&&o)c('MessengerDecorator').getAfterDecorators().forEach(function(v){if(v.check(o,this.props.isFromViewer)){t.push(v.render(o,this.props.isFromViewer,this.props));u.push(v.getAdditionalClassNames());}}.bind(this));if(r.length>0)return c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:this.$ChatMessage9(),bootloadLoader:c('JSResource')('MercuryAttachments.react').__setRef('ChatMessage.react'),className:c('joinClasses')((n==='outside'?"_3e7u":'')+(!!o.body?' '+"_16ys":'')+(!!s?' '+"_3al":'')+(' '+"_n4o"),u),attachments:r,customLike:p,customColor:s,hasFlowerBorder:c('MercuryConfig').WWWMessengerFlowerBorderViewer&&c('MercuryMessageCustomizations').getCustomizationValue(o,c('MessageCustomizationType').BORDER)===c('MessageBorderType').FLOWERS&&n==='outside',isChat:true,isGiftWrapped:c('MessagingGiftWrapChecker').shouldRenderWithGiftWrap(o)&&n==='outside',afterDecorators:t,isVisible:this.state.isVisible,maxWidth:this.props.maxBubbleWidth,message:o,onUnwrap:this.$ChatMessage10,onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,ref:q});return null;};m.prototype.$ChatMessage7=function(n){var o=this.props,p=o.isFromViewer,q=o.message,r=o.thread,s=q.body,t=this.$ChatMessage6('inside'),u=[],v=[],w=[],x=q;if(x){if(n)c('MessengerDecorator').getAfterDecorators().forEach(function(aa){if(aa.check(x,p)){u.push(aa.render(x,p,this.props));v.push(aa.getAdditionalClassNames());}}.bind(this));c('MessengerDecorator').getInsideDecorators().forEach(function(aa){if(aa.check(x,p)){w.push(aa.render(x,p,this.props));v.push(aa.getAdditionalClassNames());}}.bind(this));c('MessengerDecorator').getBeforeDecorators().forEach(function(aa){if(aa.check(x,p))v.push(aa.getAdditionalClassNames());});}var y=v.join(' ');if(c('ChatAnimatedGifs').shouldHideBody(q))s='';var z=q.ranges;if(q.profile_ranges&&q.profile_ranges.length)z=(z||[]).concat(q.profile_ranges.map(function(aa){return babelHelpers['extends']({},aa,{url:'/'+aa.id});}));if(c('ChatCodePasteUtils').containsCodeBlock(s))return c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',{style:{height:22}}),bootloadLoader:c('JSResource')('ChatCodeBubble.react').__setRef('ChatMessage.react'),body:s,className:"_5wdf",maxWidth:this.props.maxBubbleWidth,ranges:z,threadID:q.thread_id,customColor:r&&p?c('convertMIGColorToFIGColor')(r.custom_color):''});if(s||t)return c('React').createElement('div',{className:c('joinClasses')(y,"_5wde"+(' '+"_n4o"))},c('React').createElement(c('ChatBubble.react'),{attachments:t,body:s,className:"_5wdf",insideDecorators:w,isEmojiLike:c('EmojiLikeUtils').isEmojiLike(q),isFromViewer:this.props.isFromViewer,metaRanges:q.meta_ranges,message:q,maxWidth:this.props.maxBubbleWidth,ranges:z,ref:'bubble',threadID:q.thread_id,customLike:q.customLike,customColor:r&&p?c('convertMIGColorToFIGColor')(r.custom_color):'',threadCustomColor:r&&c('convertMIGColorToFIGColor')(r.custom_color)}),u);return null;};m.propTypes={message:l.instanceOf(c('ImmutableObject')).isRequired,maxBubbleWidth:l.number.isRequired,onAttachmentLoad:l.func,onStickerClick:l.func,participants:l.instanceOf(c('immutable').Map).isRequired,readReceipts:l.instanceOf(c('immutable').OrderedMap).isRequired,thread:l.instanceOf(c('ImmutableObject'))};f.exports=c('FluxContainer').create(m,{withProps:true});}),null);
__d('ChatMessageGroup.react',['cx','fbt','ChatConfig','ChatDateBreak.react','ChatMessage.react','Image.react','immutable','ImmutableObject','MercuryIDs','MercuryParticipants','MercuryTimestamp','MessengerTextWithEmoticons.react','React','ReactDOM','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('immutable').OrderedMap,k=c('React').PropTypes,l=new (c('ImmutableObject'))({name:'',href:'#',image_src:''}),m=c('ChatConfig').get('chattab_rounded_profile',false),n=c('React').createClass({displayName:'ChatMessageGroup',mixins:[c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'))],propTypes:{activeMessageID:k.string,author:k.string,hasDateBreak:k.bool,isCanonical:k.bool,isFromViewer:k.bool,isPageMessage:k.bool,maxBubbleWidth:k.number,messages:k.instanceOf(c('immutable').List).isRequired,readReceipts:k.instanceOf(j).isRequired,onAttachmentLoad:k.func,onStickerClick:k.func,thread:k.instanceOf(c('ImmutableObject')),threadID:k.string},statics:{calculateState:function p(q){return {participants:o(q)};}},shouldComponentUpdate:function p(q,r){return this.props.activeMessageID!==q.activeMessageID||this.props.isFromViewer!==q.isFromViewer||!c('immutable').is(this.props.messages,q.messages)||!c('immutable').is(this.state.participants,r.participants)||!c('immutable').is(this.props.thread,q.thread);},render:function p(){return c('React').createElement('div',{className:"_4tdt"+(this.props.isFromViewer?' '+"_ua0":'')+(!this.props.isFromViewer?' '+"_ua1":'')+(this._hasSeenHeadsAtBottom()?' '+"_3lil":'')},this._renderProfileColumn(),c('React').createElement('div',{className:"_ua2"},this._renderName(),c('React').createElement('div',{className:"_4tdv"},this._renderMessages())));},_renderProfileColumn:function p(){if(this.props.isFromViewer)return null;var q=this.state.participants.get(this.props.author)||l,r=i._("{name} {time}",[i.param('name',q.name),i.param('time',c('MercuryTimestamp').getPreciseTimestamp(this.props.messages.last().timestamp))]),s=q.image_src?c('React').createElement(c('Image.react'),{src:q.image_src}):null;return c('React').createElement('div',{className:"_31o4"+(m?' '+"_3njy":'')},c('React').createElement('a',{'aria-label':r,className:"_4tdw",'data-hover':'tooltip','data-tooltip-content':r,'data-tooltip-position':'left',href:q.href,ref:'link'},s));},_renderName:function p(){if(this.props.isCanonical||this.props.isFromViewer)return null;var q=this.state.participants.get(this.props.messages.first().author);if(!q)return null;var r=q.short_name;if(this.props.thread&&this.props.thread.custom_nickname){var s=c('MercuryIDs').getUserIDFromParticipantID(q.id);if(this.props.thread.custom_nickname[s])r=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:this.props.thread.custom_nickname[s]});}return c('React').createElement('div',{className:"_4tdx"},r);},_renderMessages:function p(){var q=this.props.messages.size,r=[];this.props.messages.forEach(function(s,t,u){var v=s.message_id===this.props.activeMessageID;if(v&&!(t===0&&this.props.hasDateBreak))r.push(c('React').createElement(c('ChatDateBreak.react'),{date:new Date(s.timestamp),key:'db:'+s.message_id}));r.push(c('React').createElement(c('ChatMessage.react'),{isFromViewer:this.props.isFromViewer,key:s.message_id,maxBubbleWidth:this.props.maxBubbleWidth,message:s,participants:this.state.participants,readReceipts:this.props.readReceipts,ref:s.message_id,nextTimestamp:this._getNextTimestamp(u,q,t),onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,thread:this.props.thread}));}.bind(this));return r;},_hasSeenHeadsAtBottom:function p(){var q=this.props,r=q.messages,s=q.nextTimestamp,t=q.readReceipts,u=r.last().timestamp,v=0;t.forEach(function(w){if(w>=u&&w<s)if(++v===2)return false;return null;});return v===2;},_getNextTimestamp:function p(q,r,s){return s<r-1?q.get(s+1).timestamp:this.props.nextTimestamp;},getMessageElement:function p(q){return c('ReactDOM').findDOMNode(this.refs[q]);}});function o(p){return c('immutable').Map().withMutations(function(q){p.readReceipts.forEach(function(r,s){q.set(s,c('MercuryParticipants').getOrFetch(s));});q.set(p.author,c('MercuryParticipants').getOrFetch(p.author));});}f.exports=n;}),null);
__d('MercuryMessageRendererUtils',['cx','invariant','HovercardLink','MercuryViewer','MessengerTextWithEmoticons.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j={getLinkToParticipant:function k(l,m){var n=l.fbid,o=c('HovercardLink').constructEndpoint({id:n}),p=m&&m.custom_nickname&&m.custom_nickname[n];if(p)p=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:p});var q=p?p:l.name;if(l.href)return c('React').createElement('a',{className:"_5wzt",href:l.href,'data-hovercard':o},q);return q;},moveCurrentUserToFront:function k(){var l=arguments.length<=0||arguments[0]===undefined?[]:arguments[0];l||i(0);var m=l.indexOf(c('MercuryViewer').getID());if(m>0){var n=l.filter(function(o){return o!==c('MercuryViewer').getID();});return [c('MercuryViewer').getID()].concat(n);}return l;}};f.exports=j;}),null);
__d('MercuryLogMessageRenderer',['cx','fbt','invariant','ix','Bootloader','CSS','Image.react','MercuryAttachmentViewer','MercuryViewer','MercuryLogMessageType','MessengerAdminGroupUtils','MessengerLightweightActionUtils','MessengerTextWithEmoticons.react','MercuryParticipants','React','ReactDOM','MercuryMessageRendererUtils','MercuryThreads','TooltipLink.react','UserAgent','convertMIGColorToFIGColor'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l=c('MercuryThreads').get(),m='source:messenger_growth:event_upcoming_bump',n={renderText:function fa(ga,ha,ia,ja){ha=ha||l.getThreadMetaNow(ga.thread_id);if(c('MessengerLightweightActionUtils').isLWAMessage(ga)){ja(c('MessengerLightweightActionUtils').getCollapsedLWAText(ga));return;}switch(ga.log_message_type){case c('MercuryLogMessageType').SUBSCRIBE:var ka=ga.author;ga.log_message_data||j(0);var la=ga.log_message_data.added_participants;la||j(0);var ma=la.length===1&&ka===la[0];if(ma){c('Bootloader').loadModules(["MercuryJoinableMessageRenderer"],function(oa){oa.renderText(ga,ha,ja);},'MercuryLogMessageRenderer');}else q(ga,ja);break;case c('MercuryLogMessageType').UNSUBSCRIBE:if(c('MessengerAdminGroupUtils').isJoinableThread(ha)){c('MessengerAdminGroupUtils').isGroupChat(ha)?ca(ga,ja):w(ga,ja);}else v(ga,ja);break;case c('MercuryLogMessageType').THREAD_NAME:if(ha&&c('MessengerAdminGroupUtils').isJoinableThread(ha)){c('MessengerAdminGroupUtils').isGroupChat(ha)?da(ga,ha,ja):x(ga,ha,ja);}else y(ga,ha,ja);break;case c('MercuryLogMessageType').THREAD_IMAGE:if(ha&&c('MessengerAdminGroupUtils').isJoinableThread(ha)){c('MessengerAdminGroupUtils').isGroupChat(ha)?ea(ga,ha,ja):z(ga,ha,ja);}else aa(ga,ha,ja);break;case c('MercuryLogMessageType').WALLPAPER:ba(ga,ja);break;case c('MercuryLogMessageType').GENERIC_ADMIN_TEXT:var na=c('convertMIGColorToFIGColor')(ha&&ha.custom_color);c('Bootloader').loadModules(["MercuryXMATRenderer"],function(oa){ja(oa.renderText(na,ga,ia));},'MercuryLogMessageRenderer');break;default:c('Bootloader').loadModules(["MercurySpecialLogMessageRenderer"],function(oa){oa.renderText(ga,ja);},'MercuryLogMessageRenderer');break;}},renderIcon:function fa(ga){return c('React').createElement(c('Image.react'),{className:o(ga.log_message_type,ga.log_message_data),src:k("99239")});},renderLegacy:function fa(ga,ha,ia,ja){o(ja.log_message_type,ja.log_message_data).split(' ').forEach(function(ka){return ka&&c('CSS').addClass(ga,ka);});this.renderText(ja,null,false,function(ka){c('ReactDOM').render(c('React').createElement('span',null,ka),ha);});this.renderAttachmentLegacy(ia,ja);},renderAttachmentLegacy:function fa(ga,ha){var ia;if(ha.log_message_type===c('MercuryLogMessageType').THREAD_IMAGE)(function(){ha.log_message_data||j(0);var ja=ha.log_message_data.image;if(ja&&ja.preview_url){c('ReactDOM').render(c('React').createElement(c('Image.react'),{className:"_z6a",onClick:function ka(){return p(ja);},src:ja.preview_url}),ga);c('CSS').show(ga);}})();}};f.exports=n;function o(fa,ga){var ha=!!(ga&&ga.answered);return "_5wzu"+(fa===c('MercuryLogMessageType').SUBSCRIBE?' '+"_5wzj":'')+(fa===c('MercuryLogMessageType').UNSUBSCRIBE?' '+"_5wzk":'')+(fa===c('MercuryLogMessageType').THREAD_NAME?' '+"_5wzl":'')+(fa===c('MercuryLogMessageType').THREAD_IMAGE?' '+"_5wzm":'')+(fa===c('MercuryLogMessageType').VIDEO_CALL&&ha?' '+"_5wzn":'')+(fa===c('MercuryLogMessageType').VIDEO_CALL&&!ha?' '+"_5wzo":'')+(fa===c('MercuryLogMessageType').PHONE_CALL&&ha?' '+"_5wzp":'')+(fa===c('MercuryLogMessageType').PHONE_CALL&&!ha?' '+"_5wzq":'')+(fa===c('MercuryLogMessageType').SERVER_ERROR?' '+"_5wzr":'')+(!fa?' '+"_2r5l":'');}function p(fa){c('MercuryAttachmentViewer').bootstrapWithConfig({src:fa.preview_url,endpoint:fa.url,fbid:fa.metadata.fbid,dimensions:fa.metadata.dimensions,disablePaging:true},null);}function q(fa,ga){fa.log_message_data||j(0);var ha=c('MercuryMessageRendererUtils').moveCurrentUserToFront(fa.log_message_data.added_participants);ha||j(0);switch(ha.length){case 1:r(fa,ga,ha);break;case 2:s(fa,ga,ha);break;case 3:t(fa,ga,ha);break;default:u(fa,ga,ha);break;}}function r(fa,ga,ha){var ia=[fa.author,ha[0]];c('MercuryParticipants').getMulti(ia,function(ja){if(fa.author===c('MercuryViewer').getID()){ga(i._("Has a\u00f1adido a {subscriber1}.",[i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[0]]))]));}else if(ha[0]===c('MercuryViewer').getID()){ga(i._("{actor} te ha a\u00f1adido.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[fa.author]))]));}else ga(i._("{actor} ha a\u00f1adido a {subscriber1}.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[fa.author])),i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[0]]))]));});}function s(fa,ga,ha){var ia=[fa.author].concat(ha);c('MercuryParticipants').getMulti(ia,function(ja){if(fa.author===c('MercuryViewer').getID()){ga(i._("Has a\u00f1adido a {subscriber1} y {subscriber2}.",[i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[0]])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[1]]))]));}else if(ha[0]===c('MercuryViewer').getID()){ga(i._("{actor} te ha a\u00f1adido a ti y a {subscriber2}.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[fa.author])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[1]]))]));}else ga(i._("{actor} ha a\u00f1adido a {subscriber1} y {subscriber2}.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[fa.author])),i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[0]])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[1]]))]));});}function t(fa,ga,ha){var ia=[fa.author].concat(ha);c('MercuryParticipants').getMulti(ia,function(ja){if(fa.author===c('MercuryViewer').getID()){ga(i._("Has a\u00f1adido a {subscriber1}, {subscriber2} y {subscriber3}.",[i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[0]])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[1]])),i.param('subscriber3',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[2]]))]));}else if(ha[0]===c('MercuryViewer').getID()){ga(i._("{actor} te ha a\u00f1adido a ti y a {subscriber2} y {subscriber3}.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[fa.author])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[1]])),i.param('subscriber3',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[2]]))]));}else ga(i._("{actor} ha a\u00f1adido a {subscriber1}, {subscriber2} y {subscriber3}.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[fa.author])),i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[0]])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[1]])),i.param('subscriber3',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[ha[2]]))]));});}function u(fa,ga,ha){var ia=[fa.author].concat(ha);c('MercuryParticipants').getMulti(ia,function(ja){function ka(ma){var na=c('React').createElement('div',null,ma.map(function(oa){return c('React').createElement('div',null,oa.name);}));return c('React').createElement(c('TooltipLink.react'),{alignH:'center',position:'above',tooltip:na},i._({"*":"{num} personas m\u00e1s"},[i.param('num',ma.length,[0])]));}var la=ha.map(function(ma){return ja[ma];});if(fa.author===c('MercuryViewer').getID()){ga(i._("Has a\u00f1adido a {subscriber1}, {subscriber2} y {more_people}.",[i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(la[0])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(la[1])),i.param('more_people',ka(la.slice(2)))]));}else if(ha[0]===c('MercuryViewer').getID()){ga(i._("{actor} te ha a\u00f1adido a ti y a {subscriber2} y {more_people}.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[fa.author])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(la[1])),i.param('more_people',ka(la.slice(2)))]));}else ga(i._("{actor} ha a\u00f1adido a {subscriber1}, {subscriber2} y {more_people}.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(ja[fa.author])),i.param('subscriber1',c('MercuryMessageRendererUtils').getLinkToParticipant(la[0])),i.param('subscriber2',c('MercuryMessageRendererUtils').getLinkToParticipant(la[1])),i.param('more_people',ka(la.slice(2)))]));});}function v(fa,ga){var ha=[fa.author];fa.log_message_data||j(0);var ia=fa.log_message_data.removed_participants;ia||j(0);var ja=void 0;if(ia.length===1){ja=ia[0];ha.push(ja);}c('MercuryParticipants').getMulti(ha,function(ka){var la=ka[fa.author],ma=ka[ja];if(fa.author===c('MercuryViewer').getID()){if(!ja||ja===fa.author){ga(i._("Has abandonado la conversaci\u00f3n."));}else ga(i._("Has eliminado a {name} de la conversaci\u00f3n.",[i.param('name',c('MercuryMessageRendererUtils').getLinkToParticipant(ma))]));}else if(!ja||ja===fa.author){ga(i._("{actor} ha abandonado la conversaci\u00f3n.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(la))]));}else if(ja===c('MercuryViewer').getID()){ga(i._("{actor} te ha eliminado de la conversaci\u00f3n.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(la))]));}else ga(i._("{actor} ha eliminado a {name} de la conversaci\u00f3n.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(la)),i.param('name',c('MercuryMessageRendererUtils').getLinkToParticipant(ma))]));});}function w(fa,ga){var ha=[fa.author];fa.log_message_data||j(0);var ia=fa.log_message_data.removed_participants;ia||j(0);var ja=void 0;if(ia.length===1){ja=ia[0];ha.push(ja);}c('MercuryParticipants').getMulti(ha,function(ka){var la=ka[fa.author],ma=ka[ja];if(fa.author===c('MercuryViewer').getID()){if(!ja||ja===fa.author){ga(i._("Has abandonado la sala."));}else ga(i._("Has eliminado a {name} de la sala.",[i.param('name',c('MercuryMessageRendererUtils').getLinkToParticipant(ma))]));}else if(!ja||ja===fa.author){ga(i._("{actor} left the room.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(la))]));}else if(ja===c('MercuryViewer').getID()){ga(i._("{actor} te ha eliminado de la sala.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(la))]));}else ga(i._("{actor} ha eliminado a {name} de la sala.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(la)),i.param('name',c('MercuryMessageRendererUtils').getLinkToParticipant(ma))]));});}function x(fa,ga,ha){fa.log_message_data||j(0);var ia=fa.log_message_data.name,ja="_5wzs"+(c('UserAgent').isBrowser('Chrome')?' '+"_4fbd":'');if(fa.author===c('MercuryViewer').getID()){if(ia){var ka=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:ia});ha(i._("Has asignado un nombre a la sala: {name}.",[i.param('name',c('React').createElement('span',{className:ja},ka))]));}else ha(i._("Has eliminado el nombre de la sala."));}else c('MercuryParticipants').get(fa.author,function(la){var ma=c('MercuryMessageRendererUtils').getLinkToParticipant(la,ga);if(ia){var na=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:ia});ha(i._("{actor} ha asignado un nombre a la sala: {name}.",[i.param('actor',ma),i.param('name',c('React').createElement('span',{className:ja},na))]));}else ha(i._("{actor} ha eliminado el nombre de la sala.",[i.param('actor',ma)]));});}function y(fa,ga,ha){fa.log_message_data||j(0);var ia=fa.log_message_data.name,ja="_5wzs"+(c('UserAgent').isBrowser('Chrome')?' '+"_4fbd":'');if(ia&&fa.tags&&fa.tags.indexOf(m)!==-1){ha(i._("Se ha asignado el nombre {name} al grupo.",[i.param('name',c('React').createElement('span',{className:ja},c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:ia})))]));}else if(fa.author===c('MercuryViewer').getID()){if(ia){var ka=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:ia});ha(i._("Has asignado un nombre a la conversaci\u00f3n: {name}.",[i.param('name',c('React').createElement('span',{className:ja},ka))]));}else ha(i._("Has eliminado el nombre de la conversaci\u00f3n."));}else c('MercuryParticipants').get(fa.author,function(la){var ma=c('MercuryMessageRendererUtils').getLinkToParticipant(la,ga);if(ia){var na=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:ia});ha(i._("{actor} ha llamado a la conversaci\u00f3n \"{name}\".",[i.param('actor',ma),i.param('name',c('React').createElement('span',{className:ja},na))]));}else ha(i._("{actor} ha eliminado el nombre de la conversaci\u00f3n.",[i.param('actor',ma)]));});}function z(fa,ga,ha){if(fa.author===c('MercuryViewer').getID()){fa.log_message_data||j(0);if(fa.log_message_data.image){ha(i._("Has cambiado la foto de la sala."));}else ha(i._("Has eliminado la foto de la sala."));}else c('MercuryParticipants').get(fa.author,function(ia){var ja=c('MercuryMessageRendererUtils').getLinkToParticipant(ia,ga);fa.log_message_data||j(0);if(fa.log_message_data.image){ha(i._("{actor} ha cambiado la foto de la sala.",[i.param('actor',ja)]));}else ha(i._("{actor} ha eliminado la foto de la sala.",[i.param('actor',ja)]));});}function aa(fa,ga,ha){if(fa.tags!==undefined&&fa.tags.indexOf(m)!==-1){ha(i._("Se ha establecido la imagen de la conversaci\u00f3n."));}else if(fa.author===c('MercuryViewer').getID()){fa.log_message_data||j(0);if(fa.log_message_data.image){ha(i._("Has cambiado la imagen de la conversaci\u00f3n."));}else ha(i._("Has eliminado la imagen de la conversaci\u00f3n."));}else c('MercuryParticipants').get(fa.author,function(ia){var ja=c('MercuryMessageRendererUtils').getLinkToParticipant(ia,ga);fa.log_message_data||j(0);if(fa.log_message_data.image){ha(i._("{actor} ha cambiado la imagen de la conversaci\u00f3n.",[i.param('actor',ja)]));}else ha(i._("{actor} ha eliminado la imagen de la conversaci\u00f3n.",[i.param('actor',ja)]));});}function ba(fa,ga){if(fa.author===c('MercuryViewer').getID()){ga(i._("Has cambiado el fondo de pantalla."));}else c('MercuryParticipants').get(fa.author,function(ha){var ia=c('MercuryMessageRendererUtils').getLinkToParticipant(ha);ga(i._("{actor} ha cambiado el fondo de pantalla.",[i.param('actor',ia)]));});}function ca(fa,ga){var ha=[fa.author];fa.log_message_data||j(0);var ia=fa.log_message_data.removed_participants;ia||j(0);var ja=void 0;if(ia.length===1){ja=ia[0];ha.push(ja);}c('MercuryParticipants').getMulti(ha,function(ka){var la=ka[fa.author],ma=ka[ja];if(fa.author===c('MercuryViewer').getID()){if(!ja||ja===fa.author){ga(i._("Has abandonado el chat."));}else ga(i._("Has eliminado a {name} del chat.",[i.param('name',c('MercuryMessageRendererUtils').getLinkToParticipant(ma))]));}else if(!ja||ja===fa.author){ga(i._("{actor} ha abandonado el chat.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(la))]));}else if(ja===c('MercuryViewer').getID()){ga(i._("{actor} te ha eliminado del chat.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(la))]));}else ga(i._("{actor} ha eliminado a {name} del chat.",[i.param('actor',c('MercuryMessageRendererUtils').getLinkToParticipant(la)),i.param('name',c('MercuryMessageRendererUtils').getLinkToParticipant(ma))]));});}function da(fa,ga,ha){fa.log_message_data||j(0);var ia=fa.log_message_data.name,ja="_5wzs"+(c('UserAgent').isBrowser('Chrome')?' '+"_4fbd":'');if(fa.author===c('MercuryViewer').getID()){if(ia){var ka=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:ia});ha(i._("Has asignado al chat el nombre \"{name}\".",[i.param('name',c('React').createElement('span',{className:ja},ka))]));}else ha(i._("Has eliminado el nombre del chat."));}else c('MercuryParticipants').get(fa.author,function(la){var ma=c('MercuryMessageRendererUtils').getLinkToParticipant(la,ga);if(ia){var na=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:ia});ha(i._("{actor} ha asignado al chat el nombre \"{name}\".",[i.param('actor',ma),i.param('name',c('React').createElement('span',{className:ja},na))]));}else ha(i._("{actor} ha eliminado el nombre del chat.",[i.param('actor',ma)]));});}function ea(fa,ga,ha){if(fa.author===c('MercuryViewer').getID()){fa.log_message_data||j(0);if(fa.log_message_data.image){ha(i._("Has cambiado la imagen del perfil."));}else ha(i._("Has eliminado la imagen del chat."));}else c('MercuryParticipants').get(fa.author,function(ia){var ja=c('MercuryMessageRendererUtils').getLinkToParticipant(ia,ga);fa.log_message_data||j(0);if(fa.log_message_data.image){ha(i._("{actor} ha cambiado la imagen del chat.",[i.param('actor',ja)]));}else ha(i._("{actor} ha eliminado la imagen del chat.",[i.param('actor',ja)]));});}}),null);
__d('MercuryLogMessage.react',['cx','fbt','DOM','DOMDimensions','Event','EventReminderRequestHelper','ImmutableObject','MercuryLogMessageRenderer','MercuryLogMessageType','MessagingGenericAdminTextType','React','ShimButton.react','cancelAnimationFrame','emptyFunction','formatDate','joinClasses','requestAnimationFrame','requireWeak'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={messageText:null,showEventReminderFlyout:false},this.$MercuryLogMessage4=function(){this.$MercuryLogMessage5();}.bind(this),this.$MercuryLogMessage9=function(){if(!this.state.showEventReminderFlyout){c('EventReminderRequestHelper').fetchEventReminder(this.props.thread.thread_id,this.props.thread.lightweight_event.oid,function(){this.$MercuryLogMessage1&&this.setState({showEventReminderFlyout:true});}.bind(this));}else this.setState({showEventReminderFlyout:false});}.bind(this),this.$MercuryLogMessage11=function(s){if(s!==this.state.showEventReminderFlyout)this.setState({showEventReminderFlyout:s});}.bind(this),o;}m.prototype.componentDidMount=function(){this.$MercuryLogMessage1=true;this.componentWillReceiveProps(this.props);};m.prototype.componentWillUnmount=function(){this.$MercuryLogMessage1=false;if(this.$MercuryLogMessage2)c('cancelAnimationFrame')(this.$MercuryLogMessage2);};m.prototype.$MercuryLogMessage3=function(){return c('React').createElement(c('ShimButton.react'),{form:'link',onClick:this.$MercuryLogMessage4},i._("Mostrar los mensajes anteriores."));};m.prototype.$MercuryLogMessage5=function(){var n=this.props.loadMoreMessages&&this.props.loadMoreMessages();if(!this.$MercuryLogMessage1)return;if(n){this.setState({messageText:this.$MercuryLogMessage3()});}else{var o=i._("No se han encontrado los mensajes anteriores.");this.setState({messageText:o});}};m.prototype.componentWillReceiveProps=function(n){if(n.message.log_message_type===c('MercuryLogMessageType').SERVER_ERROR)return;c('MercuryLogMessageRenderer').renderText(n.message,n.thread,n.isLastOfType,function(o){this.$MercuryLogMessage1&&this.setState({messageText:o});}.bind(this));};m.prototype.shouldComponentUpdate=function(n,o){return this.state.messageText!=o.messageText||n.maxWidth!==this.props.maxWidth||this.state.showEventReminderFlyout!==o.showEventReminderFlyout;};m.prototype.componentDidUpdate=function(){this.$MercuryLogMessage6();if(!this.refs.attachment)return;c('MercuryLogMessageRenderer').renderAttachmentLegacy(this.refs.attachment,this.props.message);c('DOM').scry(this.refs.wrap,'img').forEach(function(n){var o=c('Event').listen(n,'load',function(){this.$MercuryLogMessage6();o.remove();}.bind(this));}.bind(this));};m.prototype.render=function(){return c('React').createElement('div',babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,"_5ye6"),ref:'wrap',style:babelHelpers['extends']({},this.props.style,this.$MercuryLogMessage7()),title:c('formatDate')(new Date(this.props.message.timestamp),'g:ia')}),c('React').createElement('div',{className:"_5ye7"},c('MercuryLogMessageRenderer').renderIcon(this.props.message),this.state.messageText),c('React').createElement('div',{className:"_5ye8",ref:'attachment'},this.$MercuryLogMessage8()));};m.prototype.$MercuryLogMessage8=function(){if(this.props.thread&&!this.props.thread.lightweight_event||!this.props.message.log_message_data)return null;var n=void 0;c('requireWeak')('EventReminderStateStore',function(r){n=r.getEvent(this.props.thread.thread_id);}.bind(this));if(!n||!n.exists)return null;var o;c('requireWeak')('Link.react',function(r){o=r;});var p=void 0;switch(this.props.message.log_message_data.message_type){case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_CREATE:case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_UPDATE_TIME:case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_UPDATE_TITLE:case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_UPDATE_LOCATION:case c('MessagingGenericAdminTextType').LIGHTWEIGHT_EVENT_UPDATE:p=i._("Cambiar");break;default:p=null;}var q=c('React').createElement(o,{href:'#',onClick:this.$MercuryLogMessage9,title:i._("Editar evento"),ref:'event_rem_link'},p);if(this.props.displayItems)q=null;return c('React').createElement('span',null,q,this.$MercuryLogMessage10());};m.prototype.$MercuryLogMessage10=function(){if(!this.state.showEventReminderFlyout)return null;var n={alignment:'right',position:'above',contextRef:function(){return this.refs.event_rem_link;}.bind(this),shown:this.state.showEventReminderFlyout,onToggle:this.$MercuryLogMessage11},o=void 0;c('requireWeak')('EventsActionsLogger',function(s){o=s;});var p={action_history:[{surface:o.Surface.MESSENGER_CHAT_TAB,mechanism:o.Mechanism.REMINDER_ADMIN_TEXT}]},q={threadID:this.props.thread.thread_id,dialogProps:n,flyoutNoSheet:true,isEditing:true,actionContext:p},r;c('requireWeak')('ChatEventReminderContainer.react',function(s){r=s;});return c('React').createElement(r,q);};m.prototype.$MercuryLogMessage7=function(){return this.props.maxWidth?{maxWidth:this.props.maxWidth}:null;};m.prototype.$MercuryLogMessage6=function(){if(this.$MercuryLogMessage2)c('cancelAnimationFrame')(this.$MercuryLogMessage2);this.$MercuryLogMessage2=c('requestAnimationFrame')(function(){this.props.onImageLoad&&this.props.onImageLoad(c('DOMDimensions').getElementDimensions(this.refs.wrap).height);delete this.$MercuryLogMessage2;}.bind(this));};m.propTypes={loadMoreMessages:l.func,maxWidth:l.number,message:l.instanceOf(c('ImmutableObject')).isRequired,onImageLoad:l.func,thread:l.object};m.defaultProps={onImageLoad:c('emptyFunction')};f.exports=m;}),null);
__d('ChatConversation.react',['cx','invariant','ChatCollapsedLogMessageGroup.react','ChatDateBreak.react','ChatMessageGroup.react','immutable','MercuryLogMessage.react','MercuryIDs','mercuryRogerRe','MessageList.react','React','Set','MercuryShareAttachmentRenderLocations','cancelAnimationFrame','requestAnimationFrame'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('mercuryRogerRe').get(),k=c('immutable').OrderedMap,l=c('React').PropTypes,m=c('React').createClass({displayName:'ChatConversation',_raf:(undefined,Number),_onMountTimeout:(undefined,Number),propTypes:{contextBanner:l.object,isCanonical:l.bool.isRequired,loadMoreMessages:l.func,maxBubbleWidth:l.number.isRequired,messages:l.instanceOf(c('immutable').List).isRequired,onAttachmentLoad:l.func,onMount:l.func,onStickerClick:l.func,viewer:l.string.isRequired,thread:l.object,threadID:l.string.isRequired},componentDidMount:function n(){this._raf=c('requestAnimationFrame')(function(){this._onMountTimeout=setTimeout(function(){this.props.onMount&&this.props.onMount();delete this._onMountTimeout;}.bind(this),0);delete this._raf;}.bind(this));},componentWillUnmount:function n(){if(this._raf)c('cancelAnimationFrame')(this._raf);clearTimeout(this._onMountTimeout);},render:function n(){return c('React').createElement('div',null,this.props.contextBanner,c('React').createElement(c('MessageList.react'),{DateBreak:c('ChatDateBreak.react'),LogMessage:c('MercuryLogMessage.react'),MessageGroup:c('ChatMessageGroup.react'),deliveryTimestamp:0,isCanonical:this.props.isCanonical,location:c('MercuryShareAttachmentRenderLocations').CHAT,loadMoreMessages:this.props.loadMoreMessages,maxBubbleWidth:this.props.maxBubbleWidth,CollapsedLogMessageGroup:c('ChatCollapsedLogMessageGroup.react'),messages:this.props.messages,onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,readReceipts:this._calculateReceipts(this.props),ref:'messageList',viewer:this.props.viewer,thread:this.props.thread,threadID:this.props.threadID}));},_calculateReceipts:function n(o){var p=c('MercuryIDs').getParticipantIDFromUserID(o.viewer),q=j.getSeenTimestamps(o.threadID),r=new (c('Set'))(o.thread?o.thread.participants:q.keys());r['delete'](p);return q.withMutations(function(s){c('immutable').Seq(o.messages).reverse().forEach(function(t){if(r.size===0)return false;if(!r.has(t.author))return null;s.update(t.author,function(u){if(!u||u.watermark<=t.timestamp)return {watermark:t.timestamp,action:t.timestamp};return u;});r['delete'](t.author);return null;});});},getMessageList:function n(){return this.refs.messageList;}});f.exports=m;}),null);
__d('ChatEditParticipantsUtils',['AsyncDialog','AsyncRequest','MercuryIDs','MercuryThreadIDMap','URI'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryThreadIDMap').get(),i={showParticipantsModal:function j(k){if(!c('MercuryIDs').isGroupChat(k))return;h.getServerIDFromClientID(k,function(l){c('AsyncDialog').send(new (c('AsyncRequest'))(new (c('URI'))('/ajax/browser/dialog/multichat_members/').addQueryData({id:l})));});}};f.exports=i;}),null);
__d('ChatInput.react',['AbstractMentionsTextEditor.react','BootloadedComponent.react','Bootloader','CompositeDraftDecorator','ContentState','DraftModifier','EditorState','EmojiFormat','ifRequired','JSResource','MercuryConfig','MessengerEmojiSpan.react','MessengerEmoticonSpan.react','MessengerMentionsEntityDecorator.react','MessengerMentionSource','messengerUploadFilesUtilRe','React','ReactDOM','cancelAnimationFrame','clearImmediate','createMessengerMentionDraftEntity','createCancelableFunction','debounce','emptyFunction','getDefaultKeyBinding','getEntityMatcher','getProfileRangesForContentState','getThreadTypeNameFromThreadType','getVisibleValueForContentStateWithMessengerEmoji','handleBeforeInputForMessengerEmoji','handleBeforeInputForMessengerEmoticon','handleSoftNewlineForMessengerEmoticon','insertEmoticonIntoEditorState','insertMentionIntoEditorState','insertMessengerEmojiIntoContentState','isSoftNewlineEvent','setImmediate','requestAnimationFrame'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=c('emptyFunction').thatReturnsNull,l=1,m='handled',n=8,o='not-handled';h=babelHelpers.inherits(p,c('React').Component);i=h&&h.prototype;function p(){var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=i.constructor).call.apply(r,[this].concat(u)),this.$ChatInput4=c('createCancelableFunction')(function(w,x){var y=w.participants,z=w.viewer,aa=w.thread;this.setState({mentionsSource:x(z,y,aa)});}.bind(this)),this.$ChatInput6=function(){var w=this.$ChatInput8(this.state.editorState.getCurrentContent());this.$ChatInput1=c('setImmediate')(function(){this.$ChatInput1=null;var x=c('EditorState').set(this.state.editorState,{decorator:w});this.setState({editorState:x});}.bind(this));}.bind(this),this.onChange=function(w){if(w!==this.state.editorState){this.setState({editorState:w});this.$ChatInput3(w);}}.bind(this),this.onReturn=function(event,w){if(c('isSoftNewlineEvent')(event)){var x=c('handleSoftNewlineForMessengerEmoticon');this.setState({editorState:x(w)});return m;}event.persist();this.setState({},function(){c('messengerUploadFilesUtilRe').sendAttchments(this.props.fileUploader,this.props.uploadPhotoFn);this.props.inputKeyDown(event,this.getValue());}.bind(this));return m;}.bind(this),this.getValue=function(){return this.getValueFromEditorState(this.state.editorState);}.bind(this),this.$ChatInput9=function(w,x){this.props.onBeforeInput&&this.props.onBeforeInput();var y=this.$ChatInput10(w,x),z=this.$ChatInput11(w,x);return y||z?m:o;}.bind(this),this.$ChatInput13=function(w){return this.$ChatInput12(w);}.bind(this),this.$ChatInput14=function(w,x){return this.$ChatInput12(x);}.bind(this),this.state={editorState:this.$ChatInput7(this.props.defaultText)},this.$ChatInput17=function(){var w=(this.state.addedMentionsCount||0)+1;this.setState({addedMentionsCount:w});}.bind(this),this.$ChatInput19=function(w,x){var y=(this.state.mentionsTriggeredCount||0)+1,z={mentionsTriggeredCount:y};if(!this.state.mentionsTriggerSource)z.mentionsTriggerSource=x===l?c('MessengerMentionSource').ATSIGN:c('MessengerMentionSource').TYPEAHEAD;this.setState(z);}.bind(this),this.$ChatInput16=function(w){return c('createMessengerMentionDraftEntity')(this.state.editorState.getCurrentContent(),w);}.bind(this),this.$ChatInput18=function(w){if(!this.refs.input.isShowingMentionables())this.props.onEscape&&this.props.onEscape(w);}.bind(this),s;}p.prototype.componentDidMount=function(){this.$ChatInput2=c('ReactDOM').findDOMNode(this).getBoundingClientRect().height;this.props.resizeFn(this.$ChatInput2);this.props.initializeThingsWithInputFn(c('ReactDOM').findDOMNode(this.refs.input),this.getValue);this.setState({triggeredWord:this.props.triggeredWord});var r=this.props.onTextChange;this.$ChatInput3=r?c('debounce')(function(s){r(this.getValueFromEditorState(s),200);}.bind(this),200):c('emptyFunction');c('Bootloader').loadModules(["createMentionsSearchSourceFromParticipants"],this.$ChatInput4.bind(this,this.props),'ChatInput.react');if(c('MercuryConfig').WWWMessengerUploadFilesPreview)c('Bootloader').loadModules(["FantaMessageActions"],c('emptyFunction'),'ChatInput.react');};p.prototype.componentWillUnmount=function(){if(this.$ChatInput1)c('clearImmediate')(this.$ChatInput1);if(this.$ChatInput5)c('cancelAnimationFrame')(this.$ChatInput5);this.$ChatInput4.cancel();this.$ChatInput5=null;};p.prototype.componentWillReceiveProps=function(r){if(this.state.triggeredWord!==r.triggeredWord)this.setState({triggeredWord:r.triggeredWord},this.$ChatInput6);if(!this.props.thread||!r.thread||q(r,this.props))c('Bootloader').loadModules(["createMentionsSearchSourceFromParticipants"],this.$ChatInput4.bind(this,r),'ChatInput.react');};p.prototype.componentDidUpdate=function(){this.$ChatInput5=c('requestAnimationFrame')(function(){if(!this.$ChatInput5)return;this.$ChatInput5=null;var r=c('ReactDOM').findDOMNode(this).getBoundingClientRect(),s=r.height;if(this.$ChatInput2!==s)this.props.resizeFn(s);this.$ChatInput2=s;}.bind(this));};p.prototype.$ChatInput7=function(r){var s=c('ContentState').createFromText(r);return c('EditorState').createWithContent(s,this.$ChatInput8(s));};p.prototype.resetState=function(){if(this.state.typeaheadReporter){this.state.typeaheadReporter.sessionEnd();this.state.typeaheadReporter.sessionStart();}this.setState({editorState:c('EditorState').moveFocusToEnd(this.$ChatInput7('')),triggeredWord:null,addedMentionsCount:0,mentionsTriggeredCount:0,mentionsTriggerSource:null});};p.prototype.resetAfterSend=function(r){var s,t=this,u=this.getMentions();if(r&&(u&&u.length||this.state.addedMentionsCount||this.state.mentionsTriggeredCount||this.state.mentionsTriggerSource))(function(){var v=t.state,w=v.addedMentionsCount,x=v.mentionsTriggeredCount,y=v.mentionsTriggerSource,z=t.props,aa=z.thread,ba=z.participants;c('Bootloader').loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(ca,da){new ca().setEvent(da.MENTION).setGroupSize(ba&&ba.length).setNumDelivered(u?u.length:0).setNumSelects(w).setNumTriggers(x).setThreadid(aa&&aa.thread_id).setThreadType(c('getThreadTypeNameFromThreadType')(aa&&aa.thread_type)).setOfflineThreadid(r.offline_threading_id).updateExtraData({source:y}).log();},'ChatInput.react');})();this.resetState();};p.prototype.$ChatInput8=function(r){var s=[{strategy:c('getEntityMatcher')(function(t){return t.getType()==='EMOTICON';},r.getEntity),component:c('MessengerEmoticonSpan.react')}];s.push({strategy:c('getEntityMatcher')(function(t){return t.getType()==='EMOJI';},r.getEntity),component:c('MessengerEmojiSpan.react')});s.push({strategy:c('getEntityMatcher')(function(t){return t.getType()==='MENTION';},r.getEntity),component:c('MessengerMentionsEntityDecorator.react')});return new (c('CompositeDraftDecorator'))(s);};p.prototype.getValueFromEditorState=function(r){var s=r.getCurrentContent();return c('getVisibleValueForContentStateWithMessengerEmoji')(s);};p.prototype.getMentions=function(){return c('getProfileRangesForContentState')(this.state.editorState.getCurrentContent());};p.prototype.focus=function(){this.refs.input&&this.refs.input.focus&&this.refs.input.focus();};p.prototype.$ChatInput10=function(r,s){var t=c('handleBeforeInputForMessengerEmoticon')(s,r);if(t===s)return false;this.setState({editorState:t});return true;};p.prototype.$ChatInput11=function(r,s){var t=c('handleBeforeInputForMessengerEmoji')(s,r);if(t===s)return false;this.setState({editorState:t});return true;};p.prototype.$ChatInput12=function(r){var s=/^image\//,t=r.filter(function(u){return s.test(u.type);});if(t.length){if(c('MercuryConfig').WWWMessengerUploadFilesPreview){c('ifRequired')('FantaMessageActions',function(u){u.prepareFilesForSend(this.props.threadID,t);}.bind(this),function(){c('Bootloader').loadModules(["FantaMessageActions"],function(u){u.prepareFilesForSend(this.props.threadID,t);}.bind(this),'ChatInput.react');}.bind(this));}else this.props.uploadPhotoFn(t[0]);return true;}return false;};p.prototype.insertEmoticon=function(r){var s=c('insertEmoticonIntoEditorState')(r,this.state.editorState);if(s!==this.state.editorState)this.setState({editorState:s});};p.prototype.insertEmoji=function(r){var s=this.state.editorState,t=c('insertMessengerEmojiIntoContentState')(c('EmojiFormat').codeArrayToCodeString(r),s.getCurrentContent(),s.getSelection(),s.getCurrentInlineStyle()),u=c('EditorState').push(s,t,'insert-characters');if(u!==this.state.editorState)this.setState({editorState:c('EditorState').forceSelection(u,t.getSelectionAfter())});};p.prototype.appendText=function(r){var s=this.state.editorState,t=s.getSelection(),u=s.getCurrentContent();u=c('DraftModifier').insertText(u,t,r);s=c('EditorState').push(s,u,'insert-characters');this.setState({editorState:s});};p.prototype.render=function(){var r=babelHelpers['extends']({},this.props,this.$ChatInput15());return c('React').createElement(c('AbstractMentionsTextEditor.react'),babelHelpers['extends']({ref:'input'},r,{editorState:this.state.editorState,onChange:this.onChange,handleBeforeInput:this.$ChatInput9,handlePastedFiles:this.$ChatInput13,handleDroppedFiles:this.$ChatInput14,handleReturn:this.onReturn,spellCheck:true,stripPastedStyles:true,textAlignment:'left'}));};p.prototype.$ChatInput15=function(){return {autoHighlight:true,handleContentReturn:this.onReturn,maxResults:n,mentionResultsProps:{typeaheadView:c('BootloadedComponent.react').create(c('JSResource')('ChatMentionsInputTypeaheadView.react').__setRef('ChatInput.react')),typeaheadViewProps:{},position:'above',autoflip:true},mentionResultsComponent:c('BootloadedComponent.react').create(c('JSResource')('MentionsLayer.react').__setRef('ChatInput.react')),mentionCreationFn:this.$ChatInput16,mentionsSource:this.state.mentionsSource,onAddMention:this.$ChatInput17,onEscape:this.$ChatInput18,onShowMentions:this.$ChatInput19};};p.prototype.addMention=function(r){var s=c('insertMentionIntoEditorState')(r,this.state.editorState,0,this.$ChatInput16);if(!this.state.mentionsTriggerSource)this.setState({mentionsTriggerSource:c('MessengerMentionSource').REPLY});this.onChange(s);this.$ChatInput17();};p.propTypes={blockStyleFn:j.func,fileUploader:j.object,initializeThingsWithInputFn:j.func,inputKeyDown:j.func,keyBindingFn:j.func,onBeforeInput:j.func,onBlur:j.func,onEscape:j.func,onFocus:j.func,onTab:j.func,resizeFn:j.func,thread:j.object,threadID:j.string,viewer:j.string};p.defaultProps={blockStyleFn:k,keyBindingFn:c('getDefaultKeyBinding')};function q(r,s){var t=r.participants,u=s.participants;if(!t||!u)return true;var v=t.filter(Boolean),w=u.filter(Boolean);return v.length!==w.length;}f.exports=p;}),null);
__d('ChatContentSearchContextualDialog.react',['cx','ContextualLayerAutoFlipHorizontal','LayerHideOnEscape','ReactAbstractContextualDialog','ReactLayer'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('ReactLayer').createClass(c('ReactAbstractContextualDialog').createSpec({addedBehaviors:[c('ContextualLayerAutoFlipHorizontal'),c('LayerHideOnEscape')],displayName:'StickerXUIContextualDialog',theme:{wrapperClassName:"_53ii",arrowDimensions:{offset:47,length:16}}}));f.exports=i;}),null);
__d('ChatContentSearchButton.react',['cx','fbt','BootloadOnRender.react','ChatFlyoutPlaceholder.react','ChatContentSearchContextualDialog.react','JSResource','LazyComponent.react','Link.react','ReactComponentWithPureRenderMixin','React','MercuryShareAttachmentRenderLocations','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=278,l=c('React').createClass({displayName:'ChatContentSearchButton',_clickGuard:false,mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{clicked:j.bool,ContextualDialogClass:j.func,flyoutAlignment:j.oneOf(['left','right']),getQuery:j.func.isRequired,location:j.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()),onLoad:j.func,onSelect:j.func.isRequired},getDefaultProps:function m(){return {flyoutAlignment:'left',location:c('MercuryShareAttachmentRenderLocations').CHAT};},getInitialState:function m(){return {query:'',shown:!!this.props.clicked};},componentDidMount:function m(){this.props.onLoad&&this.props.onLoad(this);},updateQuery:function m(){this.setState({query:this.props.getQuery()});},hideFlyout:function m(){this.setState(this.getInitialState());},render:function m(){return c('React').createElement('span',null,c('React').createElement(c('Link.react'),{className:c('joinClasses')(this.props.className,this.state.shown?"open":''),href:'#',onMouseDown:this._handleMouseDown,onClick:this._handleClick,role:'button',title:i._("Elige un gif o un sticker"),ref:'link'}),this.renderLayers());},renderLayers:function m(){if(!this.state.shown)return null;var n=this.props.ContextualDialogClass||c('ChatContentSearchContextualDialog.react');return c('React').createElement(n,{alignment:this.props.flyoutAlignment,contextRef:function(){return this.refs.link;}.bind(this),onBlur:this.hideFlyout,onToggle:this._handleContextualDialogToggle,shown:this.state.shown,width:k,key:'contextualDialog'},c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{location:this.props.location,onEscKeyDown:this.hideFlyout,onSelect:this._handleSelect,query:this.state.query}),loader:c('JSResource')('ChatContentSearchFlyout.react').__setRef('ChatContentSearchButton.react'),placeholder:c('React').createElement(c('ChatFlyoutPlaceholder.react'),null)}));},_handleMouseDown:function m(n){this._clickGuard=this.state.shown;},_handleClick:function m(n){n.stopPropagation();if(this.state.shown||this._clickGuard)return;this.setState({query:this.props.getQuery(),shown:!this.state.shown});},_handleSelect:function m(n,o){this.props.onSelect(n,o);this.hideFlyout();},_handleContextualDialogToggle:function m(n){this.setState({shown:n});}});f.exports=l;}),null);
__d('ChatEmojiButton.react',['cx','fbt','BootloadOnRender.react','ChatFlyoutPlaceholder.react','JSResource','LazyComponent.react','Link.react','ReactComponentWithPureRenderMixin','React','XUIContextualDialog.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=278,l=c('React').createClass({displayName:'ChatEmojiButton',_clickGuard:false,mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{ContextualDialogClass:j.func.isRequired,flyoutAlignment:j.oneOf(['left','right']),fromChatTab:j.bool,onMount:j.func,onSelect:j.func,sendCustomEmoji:j.func,threadID:j.string},getDefaultProps:function m(){return {ContextualDialogClass:c('XUIContextualDialog.react'),flyoutAlignment:'left'};},getInitialState:function m(){return {shown:false};},componentDidMount:function m(){this.props.onMount&&this.props.onMount(this);},hideFlyout:function m(){this.setState(this.getInitialState());this.props.getInput&&this.props.getInput().focus();},render:function m(){return c('React').createElement(c('Link.react'),{className:c('joinClasses')(this.props.className,this.state.shown?"open":''),href:'#',onMouseDown:this._handleMouseDown,onClick:this._handleClick,role:'button',title:i._("Elige un emoticono"),ref:'link'},this.renderLayers());},renderLayers:function m(){if(!this.state.shown)return null;var n=this.props.ContextualDialogClass;return c('React').createElement(n,{alignment:this.props.flyoutAlignment,contextRef:function(){return this.refs.link;}.bind(this),offsetY:this.props.fromChatTab?-20:10,onBlur:this.hideFlyout,onToggle:this._handleContextualDialogToggle,shown:this.state.shown,width:k,key:'contextualDialog'},c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{onCategorySelect:this._focusInput,onEscKeyDown:this.hideFlyout,onSelect:this._handleSelect,sendCustomEmoji:this.props.sendCustomEmoji,threadID:this.props.threadID,width:k}),loader:c('JSResource')('ChatEmojiFlyout.react').__setRef('ChatEmojiButton.react'),placeholder:c('React').createElement(c('ChatFlyoutPlaceholder.react'),null)}));},_focusInput:function m(){this.props.getInput&&this.props.getInput().focus();},_handleMouseDown:function m(){this._clickGuard=this.state.shown;},_handleClick:function m(n){n.stopPropagation();if(this._clickGuard){this._clickGuard=false;return;}this.setState({shown:!this.state.shown});this._focusInput();},_handleSelect:function m(n){this.props.onSelect&&this.props.onSelect(n);},_handleContextualDialogToggle:function m(n){this.setState({shown:n});}});f.exports=l;}),null);
__d('ChatEventPlanButton.react',['cx','fbt','Bootloader','BootloadOnRender.react','ChatFlyoutPlaceholder.react','EventsActionsLogger','EventReminderActionsLogger','JSResource','LazyComponent.react','Link.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={showFlyout:false},this.$ChatEventPlanButton2=false,this.$ChatEventPlanButton3=function(){c('EventReminderActionsLogger').logClickOnEntryPoint();c('Bootloader').loadModules(["EventReminderStateStore","EventReminderRequestHelper"],function(r,s){var t=r.getEvent(this.props.threadID);if(!this.$ChatEventPlanButton2)return;if(t&&t.exists){this.$ChatEventPlanButton1=true;if(!this.state.showFlyout){s.fetchEventReminder(this.props.threadID,t.eventID,function(){if(!this.$ChatEventPlanButton2)return;this.setState({showFlyout:true});}.bind(this));}else this.setState({showFlyout:false});}else{this.$ChatEventPlanButton1=false;this.setState({showFlyout:!this.state.showFlyout});}}.bind(this),'ChatEventPlanButton.react');}.bind(this),this.onToggle=function(r){if(r!==this.state.showFlyout)this.setState({showFlyout:r});}.bind(this),n;}l.prototype.componentDidMount=function(){this.$ChatEventPlanButton2=true;};l.prototype.componentWillUnmount=function(){this.$ChatEventPlanButton2=false;};l.prototype.render=function(){var m="_6gb _3k_u";return c('React').createElement('div',null,c('React').createElement(c('Link.react'),{className:m,onClick:this.$ChatEventPlanButton3,ref:'event_plan',role:'button',title:i._("Iniciar un plan")},this.$ChatEventPlanButton4()));};l.prototype.$ChatEventPlanButton4=function(){if(!this.state.showFlyout)return null;var m={alignment:'right',position:'above',contextRef:function(){return this.refs.event_plan;}.bind(this),shown:this.state.showFlyout,onToggle:this.onToggle},n={action_history:[{surface:c('EventsActionsLogger').Surface.MESSENGER_CHAT_TAB,mechanism:c('EventsActionsLogger').Mechanism.MESSENGER_COMPOSER}]};return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{actionContext:n,dialogProps:m,flyoutNoSheet:true,isEditing:this.$ChatEventPlanButton1,threadID:this.props.threadID}),loader:c('JSResource')('ChatEventReminderContainer.react').__setRef('ChatEventPlanButton.react'),placeholder:c('React').createElement(c('ChatFlyoutPlaceholder.react'),null)});};f.exports=l;}),null);
__d('StickerContextualDialog.react',['cx','ContextualLayerAutoFlipHorizontal','ReactAbstractContextualDialog','ReactLayer'],(function a(b,c,d,e,f,g,h){'use strict';var i=7,j=c('ReactLayer').createClass(c('ReactAbstractContextualDialog').createSpec({addedBehaviors:[c('ContextualLayerAutoFlipHorizontal')],displayName:'StickerXUIContextualDialog',theme:{wrapperClassName:"_53ii",arrowDimensions:{offset:i,length:16}}}));j.WIDTH={NORMAL:312,WIDE:400};f.exports=j;}),null);
__d('ChatStickerButton.react',['cx','fbt','BootloadedComponent.react','JSResource','Link.react','React','StickerContextualDialog.react','StickersActions','StickersStateStore','XUISpinner.react','emptyFunction','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=278;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(o){k.constructor.call(this,o);this.$ChatStickerButton1=false;this.renderLayers=function(){if(!this.state.shown)return null;var p=this.props.ContextualDialogClass;return c('React').createElement(p,{alignment:this.props.flyoutAlignment,className:"_5e-r",contextRef:function(){return this.refs.link;}.bind(this),onBeforeHide:this.$ChatStickerButton5,onBlur:this.$ChatStickerButton3,position:'above',shown:this.state.shown,width:this.props.flyoutWidth,key:'contextualDialog'},c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',{style:{padding:'30px',textAlign:'center'}},c('React').createElement(c('XUISpinner.react'),{size:'large'})),bootloadLoader:c('JSResource')('StickersFlyout.react').__setRef('ChatStickerButton.react'),className:this.props.flyoutClassName,onShown:function(q){if(this.props.onFlyoutShown)this.props.onFlyoutShown(q);}.bind(this),onHidden:function(){if(this.props.onFlyoutHidden)this.props.onFlyoutHidden();}.bind(this),onEscKeyDown:this.$ChatStickerButton3,onStickerSelect:this.$ChatStickerButton6,onEmoticonSelect:this.$ChatStickerButton7,shown:this.state.shown}));}.bind(this);this.$ChatStickerButton4=function(){this.$ChatStickerButton1=this.state.shown;}.bind(this);this.showFlyout=function(p){p&&p.stopPropagation();if(this.$ChatStickerButton1||this.props.disabled){this.$ChatStickerButton1=false;return;}c('StickersActions').showStickerFlyout(this.props.threadID);}.bind(this);this.$ChatStickerButton5=function(){if(this.state.shown)this.$ChatStickerButton3();}.bind(this);this.$ChatStickerButton3=function(){c('StickersActions').hideStickerFlyout();};this.$ChatStickerButton6=function(p){this.props.onStickerSelect(p);}.bind(this);this.$ChatStickerButton7=function(p){this.$ChatStickerButton3();this.props.onEmoticonSelect(p);}.bind(this);this.state={shown:!!o.clicked};}n.prototype.componentDidMount=function(){this.props.onLoad&&this.props.onLoad(this);this.$ChatStickerButton2=c('StickersStateStore').addListener(function(){var o=c('StickersStateStore').getState();if(o.get('showFlyout')&&o.get('threadID')===this.props.threadID){if(this.$ChatStickerButton1||this.props.disabled){this.$ChatStickerButton1=false;return;}this.setState({shown:true});}else{var p=this.props.getInput&&this.props.getInput();p&&p.focus&&p.focus();this.setState({shown:false});}}.bind(this));};n.prototype.componentWillUnmount=function(){if(this.state.shown)this.$ChatStickerButton3();this.$ChatStickerButton2&&this.$ChatStickerButton2.remove();};n.prototype.render=function(){return c('React').createElement('span',null,c('React').createElement(c('Link.react'),{className:c('joinClasses')(this.props.className,this.state.shown?"open":''),href:'#',onClick:this.showFlyout,onMouseDown:this.$ChatStickerButton4,role:'button',title:i._("Elige un sticker"),ref:'link'}),this.renderLayers());};n.propTypes={className:l.string,clicked:l.bool,ContextualDialogClass:l.func.isRequired,disabled:l.bool,flyoutClassName:l.string,flyoutWidth:l.number,getInput:l.func,onLoad:l.func,onStickerSelect:l.func.isRequired,onEmoticonSelect:l.func.isRequired,onFlyoutShown:l.func,onFlyoutHidden:l.func,threadID:l.string};n.defaultProps={clicked:false,ContextualDialogClass:c('StickerContextualDialog.react'),disabled:false,flyoutWidth:m,onStickerSelect:c('emptyFunction'),onEmoticonSelect:c('emptyFunction')};f.exports=n;}),null);
__d('MessengerGamesButton.react',['cx','fbt','JSResource','MessengerEnvironment','Link.react','React','MessengerContextualDialog.react','MessengerSpinner.react','BootloadOnRender.react','LazyComponent.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=c('React').createElement('div',{style:{padding:'30px',textAlign:'center'}},c('React').createElement(c('MessengerSpinner.react'),{color:'grey'}));j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={flyoutOpen:false},this.$MessengerGamesButton1=false,this.$MessengerGamesButton2=function(t){this.setState({flyoutOpen:t});}.bind(this),this.$MessengerGamesButton3=function(){this.setState({flyoutOpen:false});}.bind(this),this.$MessengerGamesButton5=function(t){this.$MessengerGamesButton1=this.state.flyoutOpen;}.bind(this),this.$MessengerGamesButton4=function(t){t.stopPropagation();if(this.state.flyoutOpen||this.$MessengerGamesButton1)return;this.setState({flyoutOpen:!this.state.flyoutOpen});}.bind(this),p;}n.prototype.render=function(){var o=c('MessengerEnvironment').messengerui,p=(o?"_4ce_":'')+(o&&this.state.flyoutOpen?' '+"_5jhb":'')+(o?' '+"_39bk":'')+(o?' '+"_30yy":'')+(!o?' '+"_6gb":'')+(!o?' '+"_4cf0":''),q=null;if(this.state.flyoutOpen)q=c('React').createElement(c('MessengerContextualDialog.react'),{alignment:o?'right':'left',contextRef:function(){return this.refs.gamesButton;}.bind(this),shown:this.state.flyoutOpen,onToggle:this.$MessengerGamesButton2,onBlur:this.$MessengerGamesButton3},c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{placeholder:m,threadFBID:this.props.threadFBID}),loader:c('JSResource')('MessengerGamesFlyout.react').__setRef('MessengerGamesButton.react'),placeholder:m}));return c('React').createElement(c('Link.react'),{className:c('joinClasses')(this.props.className,p),onClick:this.$MessengerGamesButton4,onMouseDown:this.$MessengerGamesButton5,ref:'gamesButton',role:'button',title:i._("Jugar")},q);};n.propTypes={className:l.string,threadFBID:l.string.isRequired};f.exports=n;}),null);
__d('MessengerGroupPollingButton.react',['cssVar','cx','fbt','BootloadOnRender.react','EventDateTimePollActionsLogger','EventsActionsLogger','EventsMessengerDateTimePollGating','JSResource','LazyComponent.react','Link.react','MessengerContextualDialog.react','MessengerEnvironment','MessengerSpinner.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.state={flyoutOpen:false},this.$MessengerGroupPollingButton1=false,this.$MessengerGroupPollingButton2=function(t){this.setState({flyoutOpen:t});}.bind(this),this.$MessengerGroupPollingButton3=function(){this.setState({flyoutOpen:false});}.bind(this),this.$MessengerGroupPollingButton5=function(t){this.$MessengerGroupPollingButton1=this.state.flyoutOpen;}.bind(this),this.$MessengerGroupPollingButton4=function(t){t.stopPropagation();if(this.state.flyoutOpen||this.$MessengerGroupPollingButton1){return;}else c('EventDateTimePollActionsLogger').logClickOnEntryPoint({action_history:[{surface:c('EventsActionsLogger').Surface.MESSAGING,mechanism:c('EventsActionsLogger').Mechanism.MESSENGER_COMPOSER}]});this.setState({flyoutOpen:!this.state.flyoutOpen});}.bind(this),p;}n.prototype.render=function(){var o=this.props.customColor||"#0084ff",p=c('MessengerEnvironment').messengerui,q=null;if(this.state.flyoutOpen)q=c('React').createElement(c('MessengerContextualDialog.react'),{contextRef:function(){return this.refs.groupPollingButton;}.bind(this),shown:this.state.flyoutOpen,onToggle:this.$MessengerGroupPollingButton2,onBlur:this.$MessengerGroupPollingButton3},c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{customColor:o,threadFBID:this.props.threadFBID,onSubmitHandler:this.$MessengerGroupPollingButton3}),loader:c('EventsMessengerDateTimePollGating').shouldShowEntrypoint?c('JSResource')('MessengerGroupPollingTypeSelectionFlyout.react').__setRef('MessengerGroupPollingButton.react'):c('JSResource')('MessengerGroupPollingCreatePollFlyout.react').__setRef('MessengerGroupPollingButton.react'),placeholder:c('React').createElement('div',{style:{padding:'15px',textAlign:'center',width:'125px'}},c('React').createElement(c('MessengerSpinner.react'),{color:'grey'}))}));return c('React').createElement(c('Link.react'),{className:(p?"_39bk":'')+(p?' '+"_2o-b":'')+(p&&this.state.flyoutOpen?' '+"_5jhb":'')+(p?' '+"_30yy":'')+(!p?' '+"_6gb":'')+(!p?' '+"_4tjk":''),onClick:this.$MessengerGroupPollingButton4,onMouseDown:this.$MessengerGroupPollingButton5,ref:'groupPollingButton',role:'button',title:j._("Crea una encuesta")},q);};n.propTypes={customColor:m.string,threadFBID:m.string.isRequired};f.exports=n;}),null);
__d('MessengerHotLikeChatSVGIcon.react',['cssVar','fbt','React','uniqueID'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m='transparent',n=i._("Signo de aprobaci\u00f3n");j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={titleId:c('uniqueID')()},q;}o.prototype.render=function(){var p=this.props.color||"#0084ff",q=this.props.renderSize,r=q?{height:q,width:q}:undefined,s={fill:p,opacity:.2},t='bounds_'+this.state.titleId;return c('React').createElement('svg',babelHelpers['extends']({'aria-labelledby':this.state.titleId,preserveAspectRatio:'xMinYMax meet',version:'1.1',viewBox:'0 0 32 32',xmlns:'http://www.w3.org/2000/svg'},r),c('React').createElement('title',{id:this.state.titleId},n),c('React').createElement('g',null,c('React').createElement('rect',{id:t,fill:m,width:'32',height:'32'}),c('React').createElement('g',{style:s},c('React').createElement('path',{d:'M670.93,460a0.08,0.08,0,0,0,0,.15,1.75,1.75,0,0,1,1.29,1.66c0,1.45-1.2,1.66-2,1.75a0.06,0.06,0,0,0,0,.12,1.54,1.54,0,0,1,.88,1.68C671,467,669.17,467,668,467H658a5.63,5.63,0,0,1-5-2.5V455l2.19-1.59a4.39,4.39,0,0,0,1.21-1.75l1.48-5.59v-0.43l-0.41-3.81a0.45,0.45,0,0,1,.16-0.41c1.34-1,3.07-.23,4,2.6a12.83,12.83,0,0,1,0,6.33,0.55,0.55,0,0,0,.54.66c1.77,0,6.77,0,6.77,0,2,0,3.31.62,3.54,2.5a2.39,2.39,0,0,1-1.23,2.4,0.08,0.08,0,0,0,0,.14,1.87,1.87,0,0,1,1.71,2A2,2,0,0,1,670.93,460Zm-20.13-7h-5.6a0.2,0.2,0,0,0-.2.2v15.6a0.2,0.2,0,0,0,.2.2h5.6a0.2,0.2,0,0,0,.2-0.2V453.2A0.2,0.2,0,0,0,650.8,453Z',transform:'translate(-643 -439)'})),c('React').createElement('g',{style:s},c('React').createElement('rect',{x:'2',y:'14',width:'6',height:'16',rx:'0.2',ry:'0.2'})),c('React').createElement('path',{fill:p,d:'M650.8,453a0.2,0.2,0,0,1,.2.2v15.6a0.2,0.2,0,0,1-.2.2h-5.6a0.2,0.2,0,0,1-.2-0.2V453.2a0.2,0.2,0,0,1,.2-0.2h5.6m0-2h-5.6a2.2,2.2,0,0,0-2.2,2.2v15.6a2.2,2.2,0,0,0,2.2,2.2h5.6a2.2,2.2,0,0,0,2.2-2.2V453.2a2.2,2.2,0,0,0-2.2-2.2h0Z',transform:'translate(-643 -439)'}),c('React').createElement('path',{fill:p,'data-name':'stroke',d:'M658.83,441c1.06,0,2.16,1,2.83,3a12.83,12.83,0,0,1,0,6.33,0.55,0.55,0,0,0,.54.66h1.18l5.59,0c2,0,3.31.62,3.54,2.5a2.39,2.39,0,0,1-1.23,2.4,0.08,0.08,0,0,0,0,.14,1.87,1.87,0,0,1,1.71,2,2,2,0,0,1-2.07,1.91,0.08,0.08,0,0,0,0,.15,1.75,1.75,0,0,1,1.29,1.66c0,1.45-1.2,1.66-2,1.75a0.06,0.06,0,0,0,0,.12,1.54,1.54,0,0,1,.88,1.68C671,467,669.24,467,668.07,467H658a5.63,5.63,0,0,1-5-2.5V455l2.19-1.59a4.39,4.39,0,0,0,1.21-1.75l1.48-5.59v-0.43l-0.41-3.81a0.45,0.45,0,0,1,.16-0.41,2,2,0,0,1,1.17-.41m0-2h0a4,4,0,0,0-2.36.8,2.45,2.45,0,0,0-1,2.23l0.39,3.67h0v0.05l-1.41,5.32a3.64,3.64,0,0,1-.47.69l-2.19,1.59L651,454v11.15l0.36,0.52A7.58,7.58,0,0,0,658,469h10.07c3.25,0,4.95-1.21,5-3.59a4.54,4.54,0,0,0-.05-0.93,3.59,3.59,0,0,0,1.14-2.71,3.77,3.77,0,0,0-.18-1.15,3.85,3.85,0,0,0,1-2.57,4,4,0,0,0-.82-2.55,4.38,4.38,0,0,0,.31-2.25c-0.2-1.59-1.18-4.25-5.53-4.25l-5,0a12.65,12.65,0,0,0-.35-5.63c-0.91-2.75-2.67-4.38-4.73-4.38h0Z',transform:'translate(-643 -439)'})));};o.propTypes={color:l.string,location:l.string,renderSize:l.number};f.exports=o;}),null);
__d("XMessagingQuickCamController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/quick-cam\/",{thread_id:{type:"String",required:true},__asyncDialog:{type:"Int"}});}),null);
__d('MessengerQuickCamButton.react',['fbt','AsyncRequest','ChatConfig','Link.react','React','MessagingShowNUX.react','XMessagingQuickCamController'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l='seen_cam_button_nux';i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(n){j.constructor.call(this,n);this.$MessengerQuickCamButton2=function(){this.setState({nuxShown:true,nuxOpen:false},function(){return this.$MessengerQuickCamButton3();}.bind(this));}.bind(this);this.$MessengerQuickCamButton1=function(){if(!this.state.nuxShown){this.setState({nuxOpen:true});}else this.$MessengerQuickCamButton3();}.bind(this);this.state={nuxOpen:false,nuxShown:!!c('ChatConfig').get(l)};}m.prototype.render=function(){return c('React').createElement('div',null,c('React').createElement(c('Link.react'),{className:this.props.className,onClick:this.$MessengerQuickCamButton1,ref:'photoButton',role:'button',title:h._("Haz una foto con la c\u00e1mara r\u00e1pida")}),c('React').createElement(c('MessagingShowNUX.react'),{contextRef:function(){return this.refs.photoButton;}.bind(this),settingName:l,shown:this.state.nuxOpen,onHidden:this.$MessengerQuickCamButton2,ref:'camNUX'},h._("Env\u00eda fotos desde la c\u00e1mara del ordenador.")));};m.prototype.$MessengerQuickCamButton3=function(){var n=c('XMessagingQuickCamController').getURIBuilder().setString('thread_id',this.props.threadID).getURI();new (c('AsyncRequest'))().setMethod('GET').setURI(n).setRelativeTo(this).setReadOnly(true).send();};m.propTypes={className:k.string.isRequired,threadID:k.string.isRequired};f.exports=m;}),null);
__d('P2PAbstractSendMoneyButton.react',['cx','fbt','React','TooltipLink.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$P2PAbstractSendMoneyButton1=false,this.$P2PAbstractSendMoneyButton3=function(){this.props.onMouseDown&&this.props.onMouseDown();this.$P2PAbstractSendMoneyButton1=this.props.isActive;}.bind(this),this.$P2PAbstractSendMoneyButton2=function(r){r.stopPropagation();if(this.$P2PAbstractSendMoneyButton1){this.$P2PAbstractSendMoneyButton1=false;return;}this.props.onClick();}.bind(this),n;}l.prototype.render=function(){return c('React').createElement(c('TooltipLink.react'),{alignH:'center',className:c('joinClasses')(this.props.className,(this.props.isActive?"open":'')+(this.props.isDisabled?' '+"disabled":'')+(this.props.isActive?' '+"_10gz":'')+(this.props.isDisabled?' '+"_10g-":'')+(!this.props.isMessenger&&!this.props.className?' '+"_5uqy":'')+(this.props.isMessenger?' '+"_3ggc":'')),href:'#',onClick:this.$P2PAbstractSendMoneyButton2,onMouseDown:this.$P2PAbstractSendMoneyButton3,onMouseOver:this.props.onMouseOver,position:'above',role:'button',title:this.$P2PAbstractSendMoneyButton4()},this.getButton());};l.prototype.getButton=function(){if(this.props.button)return this.props.button;return c('React').createElement('i',{className:"_5s8l"});};l.prototype.$P2PAbstractSendMoneyButton4=function(){if(this.props.isDisabled)return null;return i._("Enviar dinero");};f.exports=l;}),null);
__d('P2PSendMoneyContainerBootloader.react',['cx','Bootloader','MessengerEnvironment','DeferredComponent.react','MercuryIDs','P2PAbstractSendMoneyButton.react','P2PActions','P2PLoadingMask.react','P2PLogger','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PSendMoneyDialogStore','React','ReactLayeredComponentMixin_DEPRECATED','XUIContextualDialog.react','emptyFunction','getPageIDFromThreadID'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('MessengerEnvironment').messengerui,k=j?282:260,l=c('React').createClass({displayName:'P2PSendMoneyContainerBootloader',propTypes:{button:i.node,className:i.string,ContextualDialog:i.func,flyoutAlignment:i.string,onTrigger:i.func,participantIDs:i.array,referrer:i.string,threadID:i.string},getInitialState:function m(){return {showPlaceholderDialog:false,shouldBootloadImmediately:c('P2PSendMoneyDialogStore').isAnyChatSendViewOpen()};},mixins:[c('ReactLayeredComponentMixin_DEPRECATED')],_clicked:false,_onComponentLoad:c('emptyFunction'),_bootloadCalled:false,_sendMoneyDialogStoreSub:null,log:function m(n,o){c('P2PLogger').log(n,babelHelpers['extends']({www_event_referrer:this.props.referrer,www_event_flow:c('P2PPaymentLoggerEventFlow').UI_FLOW_P2P_SEND},o));},componentWillMount:function m(){if(this.state.shouldBootloadImmediately){this._bootloadComponentNow();}else this._sendMoneyDialogStoreSub=c('P2PSendMoneyDialogStore').addListener('change',this.onDialogStoreChange);},componentWillUnmount:function m(){this.removeDialogStoreSub();},onDialogStoreChange:function m(){this._bootloadComponentNow();this.removeDialogStoreSub();},removeDialogStoreSub:function m(){if(this._sendMoneyDialogStoreSub){this._sendMoneyDialogStoreSub.remove();this._sendMoneyDialogStoreSub=null;}},onPlaceholderClick:function m(){var n=this.props.threadID?c('MercuryIDs').tokenize(this.props.threadID).value:null;this._handleDialogVisibility(!this.state.showPlaceholderDialog);this.log(c('P2PPaymentLoggerEvent').UI_ACTN_SEND_MONEY_BUTTON_PLACEHOLDER_CLICKED,{object_id:n});this._bootloadComponentNow();this._clicked=false;},_handleDialogVisibility:function m(n){if(!n){c('P2PActions').chatSendViewClosed({threadID:this.props.threadID});}else c('P2PActions').chatSendViewOpened({referrer:this.props.referrer,threadID:this.props.threadID});this.setState({showPlaceholderDialog:n});},renderLayers:function m(){var n={};if(this.state.showPlaceholderDialog){var o=this.props.ContextualDialog||c('XUIContextualDialog.react');n.placeholderDialog=c('React').createElement(o,{alignment:this.props.flyoutAlignment?this.props.flyoutAlignment:j?'right':'left',contextRef:function(){return this.refs.placeholderButton;}.bind(this),onBlur:function(){if(!this._clicked)this._handleDialogVisibility(false);this._clicked=false;}.bind(this),ref:'dialog',shown:true,width:k,position:'above'},c('React').createElement('div',{className:"_c_5"},c('React').createElement(c('P2PLoadingMask.react'),{visible:true})));}return n;},render:function m(){if(this._isPageChat())return null;return c('React').createElement(c('DeferredComponent.react'),babelHelpers['extends']({deferredComponent:this._bootloadComponent,deferredPlaceholder:this._renderPlaceholder()},this.props));},_renderPlaceholder:function m(){return c('React').createElement(c('P2PAbstractSendMoneyButton.react'),{button:this.props.button,className:this.props.className,isActive:false,isDisabled:false,isMessenger:j,onClick:this.onPlaceholderClick,onMouseDown:function(){this._clicked=true;}.bind(this),onMouseOver:this._bootloadComponentNow,ref:'placeholderButton'});},_bootloadComponent:function m(n){this._onComponentLoad=n.bind(this);},_bootloadComponentNow:function m(){if(this._bootloadCalled)return;this._bootloadCalled=true;c('Bootloader').loadModules(["P2PSendMoneyContainer.react"],function(n){this.removeDialogStoreSub();this._onComponentLoad(n);this.setState({showPlaceholderDialog:false});}.bind(this),'P2PSendMoneyContainerBootloader.react');},_isPageChat:function m(){return !!this._getPageID();},_getPageID:function m(){return c('getPageIDFromThreadID')(this.props.threadID);}});f.exports=l;}),null);
__d('ChatTabComposer.react',['csx','cx','fbt','ChatConfig','ChatContentSearchButton.react','ChatEmojiButton.react','ChatEventPlanButton.react','ChatInput.react','ChatPhotoUploader.react','ChatStickerButton.react','CustomColorHighlighting.react','CSS','EventRemindersGating','FantaMessageActions','Keys','MercuryConfig','MercuryIDs','MessengerBotMenuButton.react','MessengerGamesButton.react','MessengerGroupPollingButton.react','MessengerHotLikeButton.react','MessengerHotLikeChatSVGIcon.react','MessengerHotLikeUtils','MessengerQuickCamButton.react','MessengerQuickCamButtonHTML5.react','MessengerQuickCamOrigins','P2PSendMoneyContainerBootloader.react','React','MercuryShareAttachmentRenderLocations','StickersActions','clearImmediate','convertMIGColorToFIGColor','getPageIDFromThreadID','isWebGLEnabled','requireWeak','setImmediate'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=77,o=9,p=c('ChatConfig').get('chat_basic_input_module')||c('ChatInput.react'),q=null;c('requireWeak')('FantaAppStore',function(s){return q=s;});k=babelHelpers.inherits(r,c('React').PureComponent);l=k&&k.prototype;function r(){var s,t;for(var u=arguments.length,v=Array(u),w=0;w<u;w++)v[w]=arguments[w];return t=(s=l.constructor).call.apply(s,[this].concat(v)),this.state={inputHeight:0,stickerFlyoutShown:false},this.$ChatTabComposer2=null,this.$ChatTabComposer3=null,this.$ChatTabComposer9=function(x){var y=this.props.threadID;if(y)this.$ChatTabComposer1=c('setImmediate')(function(){this.$ChatTabComposer1=null;c('FantaMessageActions').composerTextUpdate(y,x);}.bind(this));}.bind(this),this.$ChatTabComposer7=function(x){if(x.keyCode===c('Keys').RETURN){this.refs.emojiButton&&this.refs.emojiButton.hideFlyout();this.$ChatTabComposer9('');}this.props.inputKeyDown&&this.props.inputKeyDown(x);}.bind(this),this.$ChatTabComposer5=function(x){var y=x.target;if(y instanceof Element&&(c('CSS').matchesSelector(y,"._1d4_")||c('CSS').matchesSelector(y,"._552h")||c('CSS').matchesSelector(y,"._552n")))this.refs.input.focus();}.bind(this),this.$ChatTabComposer8=function(x){if(this.state.stickerFlyoutShown)c('StickersActions').hideStickerFlyout();this.props.onEscape&&this.props.onEscape(x);this.$ChatTabComposer9('');}.bind(this),this.$ChatTabComposer23=function(x,y){if(x.platformFBID.toString()!==c('MercuryConfig').MessengerAppID){this.uploadURL({attribution_app_id:x.platformFBID,errorDialogParams:{body:j._("Ha habido un problema al enviar este GIF. Elige otro y vuelve a intentarlo."),title:j._("No se ha podido enviar el GIF")},external_image_url:x.source.url,preview_url:x.media.preview?x.media.preview.url:x.media.thumbnail.url,source:x.source});}else this.props.stickerButtonProps&&this.props.stickerButtonProps.onStickerSelect&&this.props.stickerButtonProps.onStickerSelect(x.resultID.toString);}.bind(this),this.$ChatTabComposer24=function(x){this.refs.input&&this.refs.input.insertEmoji&&this.refs.input.insertEmoji(x);}.bind(this),t;}r.prototype.render=function(){var s=this.props.disableInput?null:c('React').createElement('ul',{className:"_552n"},this.$ChatTabComposer4());return c('React').createElement('div',{className:"_1d4_",onClick:this.$ChatTabComposer5,role:'presentation'},this.$ChatTabComposer6(),s);};r.prototype.componentWillUnmount=function(){if(this.$ChatTabComposer1)c('clearImmediate')(this.$ChatTabComposer1);};r.prototype.resetInput=function(s){this.refs.input.resetAfterSend(s);};r.prototype.uploadURL=function(s){var t=this.$ChatTabComposer2||this.$ChatTabComposer3;if(!t)return;t.uploadURL(s);};r.prototype.isUploading=function(){return !!(this.$ChatTabComposer2&&this.$ChatTabComposer2.isUploading()||this.$ChatTabComposer3&&this.$ChatTabComposer3.isUploading());};r.prototype.getInput=function(){return this.refs.input;};r.prototype.$ChatTabComposer6=function(){var s={};if(this.state.inputHeight)s.minHeight=this.state.inputHeight;var t=null;if(this.props.showStructuredMenu)t=c('React').createElement('div',{className:"_5c6-"},c('React').createElement(c('MessengerBotMenuButton.react'),{flyoutAlignment:'left',threadID:this.props.threadID,pageID:this.props.pageID,className:"_5c6_"}));var u='',v=this.props.threadID;if(v&&q){var w=q.getState().mercury.tabContents.get(v);u=w&&w.composerText||'';}var x='';if(this.props.disableInput){x=j._("El editor est\u00e1 inhabilitado en esta conversaci\u00f3n.");}else if(this.props.thread&&!this.props.thread.is_canonical){x=j._("Escribe un mensaje, \u0040nombre...");}else x=j._("Escribe un mensaje...");return c('React').createElement('div',{className:"_552h",style:s},t,c('React').createElement('div',{className:this.props.showStructuredMenu?"_4yzj":''},c('React').createElement(c('CustomColorHighlighting.react'),{customColor:this.props.thread&&this.props.thread.custom_color},c('React').createElement(p,{defaultText:u,fileUploader:this.props.fileUploader,initializeThingsWithInputFn:this.props.initializeThingsWithInputFn,inputKeyDown:this.$ChatTabComposer7,onBeforeInput:function(){return this.refs.emojiButton&&this.refs.emojiButton.hideFlyout();}.bind(this),onBlur:this.props.onBlur,onEscape:this.$ChatTabComposer8,onFocus:this.props.onFocus,onTab:this.props.onTab,readOnly:this.props.disableInput,ref:'input',resizeFn:function(y){y=Math.min(y,n);this.setState({inputHeight:y});this.props.resizeFn&&this.props.resizeFn(y);}.bind(this),thread:this.props.thread,threadID:this.props.threadID,onTextChange:this.$ChatTabComposer9,uploadPhotoFn:function(y){this.$ChatTabComposer3&&this.$ChatTabComposer3.uploadFiles([].concat(y));}.bind(this),participants:this.props.participants,placeholder:x,viewer:this.props.viewer}))));};r.prototype.$ChatTabComposer4=function(){var s=[this.$ChatTabComposer10(),this.$ChatTabComposer11(),this.$ChatTabComposer12(),this.$ChatTabComposer13(),this.$ChatTabComposer14(),this.$ChatTabComposer15(),this.$ChatTabComposer16(),this.$ChatTabComposer17(),this.$ChatTabComposer18()],t=s.filter(Boolean),u=this.$ChatTabComposer19();if(u&&t.length<o)t.push(u);var v=this.$ChatTabComposer20();if(v&&t.length<o&&c('EventRemindersGating').shouldShowComposer)t.push(v);return t;};r.prototype.$ChatTabComposer10=function(){var s=this.props.photoUploaderProps||{};return c('React').createElement('li',{className:"_13f-",key:'photos'},c('React').createElement(c('ChatPhotoUploader.react'),babelHelpers['extends']({onMount:function(t){return this.$ChatTabComposer3=t;}.bind(this)},s)));};r.prototype.$ChatTabComposer19=function(){var s=c('convertMIGColorToFIGColor')(this.props.thread&&this.props.thread.custom_color),t=this.$ChatTabComposer21();if(t&&this.props.thread&&!this.props.thread.is_canonical)return c('React').createElement('li',{className:"_6gd _13f_",key:'group_polling'},c('React').createElement(c('MessengerGroupPollingButton.react'),{customColor:s,threadFBID:t}));return null;};r.prototype.$ChatTabComposer16=function(){var s=c('MercuryConfig').MessengerGamesGK&&c('isWebGLEnabled')(),t=this.$ChatTabComposer21();return s&&t&&!this.$ChatTabComposer22()?c('React').createElement('li',{className:"_6gd _13ga",key:'games'},c('React').createElement(c('MessengerGamesButton.react'),{threadFBID:t})):null;};r.prototype.$ChatTabComposer20=function(){return this.props.threadID&&!this.$ChatTabComposer22()?c('React').createElement('li',{className:"_6gd _13gb",key:'eventPlan'},c('React').createElement(c('ChatEventPlanButton.react'),{threadID:this.props.threadID})):null;};r.prototype.$ChatTabComposer15=function(){if(this.props.disableFileUploads)return null;var s=this.props.fileUploaderProps||{};return c('React').createElement('li',{className:"_13gd",key:'files'},c('React').createElement(c('ChatPhotoUploader.react'),babelHelpers['extends']({onMount:function(t){return this.$ChatTabComposer2=t;}.bind(this)},s)));};r.prototype.$ChatTabComposer11=function(){var s=this.props.stickerButtonProps;if(!s)return null;return c('React').createElement('li',{className:"_6gd _13ge",key:'stickers'},c('React').createElement(c('ChatStickerButton.react'),babelHelpers['extends']({},s,{onFlyoutShown:function(){this.refs.input.focus();this.setState({stickerFlyoutShown:true});}.bind(this),onFlyoutHidden:function(){this.setState({stickerFlyoutShown:false});}.bind(this)})));};r.prototype.$ChatTabComposer12=function(){return c('React').createElement('li',{className:"_6gd _13gf",key:'contentsearch'},c('React').createElement(c('ChatContentSearchButton.react'),{className:"_6gb _6gs",getQuery:function(){return this.refs.input.getValue();}.bind(this),onSelect:this.$ChatTabComposer23}));};r.prototype.$ChatTabComposer13=function(){if(!c('ChatConfig').get('www_messenger_emoji_picker'))return null;return c('React').createElement('li',{className:"_6gd _13gg",key:'emojipicker'},c('React').createElement(c('ChatEmojiButton.react'),{className:"_6gb _3oxr",flyoutAlignment:'right',fromChatTab:true,getInput:function(){return this.refs.input;}.bind(this),onSelect:this.$ChatTabComposer24,ref:'emojiButton',sendCustomEmoji:this.props.onCustomLikeSelect,threadID:this.props.threadID}));};r.prototype.$ChatTabComposer18=function(){if(!c('ChatConfig').get('hotlike'))return null;var s=this.props.thread,t=c('convertMIGColorToFIGColor')(s&&s.custom_color)||'',u=c('MessengerHotLikeChatSVGIcon.react'),v="_6gb";return c('React').createElement('li',{className:"_6gd _5ep3 _13gi",key:'like'},c('React').createElement(c('MessengerHotLikeButton.react'),{className:v,customColor:t,customLike:c('MessengerHotLikeUtils').getCustomEmojiFromThread(s)||undefined,CustomRenderer:u,location:c('MercuryShareAttachmentRenderLocations').CHAT,renderSize:16,sendSticker:this.props.stickerButtonProps&&this.props.stickerButtonProps.onStickerSelect,sendCustomLike:this.props.onCustomLikeSelect,threadID:this.props.threadID}));};r.prototype.$ChatTabComposer14=function(){if(!this.props.p2pProps||!this.props.showP2PButton||this.$ChatTabComposer22())return null;var s=this.props.p2pProps;s.threadID=this.props.threadID;if(this.props.participantIDs&&this.props.participantIDs.length)s.participantIDs=this.props.participantIDs;return c('React').createElement('li',{className:"_6gd _13gj",key:'p2p'},c('React').createElement(c('P2PSendMoneyContainerBootloader.react'),s));};r.prototype.$ChatTabComposer17=function(){if(c('MercuryIDs').isLocalThread(this.props.threadID)||!c('ChatConfig').get('messenger_www_quickcam'))return null;var s=c('React').createElement(c('MessengerQuickCamButton.react'),{className:"_6gb _5yhk",threadID:this.props.threadID});if(c('ChatConfig').get('messenger_www_html5_quickcam'))s=c('React').createElement(c('MessengerQuickCamButtonHTML5.react'),babelHelpers['extends']({location:c('MessengerQuickCamOrigins').CHAT_TAB,viewer:this.props.viewer},s.props));return c('React').createElement('li',{className:"_6gd _13gk",key:'quickcam'},s);};r.prototype.$ChatTabComposer22=function(){return !!this.$ChatTabComposer25();};r.prototype.$ChatTabComposer25=function(){return c('getPageIDFromThreadID')(this.props.threadID);};r.prototype.$ChatTabComposer21=function(){if(this.props.threadID&&!c('MercuryIDs').isLocalThread(this.props.threadID))return c('MercuryIDs').getThreadFBIDFromThreadID(this.props.threadID);if(this.props.thread&&this.props.thread.thread_fbid)return this.props.thread.thread_fbid;return null;};r.prototype.replyToMention=function(s){this.refs.input&&this.refs.input.addMention&&this.refs.input.addMention(s);};r.propTypes={disableInput:m.bool.isRequired,disableFileUploads:m.bool,fileUploaderProps:m.object,initializeThingsWithInputFn:m.func,inputKeyDown:m.func,onBlur:m.func,onCustomLikeSelect:m.func,onEmojiSelect:m.func,onEscape:m.func,onFocus:m.func,onTab:m.func,p2pProps:m.object,pageID:m.string,participantIDs:m.arrayOf(m.string),photoUploaderProps:m.object,resizeFn:m.func,showP2PButton:m.bool,showStructuredMenu:m.bool.isRequired,stickerButtonProps:m.object,thread:m.object,threadID:m.string,uploadPhotoFn:m.func,viewer:m.string};f.exports=r;}),null);
__d('ChatTabComposerContainer.react',['cx','fbt','Arbiter','Bootloader','ChatTabComposer.react','MercuryConfig','MercuryIDs','MercuryThreads','MercuryMessageActions','MessengerBotMenuDataFetcher','MercuryParticipants','MNCommercePageSetting','P2PGKValues','ReactComponentWithPureRenderMixin','React','MercuryShareAttachmentRenderLocations','SearchableEntry','SimpleXUIDialog','StoreAndPropBasedStateMixin','getPageIDFromThreadID','getThreadTypeNameFromThreadType','setImmediate'],(function a(b,c,d,e,f,g,h,i){'use strict';var j='right',k=c('React').PropTypes,l=c('React').createClass({displayName:'ChatTabComposerContainer',_arbiterToken:null,mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MercuryThreads'),c('MercuryParticipants'))],propTypes:{disableInput:k.bool.isRequired,fileUploader:k.object,threadID:k.string,viewer:k.string.isRequired,onFileUploadFail:k.func,onPhotoUploadFail:k.func,onStickerSelect:k.func,onUploadCancel:k.func,onUploadComplete:k.func,onUploadSubmit:k.func},statics:{calculateState:function m(n){var o=c('MercuryThreads').getForFBID(n.viewer),p=n.threadID?o.getOrFetch(n.threadID):null,q=c('P2PGKValues').P2PVisible&&n.viewer!==c('MercuryIDs').getUserIDFromThreadID(n.threadID),r=c('getPageIDFromThreadID')(n.threadID),s=r===null||r===undefined?false:c('MessengerBotMenuDataFetcher').getHasPageSetting(r,function(){},function(){},c('MNCommercePageSetting').STRUCTURED_MENU_ENABLED),t=p&&p.participants?p.participants.map(c('MercuryParticipants').getOrFetch,c('MercuryParticipants')):[];return {thread:p,participants:t,showP2PButton:q,pageID:r,showStructuredMenu:s};}},componentDidMount:function m(){this.props.onMount(this);if(c('MercuryConfig').MentionsReplyEvent)this._arbiterToken=c('Arbiter').subscribe(c('MercuryConfig').MentionsReplyEvent,this._handleReplyToMention);if(this.state.pageID)c('MessengerBotMenuDataFetcher').getHasPageSetting(this.state.pageID,function(n){this.setState({showStructuredMenu:n});}.bind(this),function(){this.setState({showStructuredMenu:false});}.bind(this),c('MNCommercePageSetting').STRUCTURED_MENU_ENABLED);},componentWillReceiveProps:function m(n){if(n.threadID!==this.props.threadID)this.setState({participantIDs:[],participants:[]});},componentWillUnmount:function m(){if(this._arbiterToken)c('Arbiter').unsubscribe(this._arbiterToken);},render:function m(){return c('React').createElement(c('ChatTabComposer.react'),babelHelpers['extends']({fileUploader:this.props.fileUploader,fileUploaderProps:this._getFileUploaderProps(),ref:'composer',thread:this.state.thread},this.props,{disableInput:this.props.disableInput,p2pProps:this._getP2PProps(),pageID:this.state.pageID,participantIDs:this.state.participantIDs,participants:this.state.participants,photoUploaderProps:this._getPhotoUploaderProps(),showP2PButton:this.state.showP2PButton,showStructuredMenu:this.state.showStructuredMenu,stickerButtonProps:this._getStickerButtonProps()}));},onSend:function m(n){var o,p=this;if(n&&n.profile_ranges&&n.profile_ranges.length)(function(){var q=n,r=p.state,s=r.thread,t=r.participants;c('Bootloader').loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(u,v){new u().setEvent(v.MENTION).setGroupSize(t&&t.length).setNumDelivered((q.profile_ranges||[]).length).setThreadid(s&&s.thread_id).setThreadType(c('getThreadTypeNameFromThreadType')(s&&s.thread_type)).setOfflineThreadid(q.offline_threading_id).log();},'ChatTabComposerContainer.react');})();this.refs.composer.resetInput(n);},setParticipantIDs:function m(n){n=n||[];this.setState({participantIDs:n});},getInput:function m(){return this.refs.composer.getInput();},isUploading:function m(){return this.refs.composer.isUploading();},_getP2PProps:function m(){if(!this.state.showP2PButton)return {};return {button:c('React').createElement('i',{className:"hidden_elem"}),className:"_6ga _6gb",flyoutAlignment:j,referrer:c('MercuryShareAttachmentRenderLocations').CHAT,threadID:this.props.threadID,onTrigger:this.props.onP2PTrigger};},_getStickerButtonProps:function m(){var n={className:"_6gb _6gf",flyoutAlignment:j,threadID:this.props.threadID,onStickerSelect:this.props.onStickerSelect};return n;},_getPhotoUploaderProps:function m(){var n={className:"_6gd",customUI:true,imageClassName:"hidden_elem",linkClassName:"_6gb _6ge",threadID:this.props.threadID,onLastUploadCancel:this._handleUploadCancel,onAllUploadsComplete:this._handleUploadComplete,onLastUploadFail:this._handlePhotoUploadFail,onUploadError:this._handleUploadError,onSubmit:this._handleUploadSubmit};return n;},_getFileUploaderProps:function m(){var n=this._getPhotoUploaderProps();n.linkClassName="_6gb _6gg";n.imagesOnly=false;n.onLastUploadFail=this._handleFileUploadFail;return n;},_handleUploadComplete:function m(n,o){c('MercuryMessageActions').getForFBID(this.props.viewer).confirmAttachmentPlaceholder(o.upload_id,o);this.props.onUploadComplete&&this.props.onUploadComplete(o);},_handleUploadError:function m(n){var o=void 0,p=void 0;switch(n.error){case 'size-exceeded':o=i._("El archivo que has seleccionado es demasiado grande");p=i._("El archivo que has seleccionado es demasiado grande. El tama\u00f1o m\u00e1ximo es de 25 MB.");break;default:o=i._("Error al subir el archivo");p=i._("Ha habido un problema al subir el archivo.");}this._showErrorDialog(o,p);this.props.onFileUploadFail&&this.props.onFileUploadFail(n);},_handleUploadCancel:function m(n,o){c('MercuryMessageActions').getForFBID(this.props.viewer).cancelAttachmentPlaceholder(o.upload_id,o);this.props.onUploadCancel&&this.props.onUploadCancel(o);},_handleFileUploadFail:function m(n,o){c('MercuryMessageActions').getForFBID(this.props.viewer).cancelAttachmentPlaceholder(o.upload_id,o);var p=i._("Error al subir el archivo"),q=i._("Ha habido un problema al subir el archivo.");if(o.errorDialogParams){p=o.errorDialogParams.title||p;q=o.errorDialogParams.body||q;}this._showErrorDialog(p,q);this.props.onFileUploadFail&&this.props.onFileUploadFail(o);},_handlePhotoUploadFail:function m(n,o){c('MercuryMessageActions').getForFBID(this.props.viewer).cancelAttachmentPlaceholder(o.upload_id,o);var p=i._("Error al subir la foto"),q=i._("Vuelve a intentarlo. Aseg\u00farate de subir una foto v\u00e1lida.");if(o.errorDialogParams){p=o.errorDialogParams.title||p;q=o.errorDialogParams.body||q;}this._showErrorDialog(p,q);this.props.onPhotoUploadFail&&this.props.onPhotoUploadFail(o);},_handleUploadSubmit:function m(n,o){this.props.onUploadSubmit&&this.props.onUploadSubmit(o);},_showErrorDialog:function m(n,o){c('SimpleXUIDialog').show(o,n);},_handleReplyToMention:function m(n,event){if(event.threadID===this.props.threadID)c('MercuryParticipants').get(event.participantID,function(o){if(!o||!this.refs.composer)return;var p=new (c('SearchableEntry'))({uniqueID:o.fbid,title:'@'+o.name});c('setImmediate')(function(){this.refs.composer.getInput().focus();this.refs.composer.replyToMention&&this.refs.composer.replyToMention(p);}.bind(this));}.bind(this));}});f.exports=l;}),null);
__d('ChatTitleLink.react',['cx','ChatEditParticipantsUtils','Link.react','MercuryThreads','MercuryThreadTitle.react','MessengerAdminGroupUtils','React','TrackingNodes','UserAgent','goURI'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('MercuryThreads').get(),j=c('React').PropTypes,k=c('React').createClass({displayName:'ChatTitleLink',propTypes:{href:j.string,thread:j.object,viewer:j.string},getDefaultProps:function m(){return {href:null};},getTitle:function m(){return this.refs.threadTitle.getTitle();},render:function m(){if(!this.props.thread)return null;var n=this.props,o=n.href,p=n.thread,q=n.viewer,r=babelHelpers.objectWithoutProperties(n,['href','thread','viewer']);return c('React').createElement(l,babelHelpers['extends']({className:"titlebarText"+(c('UserAgent').isBrowser('Chrome')&&!c('UserAgent').isPlatform('Windows')?' '+"fixemoji":'')+(o===null?' '+"noLink":''),'data-ft':c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.TITLE),'data-hover':'tooltip',onClick:function(s){return this._handleClick(s);}.bind(this),href:o},r),c('React').createElement(c('MercuryThreadTitle.react'),{ref:'threadTitle',isNewThread:i.isNewEmptyLocalThread(p.thread_id),thread:p,useAndSeparator:true,useShortName:!p.is_canonical,viewer:q}));},_handleClick:function m(n){var o=this.props,p=o.href,q=o.thread;if(!p)return;if(q&&q.associated_object){c('goURI')(p);}else if(c('MessengerAdminGroupUtils').showParticipantsModal(q.is_canonical,i.isEmptyLocalThread(q.thread_id),q)){c('ChatEditParticipantsUtils').showParticipantsModal(q.thread_id);n.preventDefault();}}}),l=function m(n){return n.href?c('React').createElement(c('Link.react'),n):c('React').createElement('span',n);};f.exports=k;}),null);
__d('ChatTabHeader.react',['cx','fbt','Promise','AutoFocusableLink.react','Bootloader','BootloadOnRender.react','MercuryBootloadOnInteraction.react','ChatCloseButton.react','ChatConfig','ChatTitleLink.react','EventPlanExperiment','EventReminderStateStore','JSResource','LayerFadeOnHide','LazyComponent.react','LoadOnRender.react','MercuryThreadInfo','MercuryTypingAnimation.react','MessengerAdminGroupUtils','MessengerJoinableModeType','React','SimpleNUXMessage','TooltipData','XUIAmbientNUX.react','emptyFunction','requireWeak'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m='118809038721180',n=function p(q){c('Bootloader').loadModules(["archiveWarningReact"],function(r){var s=r.jsComponent;return q(s);},'ChatTabHeader.react');};j=babelHelpers.inherits(o,c('React').PureComponent);k=j&&j.prototype;function o(p){k.constructor.call(this,p);this.$ChatTabHeader1=false;this.$ChatTabHeader6=function(){for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];this.props.onClick.apply(null,r);}.bind(this);this.$ChatTabHeader15=function(){return this.refs.menu;}.bind(this);this.$ChatTabHeader16=function(){c('SimpleNUXMessage').markMessageSeenByUser(m);this.setState({eventPlanNuxSeen:true});}.bind(this);this.state={eventPlanNuxSeen:c('SimpleNUXMessage').hasUserSeenMessage(m)};this.$ChatTabHeader2=new (c('Promise'))(function(q,r){this.$ChatTabHeader3=q;}.bind(this));this.$ChatTabHeader4=c('JSResource')('ChatTabMenu.react').__setRef('ChatTabHeader.react');}o.prototype.componentDidMount=function(){this.$ChatTabHeader1=true;c('requireWeak')('ChatVideoCallButton.react',function(p){if(this.$ChatTabHeader1)this.setState({RTCComponent:p});}.bind(this));if(this.props.isMuted)this.getMenu();};o.prototype.componentWillUnmount=function(){this.$ChatTabHeader1=false;};o.prototype.render=function(){var p=this.$ChatTabHeader5(),q=this.props.isRaised;return c('React').createElement('div',{className:"_15p4"+(!this.props.isRaised?' '+"_15p5":'')+(q||!p?' '+"_2pis":''),onMouseUp:this.$ChatTabHeader6,onKeyDown:this.props.onKeyDown,ref:'root',role:'presentation'},c('React').createElement('div',{'aria-level':'2',className:"titlebarTextWrapper _15p6",role:'heading'},c('React').createElement('div',{role:q?'presentation':'button',tabIndex:q?-1:0},p,this.$ChatTabHeader7()),this.props.isTyping&&!this.props.isRaised?c('React').createElement(c('MercuryTypingAnimation.react'),{className:"_15p8",color:'dark'}):null),c('React').createElement('ul',{className:"_32ca"},this.$ChatTabHeader8(),c('React').createElement('li',{className:"_32cb"},c('React').createElement(c('ChatCloseButton.react'),{active:this.props.isActive,className:"_3olu _3olv",onClick:this.props.onCloseClick,onKeyUp:this.props.onCloseKeyUp,onMouseDown:this.props.onCloseMouseDown}))));};o.prototype.focus=function(){this.refs.root&&this.refs.root.focus();};o.prototype.getMenu=function(){this.$ChatTabHeader4.load().done(function(p){return this.$ChatTabHeader1&&this.setState({MenuComponent:p});}.bind(this));return this.$ChatTabHeader2;};o.prototype.$ChatTabHeader8=function(){if(!this.props.isRaised)return null;var p=[this.$ChatTabHeader9(),this.$ChatTabHeader10(),this.$ChatTabHeader11(),this.$ChatTabHeader12(),this.$ChatTabHeader13()];return p.filter(Boolean);};o.prototype.$ChatTabHeader12=function(){return this.$ChatTabHeader14({isAudio:true});};o.prototype.$ChatTabHeader11=function(){return this.$ChatTabHeader14({isAudio:false});};o.prototype.$ChatTabHeader14=function(p){if(this.props.isEmptyChat)return null;var q=this.props,r=q.isGroupChat,s=q.onRTCNuxCloseButtonClick,t=q.rtcNuxShown,u=q.thread,v=q.threadID,w=q.viewer;if(r){if(!u||u.participants.length<=1||!c('MercuryThreadInfo').canReply(u))return null;if(u.joinable_mode&&u.joinable_mode.mode===c('MessengerJoinableModeType').JOINABLE)return null;if(p.isAudio){if(!c('ChatConfig').get('rtc_conferencing_www'))return null;}else if(!c('ChatConfig').get('rtc_conferencing_www_video'))return null;}var x=babelHelpers['extends']({isGroupChat:r,onRTCNuxCloseButtonClick:s,rtcCallData:u&&u.rtc_call_data,rtcNuxShown:t&&p.isAudio,threadID:v,viewer:w},p);x.className="_3olv"+(x.isAudio?' '+"_2fpc":'')+(!x.isAudio?' '+"_2fpd":'');var y=this.state.RTCComponent;return c('React').createElement('li',{className:"_3a61"+(x.isAudio?' '+"_461a":'')+(!x.isAudio?' '+"_461b":''),key:'rtc'+(x.isAudio?'audio':'video')},y?c('React').createElement(y,x):c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),x),loader:c('JSResource')('ChatVideoCallButton.react').__setRef('ChatTabHeader.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:x.className,role:'button'})}));};o.prototype.$ChatTabHeader13=function(){if(this.props.isEmptyChat)return null;var p=babelHelpers['extends']({attachmentsShelf:this.props.attachmentsShelf,isGroupChat:this.props.isGroupChat,isEmptyChat:this.props.isEmptyChat,isMuted:this.props.isMuted,nameConversationFunc:this.props.nameConversationFunc,otherUserID:this.props.otherUserID,showAddFriend:this.props.showAddFriend,sheetController:this.props.sheetController,threadID:this.props.threadID,onSubmit:this.props.onFileUploaderSubmit,onFileUploaderMounted:this.props.onFileUploaderMounted,onMount:this.$ChatTabHeader3,onUpdateAttachmentsShelf:this.props.onUpdateAttachmentsShelf,onUploadFinished:this.props.onUploadFinished},this.props.additionalMenuProps);p.className="_3olv _1ll-";var q=i._("Opciones"),r=this.state.MenuComponent,s=false;if(this.props.threadID){var t=c('EventReminderStateStore').getEvent(this.props.threadID);s=t&&!t.exists&&!this.state.eventPlanNuxSeen&&c('EventPlanExperiment').shouldShowEntryPointNuxWithExposure();}return c('React').createElement('div',null,c('React').createElement('li',{className:"_3a61 _461_",key:'menu',ref:'menu'},r?c('React').createElement(r,p):c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),p),loader:c('JSResource')('ChatTabMenu.react').__setRef('ChatTabHeader.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:p.className,'aria-label':q,role:'button'})})),c('React').createElement(c('XUIAmbientNUX.react'),{alignment:'right',behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},contextRef:this.$ChatTabHeader15,onCloseButtonClick:this.$ChatTabHeader16,shown:s,width:'auto'},i._("To start a new plan, click Start Plan.")));};o.prototype.$ChatTabHeader10=function(){if(this.props.isPageChat||this.props.isEmptyChat)return null;var p={className:"_3olv _3jyj",isFBAtWork:this.props.isWorkUser,shouldAddToApprovalQueue:c('MessengerAdminGroupUtils').shouldAddToApprovalQueue(this.props.thread,this.props.viewer),shown:true,onClick:function(){return this.props.sheetController.openAddFriendsSheet();}.bind(this)},q=i._("A\u00f1adir");return c('React').createElement('li',{className:"_3a61 _4620",key:'add'},c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),p),loader:c('JSResource')('ChatAddToThreadButton.react').__setRef('ChatTabHeader.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{'aria-label':q,className:p.className,role:'button'})}));};o.prototype.$ChatTabHeader9=function(){if(!this.props.isViewerEmployee)return null;var p=this.props.participants,q=p?p.length>0&&p.every(function(r){return !!(r&&r.employee);}):false;if(!q)return null;return c('React').createElement('li',{key:'archiveWarning'},c('React').createElement(c('LoadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{isFBAtWork:this.props.isWorkUser,shown:true}),loader:n,placeholder:c('React').createElement('div',null)}));};o.prototype.$ChatTabHeader17=function(){return c('React').createElement('span',{className:"_3a61"+(!this.props.isRaised?' '+"_3-99":'')},c('React').createElement('span',{className:"_3olv _2nlt"}));};o.prototype.$ChatTabHeader7=function(){return c('React').createElement(c('ChatTitleLink.react'),babelHelpers['extends']({href:this.props.isRaised?this.props.href:undefined,thread:this.props.thread,viewer:this.props.viewer},c('TooltipData').propsFor(this.props.tooltip,'above')));};o.prototype.$ChatTabHeader5=function(){var p=this.props,q=p.isRaised,r=p.thread;if(!q&&r&&r.unread_count>0)return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:"_3-8_ _3-99",count:r.unread_count,type:'special'}),loader:c('JSResource')('XUIBadge.react').__setRef('ChatTabHeader.react'),placeholder:c('React').createElement('span',null)});return this.$ChatTabHeader17();};o.propTypes={additionalMenuProps:l.object,attachmentsShelf:l.object.isRequired,href:l.string,isActive:l.bool.isRequired,isEmptyChat:l.bool,isGroupChat:l.bool,isMuted:l.bool,isPageChat:l.bool,isRaised:l.bool,isTyping:l.bool,isViewerEmployee:l.bool,isWorkUser:l.bool,nameConversationFunc:l.func.isRequired,otherUserID:l.string,participants:l.arrayOf(l.object),rtcNuxShown:l.bool.isRequired,sheetController:l.object.isRequired,showAddFriend:l.func.isRequired,thread:l.object,threadID:l.string,tooltip:l.string,viewer:l.string.isRequired,onClick:l.func.isRequired,onCloseClick:l.func.isRequired,onCloseKeyUp:l.func.isRequired,onCloseMouseDown:l.func.isRequired,onFileUploaderMounted:l.func.isRequired,onFileUploaderSubmit:l.func.isRequired,onKeyDown:l.func.isRequired,onRTCNuxCloseButtonClick:l.func.isRequired,onUpdateAttachmentsShelf:l.func.isRequired,onUploadFinished:l.func.isRequired};f.exports=o;}),null);
__d('getGroupNameTooltipFromParticipantIDs',['fbt','MercuryParticipants','MercuryViewer'],(function a(b,c,d,e,f,g,h){'use strict';var i=10,j='\n';function k(m,n){var o=[],p=c('MercuryViewer').getID();m=m&&m.filter(function(s){return s!==p;});if(!m||!m.length){n(null);return;}var q=m.length,r=q-i;if(r>1)m=m.slice(0,i);c('MercuryParticipants').getMulti(m,function(s){for(var t in s){var u=s[t];o.push(u.name);}if(r>1){var v=h._("y {number of hidden chat participants} m\u00e1s.",[h.param('number of hidden chat participants',r)]);o.push(v);}n(o.join(j));});}function l(m){var n=[],o=c('MercuryViewer').getID();m=m&&m.filter(function(r){return r!==o;});if(!m||!m.length)return null;n=m.map(function(r){var s=c('MercuryParticipants').getOrFetch(r);return s&&s.name;}).filter(function(r){return !!r;});var p=m.length-(m.length-n.length)-i;if(p>1){n=n.slice(0,i);var q=h._("y {number of hidden chat participants} m\u00e1s.",[h.param('number of hidden chat participants',p)]);n.push(q);}return n.join(j);}f.exports={getGroupNameTooltipFromParticipantIDs:l,getGroupNameTooltipFromParticipantIDsAsync:k};}),null);
__d('getTitleHrefFromThreadID',['MercuryIDs','MercuryParticipants','WebMessengerThreadPermalinks'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=c('MercuryIDs').getUserIDFromThreadID(i);if(k){c('MercuryParticipants').get(c('MercuryIDs').getParticipantIDFromUserID(k),function(l){if(l.href){j(l.href);}else j(c('WebMessengerThreadPermalinks').getThreadURIFromUserID(k));});}else c('WebMessengerThreadPermalinks').getThreadURI(i,j);}f.exports=h;}),null);
__d('ChatTabHeaderContainer.react',['ChatTabHeader.react','CurrentUser','MercuryIDs','MercuryParticipants','MercuryThreads','MercuryThreadInfo','React','SubscriptionsHandler','WorkModeConfig','getPageIDFromThreadID','getGroupNameTooltipFromParticipantIDs','getTitleHrefFromThreadID'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('getGroupNameTooltipFromParticipantIDs').getGroupNameTooltipFromParticipantIDs,k=c('React').PropTypes;h=babelHelpers.inherits(l,c('React').PureComponent);i=h&&h.prototype;function l(m){i.constructor.call(this,m);this.$ChatTabHeaderContainer1=new (c('SubscriptionsHandler'))();this.state=this.calculateState(m);}l.prototype.calculateState=function(m){var n=false,o=true,p=false,q=void 0,r=void 0,s=void 0,t=void 0,u=void 0;if(m.threadID){var v=c('MercuryThreads').getForFBID(m.viewer);t=v.getOrFetch(m.threadID);n=c('MercuryIDs').isGroupChat(m.threadID);o=v.isNewEmptyLocalThread(m.threadID);p=!!t&&c('MercuryThreadInfo').isMuted(t);q=c('MercuryIDs').getUserIDFromThreadID(m.threadID);r=c('getPageIDFromThreadID')(m.threadID);if(t){s=t.participants.map(c('MercuryParticipants').getOrFetch,c('MercuryParticipants'));u=j(t.participants);}}var w=this.state&&this.state.additionalMenuProps||{};if(m)w=babelHelpers['extends']({},w,m.additionalMenuProps);return {additionalMenuProps:w,isEmptyChat:o,isGroupChat:n,isMuted:p,otherUserID:q,pageID:r,participants:s,thread:t,tooltip:u};};l.prototype.componentWillMount=function(){this.$ChatTabHeaderContainer1.addSubscriptions(c('MercuryThreads').addListener('change',function(){this.setState(this.calculateState(this.props));}.bind(this)),c('MercuryParticipants').addListener('change',function(){this.setState(this.calculateState(this.props));}.bind(this)));};l.prototype.componentDidMount=function(){this.$ChatTabHeaderContainer2();this.props.onMount&&this.props.onMount(this);};l.prototype.componentWillReceiveProps=function(m){if(m.threadID!==this.props.threadID)this.$ChatTabHeaderContainer2();this.setState(this.calculateState(m));};l.prototype.componentWillUnmount=function(){this.$ChatTabHeaderContainer1.release();};l.prototype.render=function(){return c('React').createElement(c('ChatTabHeader.react'),{additionalMenuProps:this.state.additionalMenuProps,attachmentsShelf:this.props.attachmentsShelf,href:this.state.href,isActive:this.props.isActive,isEmptyChat:this.state.isEmptyChat,isGroupChat:this.state.isGroupChat,isMuted:this.state.isMuted,isPageChat:!!this.state.pageID,isRaised:this.props.isRaised,isTyping:this.props.isTyping,isViewerEmployee:c('CurrentUser').isEmployee(),isWorkUser:c('WorkModeConfig').is_work_user,nameConversationFunc:this.props.nameConversationFunc,otherUserID:this.state.otherUserID,participants:this.state.participants,rtcNuxShown:this.props.rtcNuxShown,sheetController:this.props.sheetController,showAddFriend:this.props.showAddFriend,ref:'header',thread:this.state.thread,threadID:this.props.threadID,tooltip:this.state.tooltip,viewer:this.props.viewer,onClick:this.props.onClick,onCloseClick:this.props.onCloseClick,onCloseKeyUp:this.props.onCloseKeyUp,onCloseMouseDown:this.props.onCloseMouseDown,onFileUploaderMounted:this.props.onFileUploaderMounted,onFileUploaderSubmit:this.props.onFileUploaderSubmit,onKeyDown:this.props.onKeyDown,onRTCNuxCloseButtonClick:this.props.onRTCNuxCloseButtonClick,onUpdateAttachmentsShelf:this.props.onUpdateAttachmentsShelf,onUploadFinished:this.props.onUploadFinished});};l.prototype.focus=function(){this.refs.header.focus();};l.prototype.setAdditionalMenuProps=function(m){var n=babelHelpers['extends']({},this.state.additionalMenuProps,m);this.setState({additionalMenuProps:n});};l.prototype.getMenu=function(){return this.refs.header.getMenu();};l.prototype.$ChatTabHeaderContainer2=function(){c('getTitleHrefFromThreadID')(this.props.threadID,function(m){return this.setState({href:m});}.bind(this));};l.propTypes={additionalMenuProps:k.object,attachmentsShelf:k.object.isRequired,isActive:k.bool.isRequired,isRaised:k.bool,isTyping:k.bool,nameConversationFunc:k.func.isRequired,rtcNuxShown:k.bool.isRequired,sheetController:k.object.isRequired,showAddFriend:k.func.isRequired,threadID:k.string,viewer:k.string.isRequired,onClick:k.func.isRequired,onCloseClick:k.func.isRequired,onCloseKeyUp:k.func.isRequired,onCloseMouseDown:k.func.isRequired,onFileUploaderMounted:k.func.isRequired,onFileUploaderSubmit:k.func.isRequired,onKeyDown:k.func.isRequired,onMount:k.func,onRTCNuxCloseButtonClick:k.func.isRequired,onUpdateAttachmentsShelf:k.func.isRequired,onUploadFinished:k.func.isRequired};f.exports=l;}),null);
__d('FantaReducersCookie',['FantaMessageActions','FantaTabActions'],(function a(b,c,d,e,f,g){'use strict';var h=c('FantaMessageActions').Types,i=c('FantaTabActions').Types;function j(m,n){switch(n.type){case h.RECEIVED_NEW_MESSAGE:case i.BLUR_TAB:case i.CLOSE_ALL_TABS:case i.CLOSE_AND_TAB_NEXT:case i.CLOSE_TAB:case i.DELETE_TAB:case i.FOCUS_TAB:case i.MINIMIZE_ALL_TABS:case i.MINIMIZE_TAB:case i.OPEN_TAB:case i.OPEN_TAB_WITH_INTERSTITIAL_DATA:case i.REPLACE_TAB:case i.UNMINIMIZE_TAB:return l(m);}return m;}function k(m,n){switch(n.type){case i.LOAD_FROM_DATA:return m.mergeIn(['tabGroup'],{updatedTime:n.tabData.updatedTime});}return m;}function l(m){return m.mergeIn(['tabGroup'],{updatedTime:Date.now()});}f.exports={updateCookie:j,loadFromData:k};}),null);
__d('FantaReducersDockCalculator',['Arbiter','FantaTabActions','FantaMessageActions','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h=c('FantaTabActions').Types,i=c('FantaMessageActions').Types,j=null;function k(n){j=n;c('setImmediate')(function(){c('Arbiter').inform('FantaReducersDockCalculator/shouldRecalculate');});}function l(n){if(!j||n.size!==j.size){k(n);}else{var o=false;n.forEach(function(p){var q=j&&j.get(p.id);if(!q||p.isMinimized!==q.isMinimized)o=true;});if(o)k(n);}}function m(n,o){var p=n.tabGroup.tabs;switch(o.type){case h.CLOSE_ALL_TABS:case h.CLOSE_AND_TAB_NEXT:case h.CLOSE_TAB:case h.DELETE_TAB:case h.MINIMIZE_ALL_TABS:case h.MINIMIZE_TAB:case h.OPEN_TAB:case h.OPEN_TAB_WITH_INTERSTITIAL_DATA:case h.UNMINIMIZE_TAB:k(p);break;case h.LOAD_FROM_DATA:case i.RECEIVED_NEW_MESSAGE:l(p);break;}return n;}f.exports={recalculateDock:m};}),null);
__d('FantaAvailableStatus',['AvailableListConstants','ChatVisibility','MercuryIDs','PresenceStatus','ShortProfiles'],(function a(b,c,d,e,f,g){'use strict';f.exports={isAvailable:function h(i,j){var k=void 0,l=this.getStatus(i,j),m=c('MercuryIDs').getUserIDFromThreadID(j);if(m)k=c('ShortProfiles').getNow(m);return l===c('AvailableListConstants').ACTIVE&&(k===undefined||k===null||!k.is_messenger_only);},getStatus:function h(i,j){var k=c('AvailableListConstants').OFFLINE,l=c('MercuryIDs').getUserIDFromThreadID(j);if(l){k=c('PresenceStatus').get(l);}else if(i){var m=i.participants.map(function(n){return c('MercuryIDs').getUserIDFromParticipantID(n);});k=c('PresenceStatus').getGroup(m);}if(!c('ChatVisibility').isOnline())k=c('AvailableListConstants').OFFLINE;return k;}};}),null);
__d('FantaGetMessageActions',['FantaDispatcher','MercuryCanonicalGroupThreadManager','MercuryIDs','MercuryTypeaheadConstants','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({ADD_PARTICIPANTS:null,CLEAR_PARTICIPANTS:null,CLEAR_PREVIEW:null,FETCH_MORE_MESSAGES:null,ON_BOOTLOAD_TYPEAHEAD:null,ON_GET_THREAD_PREVIEW_RESPONSE:null,ON_GET_THREAD_RESPONSE:null,ON_MESSAGE_STORE_RESPONSE:null,ON_PAGE_NULL_RESPONSE:null,ON_PRIVACY_STATE_CHANGE:null,ON_SHOW_CONTEXT_BANNER_TIMER:null,REFRESH_THREAD:null,THREADS_UPDATED:null}),i={Types:h,addParticipants:function j(k,l){var m,n=l.length===1&&l[0].getInfo().render_type===c('MercuryTypeaheadConstants').THREAD_TYPE,o=void 0;if(n){var p=l[0].getInfo().mercury_thread;if(p)o=c('MercuryIDs').getThreadIDFromThreadFBID(p.thread_fbid);}else if(l.length===1){var q=l[0].info&&l[0].info.uid;if(q)o=c('MercuryIDs').getThreadIDFromUserID(q);}else if(l.length===0){c('FantaDispatcher').dispatch({type:h.CLEAR_PARTICIPANTS,tabID:k});return;}else (function(){var r=c('MercuryCanonicalGroupThreadManager').get(),s=l.map(function(u){return u.info.uid;});c('FantaDispatcher').dispatch({type:h.CLEAR_PREVIEW,tabID:k,tokens:l});var t=r.getCanonicalGroupThreadIDForParticipants(Array.from(s),function(u){r.unsubscribe(t);if(u)c('FantaDispatcher').dispatch({type:h.ADD_PARTICIPANTS,previewTabID:u,tabID:k,tokens:l});});})();if(o)c('FantaDispatcher').dispatch({type:h.ADD_PARTICIPANTS,previewTabID:o,tabID:k,tokens:l});},onBootloadTypeahead:function j(k,l){c('FantaDispatcher').dispatch({type:h.ON_BOOTLOAD_TYPEAHEAD,tabID:k,thread:l});},fetchMoreMessages:function j(k){c('FantaDispatcher').dispatch({type:h.FETCH_MORE_MESSAGES,threadID:k});},refreshThread:function j(k){c('FantaDispatcher').dispatch({type:h.REFRESH_THREAD,threadID:k});},onGetThreadResponse:function j(k){c('FantaDispatcher').dispatch({type:h.ON_GET_THREAD_RESPONSE,thread:k});},onGetThreadPreviewResponse:function j(k,l){c('FantaDispatcher').dispatch({type:h.ON_GET_THREAD_PREVIEW_RESPONSE,tabID:k,thread:l});},onShowContextBannerTimer:function j(k){c('FantaDispatcher').dispatch({type:h.ON_SHOW_CONTEXT_BANNER_TIMER,threadID:k});},onMessageStoreResponse:function j(k,l){c('FantaDispatcher').dispatch({type:h.ON_MESSAGE_STORE_RESPONSE,messages:k,tabID:l});},threadsUpdated:function j(k){c('FantaDispatcher').dispatch({type:h.THREADS_UPDATED,threads:k});},onPrivacyStateChange:function j(k,l){c('FantaDispatcher').dispatch({type:h.ON_PRIVACY_STATE_CHANGE,threadID:k,privacyState:l});},onPageNullResponse:function j(k,l,m){c('FantaDispatcher').dispatch({type:h.ON_PAGE_NULL_RESPONSE,threadID:k,nullPageTitle:l,nullPageID:m});}};f.exports=i;}),null);
__d('FantaTabSheetActions',['FantaDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({CLOSE_ADD_FRIENDS_SHEET:null,CLOSE_ADD_MORE_FRIENDS_SHEET:null,CLOSE_EMPLOYEE_PERSONAL_USER_SHEET:null,CLOSE_EMPLOYEE_WORK_USER_SHEET:null,CLOSE_NAME_CONVERSATION_TAB_SHEET:null,CLOSE_PAGE_INDICATOR_SHEET:null,CLOSE_READ_ONLY_PERMANENT_SHEET:null,CLOSE_READ_ONLY_SHEET:null,CLOSE_USER_FOCUS_AND_BYPASS_SHEET:null,CLOSE_USER_TIMEZONE_SHEET:null,ON_BOOTLOAD_EVENT_REMINDER:null,ON_IS_PAGE_TAB:null,OPEN_ADD_MORE_FRIENDS_SHEET:null,OPEN_APPOINTMENT_SHEET:null,OPEN_BYPASS_FOCUS_SHEET:null,OPEN_EMPLOYEE_AWAY_SHEET:null,OPEN_EMPLOYEE_PERSONAL_USER_SHEET:null,OPEN_EMPLOYEE_WORK_USER_SHEET:null,OPEN_NAME_CONVERSATION_TAB_SHEET:null,OPEN_PAGE_INDICATOR_SHEET:null,OPEN_READ_ONLY_PERMANENT_SHEET:null,OPEN_READ_ONLY_SHEET:null,OPEN_USER_FOCUS_SHEET:null,OPEN_USER_TIMEZONE_SHEET:null}),i={Types:h,openUserFocusSheet:function j(k){c('FantaDispatcher').dispatch({type:h.OPEN_USER_FOCUS_SHEET,tabID:k});},openBypassFocusSheet:function j(k){c('FantaDispatcher').dispatch({type:h.OPEN_BYPASS_FOCUS_SHEET,tabID:k});},closeUserFocusAndBypassSheet:function j(k){c('FantaDispatcher').dispatch({type:h.CLOSE_USER_FOCUS_AND_BYPASS_SHEET,tabID:k});},openUserTimezoneSheet:function j(k,l){c('FantaDispatcher').dispatch({type:h.OPEN_USER_TIMEZONE_SHEET,tabID:k,timezoneInfo:l});},closeUserTimezoneSheet:function j(k){c('FantaDispatcher').dispatch({type:h.CLOSE_USER_TIMEZONE_SHEET,tabID:k});},openAddMoreFriendsSheet:function j(k){c('FantaDispatcher').dispatch({type:h.OPEN_ADD_MORE_FRIENDS_SHEET,tabID:k});},closeAddMoreFriendsSheet:function j(k){c('FantaDispatcher').dispatch({type:h.CLOSE_ADD_MORE_FRIENDS_SHEET,tabID:k});},closeAddFriendsSheet:function j(k){c('FantaDispatcher').dispatch({type:h.CLOSE_ADD_FRIENDS_SHEET,tabID:k});},openNameConversationSheet:function j(k){c('FantaDispatcher').dispatch({type:h.OPEN_NAME_CONVERSATION_TAB_SHEET,tabID:k});},closeNameConversationSheet:function j(k){c('FantaDispatcher').dispatch({type:h.CLOSE_NAME_CONVERSATION_TAB_SHEET,tabID:k});},openReadOnlySheet:function j(k){c('FantaDispatcher').dispatch({type:h.OPEN_READ_ONLY_SHEET,tabID:k});},closeReadOnlySheet:function j(k){c('FantaDispatcher').dispatch({type:h.CLOSE_READ_ONLY_SHEET,tabID:k});},openReadOnlyPermanentSheet:function j(k){c('FantaDispatcher').dispatch({type:h.OPEN_READ_ONLY_PERMANENT_SHEET,tabID:k});},closeReadOnlyPermanentSheet:function j(k){c('FantaDispatcher').dispatch({type:h.CLOSE_READ_ONLY_PERMANENT_SHEET,tabID:k});},openEmployeeAwaySheet:function j(k){c('FantaDispatcher').dispatch({type:h.OPEN_EMPLOYEE_AWAY_SHEET,tabID:k});},openEmployeePersonalUserSheet:function j(k){c('FantaDispatcher').dispatch({type:h.OPEN_EMPLOYEE_PERSONAL_USER_SHEET,tabID:k});},closeEmployeePersonalUserSheet:function j(k){c('FantaDispatcher').dispatch({type:h.CLOSE_EMPLOYEE_PERSONAL_USER_SHEET,tabID:k});},openEmployeeWorkUserSheet:function j(k){c('FantaDispatcher').dispatch({type:h.OPEN_EMPLOYEE_WORK_USER_SHEET,tabID:k});},closeEmployeeWorkUserSheet:function j(k){c('FantaDispatcher').dispatch({type:h.CLOSE_EMPLOYEE_WORK_USER_SHEET,tabID:k});},openPageIndicatorSheet:function j(k,l){c('FantaDispatcher').dispatch({type:h.OPEN_PAGE_INDICATOR_SHEET,description:l,tabID:k});},closePageIndicatorSheet:function j(k){c('FantaDispatcher').dispatch({type:h.CLOSE_PAGE_INDICATOR_SHEET,tabID:k});},onIsPageTab:function j(k,l){c('FantaDispatcher').dispatch({type:h.ON_IS_PAGE_TAB,pageIndicator:l,tabID:k});},onBootloadEventReminder:function j(k){c('FantaDispatcher').dispatch({type:h.ON_BOOTLOAD_EVENT_REMINDER,tabID:k});},openAppointmentBannerSheet:function j(k){c('FantaDispatcher').dispatch({type:h.OPEN_APPOINTMENT_SHEET,tabID:k});}};f.exports=i;}),null);
__d('FantaTypeJoinableThread',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={admins:[],approvalMode:0,associatedObject:null,description:null,friendsInParticipants:[],imageURL:null,isViewerSubscribed:false,joinableMode:{mode:0,link:''},linkHash:'',participants:[],threadID:null,threadFBID:null,threadName:null};h=babelHelpers.inherits(k,c('immutable').Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('FantaTypeFileUploader',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={ANIMATED_IMAGE:'animated_image',AUDIO:'audio',FILE:'file',GENERIC_ATTACHMENT:'generic_attachment',IMAGE:'image',VIDEO:'video'},k={uploadedFiles:c('immutable').Map(),uploadingFiles:c('immutable').Map()};h=babelHelpers.inherits(l,c('immutable').Record(k));i=h&&h.prototype;l.prototype.getTypeIDs=function(m){return this.uploadedFiles.reduce(function(n,o){if(o.type===m&&o.uploadedID)n=n.concat(o.uploadedID);return n;},[]);};function l(){h.apply(this,arguments);}l.fileTypes=j;f.exports=l;}),null);
__d('FantaTypeSharePreview',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={isLoading:false,params:null,type:null,uri:null};h=babelHelpers.inherits(k,c('immutable').Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('FantaTypeTabContents',['ChatPrivacyActionController','FantaGetMessageActions','FantaTypeFileUploader','FantaTypeSharePreview','immutable','MercuryIDs','emptyFunction','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={composerText:'',fileUploader:new (c('FantaTypeFileUploader'))(),hasFetchedAll:false,id:'',isScrolledToBottom:true,messages:c('immutable').List(),messageStore:null,nullPageID:null,nullPageTitle:null,openSheet:null,pageIndicator:null,pageIndicatorDescription:null,privacyController:null,sharePreview:new (c('FantaTypeSharePreview'))(),showContextBanner:false,showUnseenMessages:c('emptyFunction'),signatureID:null,joinableInterstitialData:null,thread:null,threadPreviewID:null,threadPreviewRecipients:null,timezoneInfo:null,typeahead:null};h=babelHelpers.inherits(k,c('immutable').Record(j));i=h&&h.prototype;function k(l){var m=void 0,n=c('MercuryIDs').getUserIDFromThreadID(l.id);if(n)m=new (c('ChatPrivacyActionController'))(n,function(o){c('setImmediate')(function(){c('FantaGetMessageActions').onPrivacyStateChange(l.id,o);});});i.constructor.call(this,babelHelpers['extends']({privacyController:m},l));}f.exports=k;}),null);
__d('WorkFocusMode',['WorkModeConfig','WorkUserAvailabilityStatusType','emptyFunction','ifRequired'],(function a(b,c,d,e,f,g){'use strict';var h={},i={status:'AVAILABLE',end_date:0};if(c('WorkModeConfig').availability){i.status=c('WorkModeConfig').availability.status;i.end_date=c('WorkModeConfig').availability.end_date;}f.exports={updateAvailability:function j(k,l){k=Object.keys(c('WorkUserAvailabilityStatusType')).find(function(m){return c('WorkUserAvailabilityStatusType')[m]===k;});i.status=k;i.end_date=l;},currentViewerInFocusMode:function j(k){if(!c('WorkModeConfig').focus_messaging_enabled)return false;if(k){if(h[k])return false;var l=null;c('ifRequired')('MercuryThreads',function(n){l=n.get().getThreadMetaNow(k);},c('emptyFunction'));if(l&&l.bypass_focus_mode_until&&l.bypass_focus_mode_until>Date.now()/1000)return false;}var m=c('WorkUserAvailabilityStatusType')[i.status];if(m===c('WorkUserAvailabilityStatusType').FOCUS&&i.end_date*1000>Date.now())return true;return false;},addBypassFocusModeForThread:function j(k){h[k]=true;},removeBypassFocusModeForThread:function j(k){h[k]=false;}};}),null);
__d('FantaReducersMercury',['Arbiter','AsyncSignal','AvailableList','AvailableListConstants','Bootloader','FantaAvailableStatus','FantaGetMessageActions','FantaMessageActions','FantaTabActions','FantaTabSheetActions','FantaTypeJoinableThread','FantaTypeTabContents','JSLogger','MercuryIDs','MercuryThreadIDMap','WorkFocusMode','getPageIDFromThreadID','ifRequired','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryThreadIDMap').get(),i=c('JSLogger').create('FantaReducersMercury'),j=c('FantaMessageActions').Types,k=c('FantaTabActions').Types,l=c('FantaGetMessageActions').Types;function m(){return Math.floor(Math.random()*2147483648).toString(16);}function n(ha,ia){switch(ia.type){case k.OPEN_TAB:case k.OPEN_TAB_WITH_INTERSTITIAL_DATA:var ja=ia.tabID;c('ifRequired')('FantaTabsReactApp',function(ma){if(!c('MercuryIDs').isValidThreadID(ja)){ha=ha.deleteIn(['tabGroup','tabs',ja]);v(ja);}else{da(ha,ja);ea(ja);}},function(){return ha=o(ha,ia.tabID);});ha=q(ha,ja);var ka=m();ha=ha.mergeIn(['mercury','tabContents',ja],{signatureID:ka});new (c('AsyncSignal'))('/ajax/chat/opentab_tracking.php',{threadID:ja,userID:c('MercuryIDs').getUserIDFromThreadID(ja),signatureID:ka}).send();if(ia.interstitialData){var la=new (c('FantaTypeJoinableThread'))(ia.interstitialData);ha=ha.mergeIn(['mercury','tabContents',ja],{joinableInterstitialData:la});}c('Arbiter').inform('jewel/hide');return ha;}return ha;}function o(ha,ia){c('ifRequired')('FantaTabsSlimApp',function(ja){if(!c('MercuryIDs').isValidThreadID(ia)){ha=ha.deleteIn(['tabGroup','tabs',ia]);v(ia);}else{da(ha,ia);ea(ia);}},function(){da(ha,ia);ea(ia);});return ha;}function p(ha,ia){switch(ia.type){case j.RECEIVED_NEW_MESSAGE:ha=q(ha,ia.tabID);}return ha;}function q(ha,ia){var ja,ka=ha.mercury.tabContents.get(ia);if(!ka){var ja=function(){var la=c('getPageIDFromThreadID')(ia);if(la)c('Bootloader').loadModules(["PagesMercuryChatTabIndicatorHandler"],function(ma){var na=c('AvailableListConstants').OFFLINE,oa=new ma(la,na,function(pa){c('setImmediate')(function(){c('FantaTabSheetActions').openPageIndicatorSheet(ia,pa);});},function(){c('setImmediate')(function(){return c('FantaTabSheetActions').closePageIndicatorSheet(ia);});});c('setImmediate')(function(){c('FantaTabSheetActions').onIsPageTab(ia,oa);});oa.checkResponsiveness();},'FantaReducersMercury');return {v:ha.setIn(['mercury','tabContents',ia],new (c('FantaTypeTabContents'))({id:ia}))};}();if(typeof ja==="object")return ja.v;}return ha;}function r(ha,ia){switch(ia.type){case k.REPLACE_TAB:ha=u(ha,ia.newTabID);ha=q(ha,ia.newTabID);return ha;}return ha;}function s(ha,ia){switch(ia.type){case l.ADD_PARTICIPANTS:var ja=ia.tabID,ka=ia.previewTabID;if(!ha.mercury.tabContents.get(ja))return ha;ha=ha.mergeIn(['mercury','tabContents',ja],{threadPreviewID:ka});return ha;}return ha;}function t(ha,ia){switch(ia.type){case l.CLEAR_PARTICIPANTS:var ja=ia.tabID;ha=ha.setIn(['mercury','tabContents',ja],new (c('FantaTypeTabContents'))({id:ja}));}return ha;}function u(ha,ia){c('ifRequired')('FantaTabsReactApp',function(ja){if(!c('MercuryIDs').isValidThreadID(ia)){ha=ha.deleteIn(['tabGroup','tabs',ia]);v(ia);}},function(){c('ifRequired')('FantaTabsSlimApp',function(ja){if(!c('MercuryIDs').isValidThreadID(ia)){ha=ha.deleteIn(['tabGroup','tabs',ia]);v(ia);}});});return ha;}function v(ha){h.getClientIDFromServerID(ha,function(ia){return c('setImmediate')(function(){if(c('MercuryIDs').isValidThreadID(ia)){c('FantaTabActions').openTab(ia);}else i.error('invalid id',ha);});});}function w(ha,ia){switch(ia.type){case k.FOCUS_TAB:da(ha,ia.tabID);}return ha;}function x(ha,ia){switch(ia.type){case k.CLOSE_TAB:var ja=ia.tabID;ha=z(ha,ja);}return ha;}function y(ha,ia){switch(ia.type){case k.DELETE_TAB:var ja=ia.tabID;ha=z(ha,ja);ha=ha.deleteIn(['mercury','tabContents',ja]);}return ha;}function z(ha,ia){c('ifRequired')('MessengerVideoAutoplayActions',function(ja){ja.deleteThread(ia);});c('WorkFocusMode')&&c('WorkFocusMode').removeBypassFocusModeForThread(ia);return ha;}function aa(ha,ia){switch(ia.type){case k.CLOSE_ALL_TABS:c('ifRequired')('MessengerVideoAutoplayActions',function(ja){ja.deleteAllThreads();});return ha;}return ha;}function ba(ha,ia){switch(ia.type){case k.FOCUS_NEXT_TAB:case k.FOCUS_PREVIOUS_TAB:case k.CLOSE_AND_TAB_NEXT:var ja=ha.tabGroup.focusedTabID;if(ja)da(ha,ja);}return ha;}function ca(ha,ia){switch(ia.type){case k.CLOSE_AND_TAB_NEXT:var ja=ia.tabID;c('WorkFocusMode')&&c('WorkFocusMode').removeBypassFocusModeForThread(ja);}return ha;}function da(ha,ia){var ja=c('MercuryIDs').getUserIDFromThreadID(ia);if(ja)c('AvailableList').updateForID(ja);var ka=ha.mercury.tabContents.get(ia);if(ka){var la=ka.thread,ma=ka.pageIndicator;if(ma)ma.notifyPageOnlineStatusChanged(c('FantaAvailableStatus').getStatus(la,ia));}}function ea(ha){if(!c('MercuryIDs').isValidThreadID(ha))return;c('Bootloader').loadModules(["GroupChatMessageBlockAlert","mercuryBlockedParticipantsRe","MercuryThreadActions","MercuryThreads"],function(ia,ja,ka,la){var ma=ka.get(),na=la.get(),oa=ja.get();na.getThreadMeta(ha,function(pa){if(oa.isPresentInGroupThread(pa))ia.show(oa.inGroupThread(pa),function(){c('FantaTabActions').focusTab(ha);},function(){c('FantaTabActions').closeTab(ha);ma.leaveGroup(ha);});});},'FantaReducersMercury');}function fa(ha,ia){switch(ia.type){case k.UNMINIMIZE_TAB:da(ha,ia.tabID);}return ha;}function ga(ha,ia){switch(ia.type){case k.LOAD_FROM_DATA:for(var ja=ha.tabGroup.tabs.keys(),ka=Array.isArray(ja),la=0,ja=ka?ja:ja[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ma;if(ka){if(la>=ja.length)break;ma=ja[la++];}else{la=ja.next();if(la.done)break;ma=la.value;}var na=ma;ha=q(ha,na);}}return ha;}f.exports={addParticipants:s,clearParticipants:t,closeAllTabs:aa,closeAndTabNext:ca,closeTab:x,deleteTab:y,focusTab:w,focusTabEvents:ba,loadFromData:ga,openTab:n,receivedNewMessage:p,replaceTab:r,unminimizeTab:fa};}),null);
__d('FantaReducersMessages',['FantaGetMessageActions','FantaMessageActions','FantaTabActions','MercuryBrowserAlerts'],(function a(b,c,d,e,f,g){'use strict';var h=c('FantaMessageActions').Types,i=c('FantaTabActions').Types,j=c('FantaGetMessageActions').Types;function k(r,s){switch(s.type){case h.RECEIVED_NEW_MESSAGE:var t=s.message;c('MercuryBrowserAlerts').messageReceived(t);return r;}return r;}function l(r,s){switch(s.type){case h.COMPOSER_TEXT_UPDATE:var t=s.message,u=s.threadID;if(!r.mercury.tabContents.get(u))return r;return r.mergeIn(['mercury','tabContents',u],{composerText:t});}return r;}function m(r,s){switch(s.type){case i.CLOSE_TAB:if(!r.mercury.tabContents.get(s.tabID))return r;return r.mergeIn(['mercury','tabContents',s.tabID],{composerText:''});}return r;}function n(r,s){switch(s.type){case i.CLOSE_ALL_TABS:var t=r.mercury.tabContents;t.forEach(function(u){var v=u.id;r=r.setIn(['mercury','tabContents',v],u.set('composerText',''));});return r;}return r;}function o(r,s){switch(s.type){case i.SCROLL_BOTTOM_CHANGED:var t=s.tabID,u=s.isScrolledToBottom,v=s.showUnseenMessages;if(!r.mercury.tabContents.get(t))return r;r=r.mergeIn(['mercury','tabContents',t],{isScrolledToBottom:u,showUnseenMessages:v});}return r;}function p(r,s){switch(s.type){case i.SHOW_UNSEEN_MESSAGES:var t=s.tabID,u=r.mercury.tabContents.get(t);if(u)u.showUnseenMessages();}return r;}function q(r,s){switch(s.type){case j.ON_GET_THREAD_RESPONSE:var t=s.thread,u=t.thread_id,v=r.mercury.tabContents.get(u);if(!v)return r;r=r.mergeIn(['mercury','tabContents',u],{thread:t});break;}return r;}f.exports={closeAllTabs:n,closeTab:m,composerTextUpdate:l,onGetThreadResponse:q,receivedNewMessage:k,scrollBottomChanged:o,showUnseenMessages:p};}),null);
__d('MercurySheetPolicy',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h={ChatThreadIsMutedTabSheet:{isPermanent:false,isSheetWithInput:false},ChatUserFocusSheet:{isPermanent:true,isSheetWithInput:true},ChatUserFocusBypassSheet:{isPermanent:true,isSheetWithInput:true},ChatUserTimezoneSheet:{isPermanent:true,isSheetWithInput:true},ChatUserBlockedTabSheet:{isPermanent:true,isSheetWithInput:false},ChatUploadWarningTabSheet:{isPermanent:false,isSheetWithInput:false},ChatThreadIsMessageBlockedSheet:{isPermanent:true,isSheetWithInput:false},ChatReadOnlyTabSheet:{isPermanent:false,isSheetWithInput:false},ChatReadOnlyPermanentTabSheet:{isPermanent:true,isSheetWithInput:false},ChatOfflineTabSheet:{isPermanent:true,isSheetWithInput:false},ChatNoRecipientsTabSheet:{isPermanent:true,isSheetWithInput:false},ChatNewMessagesTabSheet:{isPermanent:true,isSheetWithInput:true},ChatNameConversationTabSheet:{isPermanent:true,isSheetWithInput:true},ChatEmployeeAwaySheet:{isPermanent:true,isSheetWithInput:false},ChatUserIsPersonalUserSheet:{isPermanent:true,isSheetWithInput:false},ChatUserIsWorkUserSheet:{isPermanent:true,isSheetWithInput:true},ChatPageResponsivenessIndicator:{isPermanent:true,isSheetWithInput:false},ChatEventReminderTabSheet:{isPermanent:true,isSheetWithInput:false},ChatAppointmentBanner:{isPermanent:true,isSheetWithInput:false},ChatMontageSheet:{isPermanent:false,isSheetWithInput:false},ChatJoinCallSheet:{isPermanent:true,isSheetWithInput:false},FantaAddFriendsSheet:{isPermanent:true,isSheetWithInput:true},FantaAddMoreFriendsSheet:{isPermanent:true,isSheetWithInput:true},ChatRoomAssociatedObjectSheet:{isPermanent:false,isSheetWithInput:false}},i={canReplaceOpenSheet:function j(k,l){var m=this.getType(l),n=this.isPermanent(l),o=this.isSheetWithInput(l),p=this.getType(k),q=this.isPermanent(k),r=this.isSheetWithInput(k);if(r)return !!(m!==p&&o);if(q&&!n)return false;if(p===this.sheets.ChatThreadIsMessageBlockedSheet)return false;return true;},getType:function j(k){var l=k.getType||k.type&&k.type.getType||function(){return k;},m=l.call(k);return m;},isPermanent:function j(k){if(typeof k==='string'&&h[k])return h[k].isPermanent;var l=k.isPermanent||k.type&&k.type.isPermanent||function(){return false;},m=l.call(k);return m;},isSheetWithInput:function j(k){if(typeof k==='string'&&h[k])return h[k].isSheetWithInput;var l=k.isSheetWithInput||k.type&&k.type.isSheetWithInput||function(){return false;},m=l.call(k);return m;},sheets:c('keyMirror')(h)};f.exports=i;}),null);
__d("XNativeComponentFlowBookingRequestCountController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/platform\/native-component-flow\/booking_request_count\/",{page_id:{type:"FBID",required:true},user_id:{type:"FBID",required:true}});}),null);
__d('FantaReducersTabSheets',['AsyncRequest','Bootloader','ChatEmployeeAwayWarning','ChatPrivacyActionController','ChatTimezoneWarning','ChatUserFocusWarning','ChatUserPersonalUserWarning','ChatUserWorkUserWarning','CurrentUser','FantaGetMessageActions','FantaMessageActions','FantaTabActions','FantaTabSheetActions','FBID','ImmutableObject','mercuryBlockedParticipantsRe','MercuryConfig','MercuryDataSourceWrapper','MercuryIDs','MercuryParticipants','MercurySheetPolicy','MercuryThreadInfo','MercuryThreads','MercuryTypeaheadConstants','MercuryViewer','MessageThreadAssociatedObjectUtils','MessengerRoomPrivacyMode','XNativeComponentFlowBookingRequestCountController','emptyFunction','ifRequired','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h=c('mercuryBlockedParticipantsRe').get(),i=c('MercuryThreads').get(),j=c('FantaTabActions').Types,k=c('FantaGetMessageActions').Types,l=c('FantaMessageActions').Types,m=c('FantaTabSheetActions').Types;function n(ub,vb){switch(vb.type){case j.CLOSE_TAB:case j.CLOSE_AND_TAB_NEXT:var wb=vb.tabID;if(!ub.mercury.tabContents.get(wb))return ub;ub=ub.mergeIn(['mercury','tabContents',wb],{typeahead:null});return o(ub,wb);}return ub;}function o(ub,vb,wb){var xb=ub.mercury.tabContents.get(vb);if(!xb)return ub;if(wb&&xb.openSheet!==wb)return ub;ub=ub.mergeIn(['mercury','tabContents',vb],{openSheet:null});if(xb.thread)ub=mb(ub,vb,xb.thread);return ub;}function p(ub,vb){switch(vb.type){case j.CLOSE_ALL_TABS:for(var wb=ub.mercury.tabContents.keys(),xb=Array.isArray(wb),yb=0,wb=xb?wb:wb[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var zb;if(xb){if(yb>=wb.length)break;zb=wb[yb++];}else{yb=wb.next();if(yb.done)break;zb=yb.value;}var ac=zb;ub=ub.mergeIn(['mercury','tabContents',ac],{typeahead:null});ub=o(ub,ac);}}return ub;}function q(ub,vb){switch(vb.type){case k.ON_GET_THREAD_RESPONSE:case k.ON_GET_THREAD_PREVIEW_RESPONSE:var wb=vb.thread,xb=vb.tabID||wb.thread_id;ub=r(ub,wb,xb);}return ub;}function r(ub,vb,wb){var xb=c('MercuryViewer').getID(),yb=vb.participants.filter(function(zb){return zb!==xb;});if(yb.length<1&&!i.isNewEmptyLocalThread(wb)){ub=z(ub,wb,c('MercurySheetPolicy').sheets.ChatNoRecipientsTabSheet);}else ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatNoRecipientsTabSheet);if(vb.participants.length===0){ub=x(ub,wb,vb);ub=z(ub,wb,c('MercurySheetPolicy').sheets.FantaAddFriendsSheet);}else ub=mb(ub,wb,vb);return ub;}function s(ub,vb){switch(vb.type){case k.THREADS_UPDATED:vb.threads.forEach(function(wb){ub=r(ub,new (c('ImmutableObject'))(wb),wb.thread_id);});}return ub;}function t(ub,vb){switch(vb.type){case j.OPEN_TAB:case j.REPLACE_TAB:var wb=vb.tabID,xb=ub.mercury.tabContents.get(wb).thread;if(xb)ub=mb(ub,wb,xb);}return ub;}function u(ub,vb,wb){if(c('MercuryThreadInfo').isMuted(wb)){return z(ub,vb,c('MercurySheetPolicy').sheets.ChatThreadIsMutedTabSheet);}else return o(ub,vb,c('MercurySheetPolicy').sheets.ChatThreadIsMutedTabSheet);}function v(ub,vb,wb){if(h.isMessageBlocked(wb)){return z(ub,vb,c('MercurySheetPolicy').sheets.ChatThreadIsMessageBlockedSheet);}else return o(ub,vb,c('MercurySheetPolicy').sheets.ChatThreadIsMessageBlockedSheet);}function w(ub,vb){switch(vb.type){case k.ON_BOOTLOAD_TYPEAHEAD:var wb=vb.thread,xb=wb.thread_id;ub=x(ub,xb,wb);}return ub;}function x(ub,vb,wb){if(ub.mercury.tabContents.get(vb).typeahead)return ub;c('ifRequired')('ChatTabTypeaheadRenderer',function(xb){c('ifRequired')('ContextualTypeaheadView',function(yb){c('ifRequired')('MercuryTypeahead',function(zb){if(!ub.mercury.tabContents.get(vb))return;var ac=!!(wb&&wb.participants&&wb.participants.length===0),bc=!!(wb&&wb.associated_object&&wb.associated_object.privacy_mode===c('MessengerRoomPrivacyMode').WHITELISTED_MODE),cc=ac?c('MercuryDataSourceWrapper').chat_typeahead_source:bc?c('MercuryDataSourceWrapper').chat_add_people_froup_source:c('MercuryDataSourceWrapper').chat_add_people_source;cc.setShowThreads(ac);if(bc)cc.setQueryData({thread_id:wb.thread_fbid});var dc=new zb(cc,yb);dc.setViewOption('renderer',xb);dc.setExcludedParticipantsFromThreadMeta(wb);ub=ub.mergeIn(['mercury','tabContents',vb],{typeahead:dc});},function(){return y(vb,wb);});},function(){return y(vb,wb);});},function(){return y(vb,wb);});return ub;}function y(ub,vb){c('Bootloader').loadModules(["ChatTabTypeaheadRenderer","ContextualTypeaheadView","MercuryTypeahead"],function(wb,xb,yb){c('FantaGetMessageActions').onBootloadTypeahead(ub,vb);},'FantaReducersTabSheets');}function z(ub,vb,wb){var xb=ub.mercury.tabContents.get(vb),yb=ub.tabGroup.tabs.get(vb);if(!yb||!xb)return ub;var zb=xb.openSheet;if(zb&&!c('MercurySheetPolicy').canReplaceOpenSheet(zb,wb))return ub;ub=ub.mergeIn(['mercury','tabContents',vb],{openSheet:wb});return ub;}function aa(ub,vb){switch(vb.type){case k.ADD_PARTICIPANTS:var wb=vb.tokens,xb=vb.tabID,yb=wb.length===1&&wb[0].getInfo().render_type===c('MercuryTypeaheadConstants').THREAD_TYPE;if(!yb)return z(ub,xb,c('MercurySheetPolicy').sheets.FantaAddFriendsSheet);}return ub;}function ba(ub,vb){return ub;}function ca(ub,vb){switch(vb.type){case m.OPEN_APPOINTMENT_SHEET:var wb=vb.tabID;return z(ub,wb,c('MercurySheetPolicy').sheets.ChatAppointmentBanner);}return ub;}function da(ub,vb){switch(vb.type){case m.OPEN_USER_FOCUS_SHEET:var wb=vb.tabID;return z(ub,wb,c('MercurySheetPolicy').sheets.ChatUserFocusSheet);}return ub;}function ea(ub,vb){switch(vb.type){case m.CLOSE_USER_FOCUS_AND_BYPASS_SHEET:var wb=vb.tabID;ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatUserFocusSheet);ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatUserFocusBypassSheet);}return ub;}function fa(ub,vb,wb){c('ChatUserFocusWarning').updateUserFocusWarning(wb,function(xb){xb?c('setImmediate')(function(){c('FantaTabSheetActions').openBypassFocusSheet(vb);}):c('setImmediate')(function(){c('FantaTabSheetActions').openUserFocusSheet(vb);});},function(){c('setImmediate')(function(){c('FantaTabSheetActions').closeUserFocusAndBypassSheet(vb);});});return ub;}function ga(ub,vb){switch(vb.type){case m.OPEN_BYPASS_FOCUS_SHEET:var wb=vb.tabID;return z(ub,wb,c('MercurySheetPolicy').sheets.ChatUserFocusBypassSheet);}return ub;}function ha(ub,vb){switch(vb.type){case m.OPEN_USER_TIMEZONE_SHEET:var wb=vb.tabID,xb=vb.timezoneInfo;if(!ub.mercury.tabContents.get(wb))return ub;ub=ub.mergeIn(['mercury','tabContents',wb],{timezoneInfo:xb});return z(ub,wb,c('MercurySheetPolicy').sheets.ChatUserTimezoneSheet);}return ub;}function ia(ub,vb){switch(vb.type){case m.CLOSE_USER_TIMEZONE_SHEET:var wb=vb.tabID;if(!ub.mercury.tabContents.get(wb))return ub;ub=ub.mergeIn(['mercury','tabContents',wb],{timezoneInfo:null});ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatUserTimezoneSheet);}return ub;}function ja(ub,vb,wb){c('ChatTimezoneWarning').updateUserTimezoneWarning(wb,function(xb){c('setImmediate')(function(){c('FantaTabSheetActions').openUserTimezoneSheet(vb,xb);});},function(){c('setImmediate')(function(){c('FantaTabSheetActions').closeUserTimezoneSheet(vb);});});return ub;}function ka(ub,vb,wb){c('ChatEmployeeAwayWarning').updateEmployeeAwayWarning(wb,function(){return c('setImmediate')(function(){c('FantaTabSheetActions').openEmployeeAwaySheet(vb);});},c('emptyFunction'));return ub;}function la(ub,vb){switch(vb.type){case m.OPEN_EMPLOYEE_AWAY_SHEET:var wb=vb.tabID;ub=z(ub,wb,c('MercurySheetPolicy').sheets.ChatEmployeeAwaySheet);}return ub;}function ma(ub,vb,wb){c('ChatUserPersonalUserWarning').updateEmployeePersonalUserWarning(wb,function(xb,yb){c('setImmediate')(function(){c('FantaTabSheetActions').openEmployeePersonalUserSheet(vb);});},c('emptyFunction'));return ub;}function na(ub,vb){switch(vb.type){case m.OPEN_EMPLOYEE_PERSONAL_USER_SHEET:var wb=vb.tabID;ub=z(ub,wb,c('MercurySheetPolicy').sheets.ChatUserIsPersonalUserSheet);}return ub;}function oa(ub,vb){switch(vb.type){case m.CLOSE_EMPLOYEE_PERSONAL_USER_SHEET:var wb=vb.tabID;ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatUserIsPersonalUserSheet);}return ub;}function pa(ub,vb){switch(vb.type){case m.OPEN_EMPLOYEE_WORK_USER_SHEET:var wb=vb.tabID;ub=z(ub,wb,c('MercurySheetPolicy').sheets.ChatUserIsWorkUserSheet);}return ub;}function qa(ub,vb){switch(vb.type){case m.CLOSE_EMPLOYEE_WORK_USER_SHEET:var wb=vb.tabID;ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatUserIsWorkUserSheet);}return ub;}function ra(ub,vb,wb){c('ChatUserWorkUserWarning').updateEmployeeWorkUserWarning(wb,function(xb,yb){c('setImmediate')(function(){c('FantaTabSheetActions').openEmployeeWorkUserSheet(vb);});},c('emptyFunction'));return ub;}function sa(ub,vb){switch(vb.type){case m.OPEN_NAME_CONVERSATION_TAB_SHEET:return z(ub,vb.tabID,c('MercurySheetPolicy').sheets.ChatNameConversationTabSheet);}return ub;}function ta(ub,vb){switch(vb.type){case m.CLOSE_NAME_CONVERSATION_TAB_SHEET:return o(ub,vb.tabID,c('MercurySheetPolicy').sheets.ChatNameConversationTabSheet);}return ub;}function ua(ub,vb){return ub;}function va(ub,vb){switch(vb.type){case m.OPEN_READ_ONLY_PERMANENT_SHEET:return z(ub,vb.tabID,c('MercurySheetPolicy').sheets.ChatReadOnlyPermanentTabSheet);}return ub;}function wa(ub,vb){switch(vb.type){case m.CLOSE_READ_ONLY_PERMANENT_SHEET:return o(ub,vb.tabID,c('MercurySheetPolicy').sheets.ChatReadOnlyPermanentTabSheet);}return ub;}function xa(ub,vb){switch(vb.type){case m.OPEN_READ_ONLY_SHEET:return z(ub,vb.tabID,c('MercurySheetPolicy').sheets.ChatReadOnlyTabSheet);}return ub;}function ya(ub,vb){switch(vb.type){case m.CLOSE_READ_ONLY_SHEET:return o(ub,vb.tabID,c('MercurySheetPolicy').sheets.ChatReadOnlyTabSheet);}return ub;}function za(ub,vb){return ub;}function ab(ub,vb){return ub;}function bb(ub,vb){return ub;}function cb(ub,vb){switch(vb.type){case m.CLOSE_ADD_FRIENDS_SHEET:var wb=vb.tabID;if(!ub.mercury.tabContents.get(wb))return ub;ub=ub.mergeIn(['mercury','tabContents',wb],{typeahead:null});return o(ub,wb,c('MercurySheetPolicy').sheets.FantaAddFriendsSheet);}return ub;}function db(ub,vb){switch(vb.type){case m.OPEN_ADD_MORE_FRIENDS_SHEET:var wb=vb.tabID,xb=ub.mercury.tabContents.get(wb).thread;if(xb){ub=x(ub,wb,xb);return z(ub,vb.tabID,c('MercurySheetPolicy').sheets.FantaAddMoreFriendsSheet);}}return ub;}function eb(ub,vb){switch(vb.type){case m.CLOSE_ADD_MORE_FRIENDS_SHEET:var wb=vb.tabID;if(!ub.mercury.tabContents.get(wb))return ub;ub=ub.mergeIn(['mercury','tabContents',wb],{typeahead:null});return o(ub,wb,c('MercurySheetPolicy').sheets.FantaAddMoreFriendsSheet);}return ub;}function fb(ub,vb){switch(vb.type){case l.SEND_GROUP_MESSAGE:var wb=vb.tabID||vb.threadID;return o(ub,wb,c('MercurySheetPolicy').sheets.FantaAddMoreFriendsSheet);}return ub;}function gb(ub,vb){switch(vb.type){case l.RECEIVED_NEW_MESSAGE:var wb=vb.tabID,xb=ub.mercury.tabContents.get(wb);if(xb&&!xb.isScrolledToBottom){ub=z(ub,wb,c('MercurySheetPolicy').sheets.ChatNewMessagesTabSheet);}else ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatNewMessagesTabSheet);}return ub;}function hb(ub,vb){switch(vb.type){case j.SCROLL_BOTTOM_CHANGED:var wb=vb.tabID,xb=vb.isScrolledToBottom;if(xb)ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatNewMessagesTabSheet);var yb=ub.mercury.tabContents.get(wb);if(yb&&yb.thread)ub=ob(ub,wb,yb.thread);}return ub;}function ib(ub,vb){switch(vb.type){case k.ON_PRIVACY_STATE_CHANGE:var wb=vb.threadID,xb=vb.privacyState;switch(xb){case c('ChatPrivacyActionController').OFFLINE:ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatUserBlockedTabSheet);ub=z(ub,wb,c('MercurySheetPolicy').sheets.ChatOfflineTabSheet);break;case c('ChatPrivacyActionController').NORMAL:ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatUserBlockedTabSheet);ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatOfflineTabSheet);break;case c('ChatPrivacyActionController').BLOCKED:ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatOfflineTabSheet);var yb=c('MercuryIDs').getUserIDFromThreadID(wb);if(yb){var zb=c('MercuryParticipants').getNow(c('MercuryIDs').getParticipantIDFromUserID(yb));zb&&zb.is_friend?(ub=z(ub,wb,c('MercurySheetPolicy').sheets.ChatUserBlockedTabSheet)):(ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatUserBlockedTabSheet));}break;}}return ub;}function jb(ub,vb){switch(vb.type){case m.OPEN_PAGE_INDICATOR_SHEET:var wb=vb.tabID,xb=vb.description;if(xb&&ub.mercury.tabContents.get(wb)){ub=ub.mergeIn(['mercury','tabContents',wb],{pageIndicatorDescription:xb});return z(ub,wb,c('MercurySheetPolicy').sheets.ChatPageResponsivenessIndicator);}}return ub;}function kb(ub,vb){switch(vb.type){case m.CLOSE_PAGE_INDICATOR_SHEET:var wb=vb.tabID;ub=o(ub,wb,c('MercurySheetPolicy').sheets.ChatPageResponsivenessIndicator);}return ub;}function lb(ub,vb){switch(vb.type){case m.ON_IS_PAGE_TAB:var wb=vb.tabID,xb=vb.pageIndicator,yb=ub.mercury.tabContents.get(wb);if(!yb)return ub;ub=ub.mergeIn(['mercury','tabContents',wb],{pageIndicator:xb});}return ub;}function mb(ub,vb,wb){ub=fa(ub,vb,wb);ub=ja(ub,vb,wb);ub=v(ub,vb,wb);ub=u(ub,vb,wb);ub=ka(ub,vb,wb);ub=ma(ub,vb,wb);ub=ra(ub,vb,wb);ub=pb(ub,vb,wb);ub=sb(ub,vb,wb);ub=ob(ub,vb,wb);ub=nb(ub,vb,wb);ub=tb(ub,vb,wb);return ub;}function nb(ub,vb,wb){var xb=wb.rtc_call_data,yb=wb.thread_fbid,zb=xb&&xb.call_state!=='NO_ONGOING_CALL'&&yb;if(zb){ub=z(ub,vb,c('MercurySheetPolicy').sheets.ChatJoinCallSheet);}else ub=o(ub,vb,c('MercurySheetPolicy').sheets.ChatJoinCallSheet);return ub;}function ob(ub,vb,wb){var xb=wb.has_montage&&c('MercuryConfig').MontageThreadViewer,yb=ub.mercury.tabContents.get(vb),zb=!!(yb&&yb.isScrolledToBottom);if(zb&&xb){ub=z(ub,vb,c('MercurySheetPolicy').sheets.ChatMontageSheet);}else ub=o(ub,vb,c('MercurySheetPolicy').sheets.ChatMontageSheet);return ub;}function pb(ub,vb,wb){c('ifRequired')('EventReminderActions',function(xb){var event=wb.lightweight_event;if(event){xb.updateEventReminder(vb,event);ub=z(ub,vb,c('MercurySheetPolicy').sheets.ChatEventReminderTabSheet);}else c('ifRequired')('EventReminderStateStore',function(yb){var zb=yb.getEvent(vb);if(zb&&zb.exists)xb.deleteEventReminder(vb);ub=o(ub,vb,c('MercurySheetPolicy').sheets.ChatEventReminderTabSheet);},function(){return qb(vb);});},function(){return qb(vb);});return ub;}function qb(ub){c('Bootloader').loadModules(["EventReminderActions","EventReminderStateStore"],function(vb,wb){c('setImmediate')(function(){c('FantaTabSheetActions').onBootloadEventReminder(ub);});},'FantaReducersTabSheets');}function rb(ub,vb){switch(vb.type){case m.ON_BOOTLOAD_EVENT_REMINDER:var wb=vb.tabID,xb=ub.mercury.tabContents.get(wb);if(!xb)return ub;var yb=xb.thread;if(yb)ub=pb(ub,wb,yb);}return ub;}function sb(ub,vb,wb){var xb=wb.other_user_fbid;if(xb&&!c('FBID').isUser(xb)&&c('MercuryConfig').ShowAppointmentBanner){var yb=c('XNativeComponentFlowBookingRequestCountController').getURIBuilder().setFBID('page_id',xb).setFBID('user_id',c('CurrentUser').getID()).getURI();new (c('AsyncRequest'))().setURI(yb).setHandler(function(zb){var ac=zb&&zb.getPayload();if(ac&&ac.confirmed+ac.pending>0)c('FantaTabSheetActions').openAppointmentBannerSheet(vb);}).send();}else ub=o(ub,vb,c('MercurySheetPolicy').sheets.ChatAppointmentBanner);return ub;}function tb(ub,vb,wb){var xb=wb.associated_object;if(c('MessageThreadAssociatedObjectUtils').shouldRender(xb))ub=z(ub,vb,c('MercurySheetPolicy').sheets.ChatRoomAssociatedObjectSheet);return ub;}f.exports={addParticipants:aa,closeAddFriends:cb,closeAddMoreFriends:eb,closeAllTabs:p,closeEmployeePersonalUserSheet:oa,closeEmployeeWorkUserSheet:qa,closeFocusUserSheet:ea,closeNameConversationSheet:ta,closePageIndicatorSheet:kb,closePermanentReadOnlySheet:wa,closeReadOnlySheet:ya,closeTab:n,closeUserTimezoneSheet:ia,onBootloadEventReminder:rb,onBootloadTypeahead:w,onGetThreadResponse:q,onIsPageTab:lb,onPrivacyStateChange:ib,openAddFriendsSheet:ba,openAddMoreFriends:db,openAppointmentBannerSheet:ca,openBypassFocusSheet:ga,openEmployeeAwaySheet:la,openEmployeePersonalUserSheet:na,openEmployeeWorkUserSheet:pa,openFocusUserSheet:da,openNameConversationSheet:sa,openNewMessagesSheet:ua,openPageIndicatorSheet:jb,openPermanentReadOnlySheet:va,openReadOnlySheet:xa,openTab:t,openUploadWarningTabSheet:za,openUserFocusSheet:ab,openUserIsPersonalUserSheet:bb,openUserTimezoneSheet:ha,receivedNewMessage:gb,scrollBottomChanged:hb,sendGroupMessage:fb,threadsUpdated:s};}),null);
__d('FantaTypeTab',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={focusCounter:0,id:'',isMinimized:false,openCounter:0};h=babelHelpers.inherits(k,c('immutable').Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('FantaTypeTabGroup',['FantaConst','immutable','MercuryConfig'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={allowedRaisedTabs:c('FantaConst').DEFAULT_ALLOWED_RAISED_TABS,focusedTabID:null,tabs:c('immutable').Map({}),updatedTime:0};h=babelHelpers.inherits(k,c('immutable').Record(j));i=h&&h.prototype;k.prototype.getRaisedandUnraisedTabs=function(){var l=void 0,m=void 0;if(c('MercuryConfig').FantaTabOrdering){m=function q(r){return r.openCounter*-1;};l=function q(r){return r.focusCounter*-1;};}else{m=function q(r){return r.openCounter;};l=function q(r){return r.focusCounter*-1;};}var n=this.tabs.sortBy(l),o=n.slice(this.allowedRaisedTabs),p=n.take(this.allowedRaisedTabs).sortBy(m);return {raisedTabs:p,unraisedTabs:o};};function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('FantaReducersTabs',['EventProfiler','FantaConst','FantaMessageActions','FantaTabActions','FantaTypeTab','FantaTypeTabGroup','LogHistory','PinnedConversationNubsConfig','URI','isWebMessengerURI'],(function a(b,c,d,e,f,g){'use strict';var h=c('FantaMessageActions').Types,i=c('FantaTabActions').Types,j='tab_',k=c('LogHistory').getInstance('fanta_tabs'),l=1,m=1,n=1;function o(ka,la){switch(la.type){case i.OPEN_TAB:case i.OPEN_TAB_WITH_INTERSTITIAL_DATA:k.debug(la.type,JSON.stringify({id:la.tabID}));if(m===1)c('EventProfiler').tagCurrentActiveInteractionsAs('FirstChatTabOpen');return v(ka,la.tabID||j+n++,true);}return ka;}function p(ka,la){switch(la.type){case i.REPLACE_TAB:var ma=la.tabID,na=la.newTabID,oa=ka.tabGroup,pa=oa.tabs,qa=pa.get(ma);k.debug(la.type,JSON.stringify({id:ma,isExisting:!!qa,newID:na}));if(qa){var ra=qa.id===ka.tabGroup.focusedTabID;ka=ka.setIn(['tabGroup','tabs',na],qa.merge({id:na})).deleteIn(['tabGroup','tabs',ma]);return v(ka,na,ra,true);}return v(ka,na);}return ka;}function q(ka,la){switch(la.type){case i.MINIMIZE_TAB:return w(ka,la.tabID,true);}return ka;}function r(ka,la){switch(la.type){case i.UNMINIMIZE_TAB:return w(ka,la.tabID,false);}return ka;}function s(ka,la){switch(la.type){case i.FOCUS_TAB:var ma=la.tabID;return ca(ka,ma);}return ka;}function t(ka,la){switch(la.type){case i.BLUR_TAB:return da(ka,la.tabID);}return ka;}function u(ka,la){switch(la.type){case h.RECEIVED_NEW_MESSAGE:var ma=la.tabID,na=ka.tabGroup.tabs.get(ma);k.debug(la.type,JSON.stringify({id:ma,isOpen:!!na}));if(!na){var oa=ka.tabGroup.focusedTabID;ka=v(ka,ma,false);var pa=c('URI').getNextURI();if(c('isWebMessengerURI')(pa)){return ka=w(ka,ma,true);}else if(oa)return ca(ka,oa);}}return ka;}function v(ka,la,ma,na){var oa=ka.tabGroup,pa=oa.tabs,qa=pa.get(la);if(!qa){qa=new (c('FantaTypeTab'))({id:la,focusCounter:l,openCounter:m++});ka=ka.setIn(['tabGroup','tabs',la],qa);}else if(qa.isMinimized&&ma)ka=w(ka,la,false);if(ma)return ca(ka,la);return ka;}function w(ka,la,ma){var na=ka.tabGroup,oa=na.tabs.get(la);if(oa)ka=ka.mergeIn(['tabGroup','tabs',la],{isMinimized:ma});return ka;}function x(ka,la){switch(la.type){case i.MINIMIZE_ALL_TABS:for(var ma=ka.tabGroup.tabs.keys(),na=Array.isArray(ma),oa=0,ma=na?ma:ma[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var pa;if(na){if(oa>=ma.length)break;pa=ma[oa++];}else{oa=ma.next();if(oa.done)break;pa=oa.value;}var qa=pa;ka=w(ka,qa,true);}return ka;}return ka;}function y(ka,la){switch(la.type){case i.CLOSE_TAB:case i.DELETE_TAB:var ma=la.tabID;k.debug(la.type,JSON.stringify({id:ma}));return z(ka,ma);}return ka;}function z(ka,la){ka=da(ka,la);return ka.deleteIn(['tabGroup','tabs',la]);}function aa(ka,la){switch(la.type){case i.CLOSE_ALL_TABS:k.debug(la.type);ka=da(ka,ka.tabGroup.focusedTabID);return ka.setIn(['tabGroup','tabs'],ka.tabGroup.tabs.clear());}return ka;}function ba(ka,la){switch(la.type){case i.CLOSE_AND_TAB_NEXT:k.debug(la.type,JSON.stringify({id:la.tabID}));ka=z(ka,la.tabID);return ia(ka);}return ka;}function ca(ka,la){var ma=arguments.length<=2||arguments[2]===undefined?false:arguments[2],na=ka.tabGroup,oa=na.tabs.get(la);if(oa)ka=ka.mergeIn(['tabGroup','tabs',la],{focusCounter:l++});var pa=ma?null:la;ka=ka.mergeIn(['tabGroup'],{focusedTabID:pa});return ka;}function da(ka,la){if(ka.tabGroup.focusedTabID===la)return ka.mergeIn(['tabGroup'],{focusedTabID:null});return ka;}function ea(ka,la){switch(la.type){case i.SET_ALLOWED_RAISED_TABS:var ma=la.allowedRaisedTabs;if(ma!==ka.tabGroup.allowedRaisedTabs)k.debug(la.type,JSON.stringify({count:ma}));return fa(ka,ma);}return ka;}function fa(ka){var la=arguments.length<=1||arguments[1]===undefined?c('FantaConst').DEFAULT_ALLOWED_RAISED_TABS:arguments[1];if(la===ka.tabGroup.allowedRaisedTabs)return ka;if(!c('PinnedConversationNubsConfig').chatTabTypingPriority)la=Math.max(1,la);return ka.mergeIn(['tabGroup'],{allowedRaisedTabs:la});}function ga(ka,la){switch(la.type){case i.LOAD_FROM_DATA:var ma=ka.tabGroup,na=la.tabData,oa=ma.updatedTime;if(oa>=na.updatedTime||na.updatedTime===undefined)return ka;ka=fa(ka.set('tabGroup',new (c('FantaTypeTabGroup'))()),ma.allowedRaisedTabs);var pa=[];na.tabs.sort(function(qa,ra){return qa.openCounter-ra.openCounter;}).forEach(function(qa){pa.push(qa.id);ka=v(ka,qa.id,false);if(qa.isMinimized)ka=w(ka,qa.id,qa.isMinimized);});na.tabs.sort(function(qa,ra){return qa.focusCounter-ra.focusCounter;}).forEach(function(qa){ka=ca(ka,qa.id,true);});k.debug(la.type,JSON.stringify({updatedTime:oa,newerTime:na.updatedTime,opened:pa}));ka=na.focusedTabID?ca(ka,na.focusedTabID,true):da(ka);}return ka;}function ha(ka,la){switch(la.type){case i.FOCUS_NEXT_TAB:return ia(ka);}return ka;}function ia(ka){var la=ka.tabGroup.focusedTabID,ma=ka.tabGroup.getRaisedandUnraisedTabs(),na=ma.raisedTabs,oa=na.count();if(oa===0){return ka;}else if(na.count()===1)return ca(ka,na.first().id);var pa=na.skipUntil(function(qa){return qa.id===la;}).rest();if(pa.count()===0){return ca(ka,na.first().id);}else return ca(ka,pa.first().id);}function ja(ka,la){switch(la.type){case i.FOCUS_PREVIOUS_TAB:var ma=ka.tabGroup.focusedTabID,na=ka.tabGroup.getRaisedandUnraisedTabs(),oa=na.raisedTabs;if(oa.count()<2)return ka;var pa=oa.reverse().skipUntil(function(qa){return qa.id===ma;}).rest();if(pa.count()===0){return ca(ka,oa.last().id);}else return ca(ka,pa.first().id);}return ka;}f.exports={blurTab:t,closeAllTabs:aa,closeAndTabNext:ba,closeTab:y,focusNextTab:ha,focusPreviousTab:ja,focusTab:s,loadFromData:ga,minimizAllTabs:x,minimizeTab:q,openTab:o,receivedNewMessage:u,replaceTab:p,setAllowedRaisedTabs:ea,unminimizeTab:r};}),null);
__d('FantaTypeMercuryState',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={tabContents:c('immutable').Map({})};h=babelHelpers.inherits(k,c('immutable').Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('FantaTypeAppState',['FantaTypeMercuryState','FantaTypeTabGroup','immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={tabGroup:new (c('FantaTypeTabGroup'))(),mercury:new (c('FantaTypeMercuryState'))()};h=babelHelpers.inherits(k,c('immutable').Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('FantaAppStore',['FantaDispatcher','FantaReducersCookie','FantaReducersDockCalculator','FantaReducersMercury','FantaReducersMessages','FantaReducersTabs','FantaReducersTabSheets','FantaTypeAppState','FluxReduceStore'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=[].concat(Object.values(c('FantaReducersTabs')),Object.values(c('FantaReducersMercury')),Object.values(c('FantaReducersMessages')),Object.values(c('FantaReducersTabSheets')),Object.values(c('FantaReducersDockCalculator')),Object.values(c('FantaReducersCookie')));h=babelHelpers.inherits(k,c('FluxReduceStore'));i=h&&h.prototype;k.prototype.getInitialState=function(){return new (c('FantaTypeAppState'))();};k.prototype.ignoreReducer=function(l){var m=Object.values(l);j=j.filter(function(n){return !m.find(function(o){return o===n;});});};k.prototype.addReducers=function(l){this.ignoreReducer(l);j=j.concat(Object.values(l));};k.prototype.reduce=function(l,m){return j.reduce(function(n,o){return o(n,m);},l);};function k(){h.apply(this,arguments);}f.exports=new k(c('FantaDispatcher'));}),null);
__d("XGroupCallNuxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/groupcall\/nux\/",{action:{type:"String",required:true}});}),null);
__d('FantaChatHeaderContainer.react',['cx','AsyncRequest','ChatTabHeaderContainer.react','FantaTabActions','FantaTabSheetActions','mercuryBlockedParticipantsRe','MercuryConfig','MercuryIDs','MercuryParticipants','MercuryThreadInfo','MercuryThreads','MessageRequestUtils','MoveToWorkUtils','React','XGroupCallNuxController','emptyFunction','isEmpty'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('MercuryThreads').get(),l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$FantaChatHeaderContainer1=false,this.state={rtcNuxShown:false},this.$FantaChatHeaderContainer6=function(){var s=this.props.threadID;c('FantaTabSheetActions').openAddMoreFriendsSheet(s);}.bind(this),this.$FantaChatHeaderContainer5=function(){var s=this.props.threadID;c('FantaTabSheetActions').openNameConversationSheet(s);}.bind(this),this.$FantaChatHeaderContainer7=function(){var s=this.props.threadID;c('FantaTabSheetActions').openAddMoreFriendsSheet(s);}.bind(this),this.$FantaChatHeaderContainer9=function(){this.props.onClose&&this.props.onClose();}.bind(this),this.$FantaChatHeaderContainer8=function(event){this.$FantaChatHeaderContainer3();var s=event.target;if(!s)return;if(s.getAttribute('role')==='presentation'||s.classList&&(s.classList.contains("_15p6")||s.classList.contains("_2nlt")||s.classList.contains("_14lt"))){event.preventDefault();c('FantaTabActions').minimizeTab(this.props.threadID);}}.bind(this),this.$FantaChatHeaderContainer3=function(){if(this.state.rtcNuxShown&&this.$FantaChatHeaderContainer1){this.setState({rtcNuxShown:false});var s=c('XGroupCallNuxController').getURIBuilder().setString('action','dismiss').getURI();new (c('AsyncRequest'))(s).send();}}.bind(this),o;}m.prototype.shouldComponentUpdate=function(n,o){var p=this.props,q=this.state;return p.viewer!==n.viewer||p.threadID!==n.threadID||p.isLastGroupTab!==n.isLastGroupTab||p.thread!==n.thread||q.rtcNuxShown!==o.rtcNuxShown||p.customColor!==n.customColor;};m.prototype.componentDidMount=function(){this.$FantaChatHeaderContainer1=true;this.$FantaChatHeaderContainer2();};m.prototype.componentWillUnmount=function(){this.$FantaChatHeaderContainer3();this.$FantaChatHeaderContainer1=false;};m.prototype.render=function(){var n=this.props,o=n.isFocused,p=n.thread,q=n.threadID,r=n.viewer,s=n.customColor,t=this.state.rtcNuxShown,u=!!p&&c('MercuryThreadInfo').isMuted(p),v=c('MercuryIDs').getParticipantIDFromFromThreadID(q),w=v?c('MercuryParticipants').getNow(v):null,x=w&&w.is_business_enabled,y=c('MoveToWorkUtils').isViewerEligible()&&c('MercuryIDs').isGroupChat(q)&&p&&this.$FantaChatHeaderContainer4(p.participants),z=p&&c('MercuryThreadInfo').showComposer(p)&&!c('isEmpty')(p.participants)&&!c('MessageRequestUtils').isMessageRequest(p)&&!c('MercuryConfig').ViewerIsReadOnly&&!(c('MercuryConfig').ColdOpenBlock&&(c('MercuryThreadInfo').isColdOpen(p)||c('MercuryThreadInfo').isEmptyLocalThread(p))),aa=p&&c('mercuryBlockedParticipantsRe').get().isMessageBlocked(p),ba=k.isNewEmptyLocalThread(q),ca=p&&p.message_count===0,da={hasMessageBlocked:aa,hasSwitchToWork:y,isBusinessEnabled:x,isEmptyChat:ba,isEmptyConversation:ca,isMuted:u,show:z},ea=s?{color:s}:null;return c('React').createElement('div',{className:"clearfix"+(' '+"fbNubFlyoutTitlebar")+(' '+"titlebar")+(!!s?' '+"_1m34":''),style:ea},c('React').createElement(c('ChatTabHeaderContainer.react'),{additionalMenuProps:da,attachmentsShelf:document.createElement('div'),isActive:o,isRaised:true,isTyping:false,nameConversationFunc:this.$FantaChatHeaderContainer5,rtcNuxShown:t,sheetController:{openAddFriendsSheet:this.$FantaChatHeaderContainer6,openThreadIsMutedTabSheet:c('emptyFunction'),closeThreadIsMutedTabSheet:c('emptyFunction'),openMessageBlockedTabSheet:c('emptyFunction'),closeMessageBlockedTabSheet:c('emptyFunction')},showAddFriend:this.$FantaChatHeaderContainer7,threadID:q,viewer:r,onClick:this.$FantaChatHeaderContainer8,onCloseClick:this.$FantaChatHeaderContainer9,onCloseKeyUp:c('emptyFunction'),onCloseMouseDown:c('emptyFunction'),onFileUploaderMounted:c('emptyFunction'),onFileUploaderSubmit:c('emptyFunction'),onKeyDown:function fa(){},onRTCNuxCloseButtonClick:this.$FantaChatHeaderContainer3,onUpdateAttachmentsShelf:c('emptyFunction'),onUploadFinished:c('emptyFunction')}));};m.prototype.$FantaChatHeaderContainer4=function(n){return n.length>0&&n.every(function(o){var p=c('MercuryParticipants').getNow(o);return !!(p&&p.employee);});};m.prototype.$FantaChatHeaderContainer2=function(){if(this.props.isLastGroupTab){var n=c('XGroupCallNuxController').getURIBuilder().setString('action','should_show').getURI();new (c('AsyncRequest'))(n).setHandler(function(o){var p=o.payload.shouldShow;if(this.$FantaChatHeaderContainer1)this.setState({rtcNuxShown:p});}.bind(this)).send();}};m.propTypes={customColor:l.string,isFocused:l.bool.isRequired,isLastGroupTab:l.bool.isRequired,onClose:l.func.isRequired,thread:l.object,threadID:l.string.isRequired,viewer:l.string.isRequired};f.exports=m;}),null);
__d('FantaConversation.react',['Bootloader','ChatConversation.react','CurrentUser','EventProfiler','MercuryIDs','MessengerHotLikePreviewEvents','React','StickerInterfaces','StickersTypedLogger','SubscriptionsHandler','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.$FantaConversation4=function(m){if(this.props.threadID===m)this.setState({likePreview:null});}.bind(this);this.$FantaConversation5=function(m,n){if(!m)return;new (c('StickersTypedLogger'))().setEvent('click_sticker').setPackid(m).setStickerid(n).log();c('Bootloader').loadModules(["StickersPackInTray","StickersActions","StickersStoreController"],function(o,p,q){o.onIsPackInTray(m,c('StickerInterfaces').MESSAGES,function(r){if(r.in_sticker_tray){p.selectTrayPack(m);p.showStickerFlyout(this.props.threadID);}else q.showStore(m);}.bind(this));}.bind(this),'FantaConversation.react');}.bind(this);this.state={likePreview:null};this.$FantaConversation1=new (c('SubscriptionsHandler'))();}k.prototype.shouldComponentUpdate=function(l,m){var n=this.props,o=this.state;return !n.messages.equals(l.messages)||n.threadID!==l.threadID||n.thread!==l.thread||o.likePreview!==m.likePreview;};k.prototype.componentDidMount=function(){this.$FantaConversation2();this.$FantaConversation3();};k.prototype.componentDidUpdate=function(){this.$FantaConversation3();};k.prototype.componentWillUnmount=function(){this.$FantaConversation1.release();};k.prototype.$FantaConversation3=function(){c('EventProfiler').informManualInteractionTimestamp(['MessageJewelListItem','ChatSideBarLink','FirstChatTabOpen'],true);};k.prototype.$FantaConversation2=function(){this.$FantaConversation1.addSubscriptions(c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').START,function(l,m){if(this.props.threadID===m)this.setState({likePreview:l});}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP,this.$FantaConversation4),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP_EMOJI,this.$FantaConversation4),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').REMOVE,this.$FantaConversation4));};k.prototype.render=function(){var l=this.props.messages,m=this.props,n=m.onLoadMoreMessages,o=m.thread,p=m.threadID,q=this.state.likePreview,r=c('CurrentUser').getID();if(q)l=l.push(q);return o?c('React').createElement(c('ChatConversation.react'),{isCanonical:c('MercuryIDs').isCanonical(p),loadMoreMessages:n,maxBubbleWidth:181-this.props.scrollbarPadding,messages:l,onAttachmentLoad:function(){return this.props.onAttachmentLoad();}.bind(this),onMount:c('emptyFunction'),onStickerClick:this.$FantaConversation5,ref:'conversation',thread:o,threadID:p,viewer:r}):c('React').createElement('div',null);};k.prototype.getMessageList=function(){return this.refs.conversation&&this.refs.conversation.getMessageList();};k.propTypes={messages:j.object.isRequired,onLoadMoreMessages:j.func.isRequired,scrollbarPadding:j.number,thread:j.object,threadID:j.string.isRequired};f.exports=k;}),null);
__d('FantaPageGreetingLoader.react',['cx','BootloadOnRender.react','JSResource','LazyComponent.react','React','getPageIDFromThreadID'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){var l=k.threadID;return c('getPageIDFromThreadID')(l)?c('React').createElement('div',{className:"_av1"},c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('MercuryChatTabPagesGreetingContainer.react').__setRef('FantaPageGreetingLoader.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{threadID:l})})):null;};f.exports=i;}),null);
__d('MercuryCamQuickReply.react',['cx','fbt','BootloadedComponent.react','JSResource','MercuryIDs','MercuryThreads','MessengerQuickCamOrigins','React','XUISpinner.react','convertMIGColorToFIGColor'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MercuryThreads').get(),m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;n.prototype.componentWillUpdate=function(o,p){if(o&&this.props.lastMessage!==o.lastMessage&&this.props.camQuickReplyWillShow)this.props.camQuickReplyWillShow();};n.prototype.componentDidUpdate=function(o,p){if(o&&this.props.lastMessage!==o.lastMessage&&this.props.camQuickReplyDidShow)this.props.camQuickReplyDidShow();};n.prototype.render=function(){var o=this.props.lastMessage,p=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer);if(!(o&&o.message_source&&o.author!==p&&o.message_source==='camera'))return null;var q=l.getThreadMetaNow(this.props.threadID),r=q?c('convertMIGColorToFIGColor')(q.custom_color):null,s=c('React').createElement('div',{className:"_zdf",style:r&&{color:r}},i._("Enviar respuesta con foto"));return c('React').createElement('div',{className:"_zdg"},c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('MessengerQuickCamButtonHTML5.react').__setRef('MercuryCamQuickReply.react'),bootloadPlaceholder:c('React').createElement(c('XUISpinner.react'),{className:"_5h-9"}),className:"_5yhk"+(' '+"_6gb"),location:c('MessengerQuickCamOrigins').CHAT_TAB,threadID:this.props.threadID,viewer:this.props.viewer,textChild:s}));};function n(){j.apply(this,arguments);}n.propTypes={camQuickReplyWillShow:m.func,camQuickReplyDidShow:m.func,lastMessage:m.object,threadID:m.string.isRequired,viewer:m.string.isRequired};f.exports=n;}),null);
__d('MercuryIndicatorController',['fbt','ArbiterMixin','DOM','MercuryActionType','MercuryDelayedRoger','MercuryIDs','MercuryMessageSourceTags','MercuryParticipants','mercuryRogerRe','MercurySourceType','MercuryThreads','MercuryTypingReceiver','MercuryViewer','WorkModeConfig','arrayContains','formatDate','removeFromArray'],(function a(b,c,d,e,f,g,h){var i=c('MercuryDelayedRoger').get(),j=c('mercuryRogerRe').get(),k=c('MercuryThreads').get(),l=c('MercuryTypingReceiver').get(),m=[];function n(o){this._threadID=o;this._canonicalUser=c('MercuryIDs').getUserIDFromThreadID(o);m.push(this);}Object.assign(n.prototype,c('ArbiterMixin'),{destroy:function o(){c('removeFromArray')(m,this);},setLastMessage:function o(p){this._lastMsg=p;this._handleStateChange();},_informStateChanged:function o(p){if(p.activity=='none'&&this._currentActivity=='none')return;if(this._lastMsg&&this._lastMsg.author&&c('MercuryViewer').isViewer(this._lastMsg.author))p.self_authored=true;this._currentActivity=p.activity;this.inform('state-changed',p);},_notifySentFrom:function o(){var p,q,r=this._lastMsg.source_tags||this._lastMsg.tags||[];if(c('arrayContains')(r,c('MercuryMessageSourceTags').MESSENGER)){if(!c('WorkModeConfig').is_work_user){p=c('DOM').create('a',{href:'/mobile/messenger','class':'fcg',target:'_blank'},h._("Enviado por Messenger"));}else p=c('DOM').create('a',{href:'https://www.facebook.com/workplace/mobile/','class':'fcg',target:'_blank'},h._("Sent from Work Chat"));q='sentFromMobile';}else if(c('arrayContains')(r,c('MercuryMessageSourceTags').MOBILE)){var s=c('WorkModeConfig').is_work_user?'/workplace/mobile':'/mobile';p=c('DOM').create('a',{href:s,'class':'fcg',target:'_blank'},h._("Enviado por m\u00f3vil"));q='sentFromMobile';}else if(c('arrayContains')(r,c('MercuryMessageSourceTags').EMAIL)){p=h._("Enviado por correo electr\u00f3nico");q='sentFromEmail';}else if(c('arrayContains')(r,c('MercurySourceType').MESSENGER_COMMERCE)){q='sentFromMessengerCommerce';}else{this._informStateChanged({activity:'none'});return;}this._informStateChanged({activity:q,text:p});},_notifySeenTimestamp:function o(p){var q=Date.now()*.001,r=j.getSeenTimestamp(this._threadID,p[0]),s=r.action*.001,t;if(s<q-518400){t='M j';}else if(s<q-86400){t='D g:ia';}else t='g:ia';this._informStateChanged({activity:'seen-timestamp',text:h._("Visto: {timestamp}",[h.param('timestamp',c('formatDate')(s,t))])});},_nameNormalizer:function o(p){var q;c('MercuryParticipants').getMulti(p,function(r){function s(u){if(r[u]!==undefined&&r[u].short_name){return r[u].short_name.toLowerCase();}else return u;}var t=p.map(s);q=function u(v){var w=s(v),x=t.indexOf(w)!==t.lastIndexOf(w);return x?r[v].name:r[v].short_name;};});return q;},_seenByEveryone:function o(p,q,r){var s=r?r.participants.length:0,t=p.length;if(q.author!=c('MercuryViewer').getID()&&(!r||r.participants.indexOf(q.author)>-1))t++;return s>2&&t>=s-1;},_notifySeenBy:function o(p){var q=this._lastMsg,r=true;c('MercuryParticipants').getMulti(p,function(s){r=false;if(this._lastMsg!=q)return;var t=k.getThreadMetaNow(this._threadID),u=null;if(t&&t.custom_nickname)u=t.custom_nickname;var v=[];for(var w in s){var x=s[w],y=x.short_name;if(u&&u[x.fbid])y=u[x.fbid];v[w]=y;}var z,aa=false;if(this._seenByEveryone(p,q,t)){z={prefix:'Seen by everyone'};}else if(p.length==1){z={prefix:'Seen by ',names:' '+v[p[0]]};}else if(p.length==2){z={prefix:'Seen by ',names:' '+v[p[0]]+', '+v[p[1]]};}else if(p.length==3){z={prefix:'Seen by ',names:' '+v[p[0]]+', '+v[p[1]]+', '+v[p[2]]};}else if(p.length>3){z={prefix:'Seen by ',names:' '+v[p[0]]+', '+v[p[1]]+', '};aa=true;}this._informStateChanged({activity:'seen-by',text:z,seenBy:p,showTooltip:aa});}.bind(this));r&&this._informStateChanged({activity:'none'});},_handleStateChange:function o(){var p=c('MercuryActionType').LOG_MESSAGE;if(!this._lastMsg||this._lastMsg.action_type==p){this._informStateChanged({activity:'none'});return;}if(this._typing&&this._typing.length){this._informStateChanged({activity:'none'});return;}if(this._canonicalUser&&this._lastMsg.author!=c('MercuryViewer').getID()){this._notifySentFrom();return;}var q=i.getSeenBy(this._threadID,true);if(q.length)if(this._canonicalUser){this._notifySeenTimestamp(q);return;}else{this._notifySeenBy(q);return;}this._informStateChanged({activity:'none'});}});l.addRetroactiveListener('state-changed',function(o){m.forEach(function(p){var q=o[p._threadID];if(q!==undefined){p._typing=q;p._handleStateChange();}});});i.subscribe('state-changed',function(o,p){m.forEach(function(q){p[q._threadID]&&q._handleStateChange();});});f.exports=n;}),null);
__d('MercuryLastMessageIndicator.react',['cx','fbt','DOM','MercuryIndicatorController','MessengerTextWithEmoticons.react','MercuryParticipants','React','ReactDOM','TooltipData','emptyFunction','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={data:{}},this.getRootClass=function(){var s="_510g"+(this.state.data.self_authored?' '+"_510e":''),t=this.state.data.activity,u=null;if(String(t).startsWith('seen')){u='seen';}else if(t=='typing'){u=this.props.hideTyping?null:t;}else u=t;return c('joinClasses')(s,u,this.props.className);}.bind(this),this.isVisible=function(s,t){s=s||this.props;t=t||this.state;return t.data&&t.data.activity!='none'&&!(s.hideTyping&&t.data.activity=='typing');}.bind(this),this.isSeenBy=function(s,t){s=s||this.props;t=t||this.state;return t.data&&t.data.activity==='seen-by';}.bind(this),this.setText=function(){if(this.state.data.text)c('DOM').setContent(c('ReactDOM').findDOMNode(this.refs.text),this.state.data.text);}.bind(this),this.setTooltip=function(){if(this.state.data.activity==='seen-by'&&this.state.data.showTooltip)c('MercuryParticipants').getMulti(this.state.data.seenBy,function(s){var t=c('DOM').create('div',null,this.state.data.seenBy.map(function(u){return c('DOM').create('div',null,s[u].name);}));c('TooltipData').set(c('DOM').find(c('ReactDOM').findDOMNode(this),'span.more'),t,'above','center');}.bind(this));}.bind(this),this.$MercuryLastMessageIndicator4=function(s){var t=s&&s.text;if(!t)return null;if(!t.names){return i._("Visto por todos");}else{var u=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoji:true,renderEmoticons:true,text:t.names});if(!s.showTooltip){return i._("Visto por {names}",[i.param('names',u)]);}else{var v=this.$MercuryLastMessageIndicator5(s);return i._("Visto por {names}{=num more link}",[i.param('names',u),i.param('=num more link',v)]);}}}.bind(this),this.$MercuryLastMessageIndicator5=function(s){if(!s||!s.text||!s.showTooltip)return null;var t={},u=0;if(s.activity==='seen-by'){var v=null;c('MercuryParticipants').getMulti(s.seenBy,function(x){v=s.seenBy.map(function(y){return x[y].name;}).join('\r\n');u=Object.keys(x).length-2;});t=Object.assign({'data-tooltip-alignh':'center'},c('TooltipData').propsFor(v,'above'));}var w=i._({"*":"{num} m\u00e1s"},[i.param('num',u,[0])]);return c('React').createElement('span',babelHelpers['extends']({className:'more'},t),w);},this.$MercuryLastMessageIndicator1=function(s){this.$MercuryLastMessageIndicator3=new (c('MercuryIndicatorController'))(s.threadID);this.$MercuryLastMessageIndicator6=this.$MercuryLastMessageIndicator3.subscribe('state-changed',function(t,u){return this.setState({data:u});}.bind(this));s.lastMessage&&this.$MercuryLastMessageIndicator3.setLastMessage(s.lastMessage);}.bind(this),this.$MercuryLastMessageIndicator2=function(){this.$MercuryLastMessageIndicator6.unsubscribe();this.$MercuryLastMessageIndicator3.destroy();}.bind(this),o;}m.prototype.componentDidMount=function(){'use strict';this.$MercuryLastMessageIndicator1(this.props);};m.prototype.componentWillReceiveProps=function(n){'use strict';if(n.threadID!=this.props.threadID){this.$MercuryLastMessageIndicator2();this.$MercuryLastMessageIndicator1(n);}else if(n.lastMessage!=this.props.lastMessage)this.$MercuryLastMessageIndicator3.setLastMessage(n.lastMessage);};m.prototype.componentWillUpdate=function(n,o){'use strict';if(this.isVisible(n,o))this.props.indicatorWillShow();};m.prototype.componentDidUpdate=function(){'use strict';if(!this.isVisible())return;if(!this.isSeenBy()){this.setText();this.setTooltip();}this.props.indicatorDidShow();};m.prototype.componentWillUnmount=function(){'use strict';this.$MercuryLastMessageIndicator2();};m.prototype.render=function(){'use strict';if(this.isSeenBy()){var n=this.$MercuryLastMessageIndicator4(this.state.data);return c('React').createElement('div',{className:this.getRootClass()},c('React').createElement('div',{className:"_510h"}),c('React').createElement('span',{className:"_510f"},n));}else return c('React').createElement('div',{className:this.getRootClass()},c('React').createElement('div',{className:"_510h"}),c('React').createElement('span',{className:"_510f",ref:'text'},'\u00A0'));};m.propTypes={hideTyping:l.bool,indicatorWillShow:l.func,indicatorDidShow:l.func,lastMessage:l.object,threadID:l.string.isRequired};m.defaultProps={indicatorWillShow:c('emptyFunction'),indicatorDidShow:c('emptyFunction')};f.exports=m;}),null);
__d('MercuryQuickReply.react',['cx','BootloadedComponent.react','JSResource','MercuryConfig','MercuryIDs','MNOmniMConstants','OmniMStore','React','XUISpinner.react','FluxContainer'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={suggestions:null,omniMPrefs:null},n;}l.getStores=function(){return [c('OmniMStore')];};l.calculateState=function(m,n){return {suggestions:c('OmniMStore').suggestionsForThread(n.threadID),omniMPrefs:c('OmniMStore').prefs()};};l.prototype.componentWillMount=function(){if(this.props.quickReplyWillShow&&this.$MercuryQuickReply1(this.state))this.props.quickReplyWillShow();};l.prototype.componentDidMount=function(){if(this.props.quickReplyDidShow&&this.$MercuryQuickReply1(this.state))this.props.quickReplyDidShow();};l.prototype.componentWillUpdate=function(m,n){if(this.props.quickReplyWillShow&&n&&this.$MercuryQuickReply1(n)&&!this.$MercuryQuickReply1(this.state))this.props.quickReplyWillShow();};l.prototype.componentDidUpdate=function(m,n){if(this.props.quickReplyDidShow&&this.$MercuryQuickReply1(this.state)&&!this.$MercuryQuickReply1(n))this.props.quickReplyDidShow();};l.prototype.render=function(){var m=this.props.lastMessage;if(!m)return null;var n=null,o=null,p=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer),q=this.state.suggestions||{},r=q.quickReplies,s=q.agentSuggestions;if(r&&r.length&&m.author!==p){n=r;o=c('MNOmniMConstants').QUICKREPLIES;}else if(s&&s.length&&c('MercuryConfig').EnableOmniM){n=s;o=c('MNOmniMConstants').OMNIM;}if(!n||!n.length||!n.filter(function(t){return !t.dismissed;}).length)return null;return c('React').createElement('div',{className:"_419m",ref:'quickReply'},c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('MessengerBotsQuickReplyButtonList.react').__setRef('MercuryQuickReply.react'),bootloadPlaceholder:c('React').createElement(c('XUISpinner.react'),{className:"_5h-9"}),omniMPrefs:this.state.omniMPrefs,options:n,threadID:m.thread_id,source:o}));};l.prototype.$MercuryQuickReply1=function(m){var n=m.suggestions||{},o=n.quickReplies,p=n.agentSuggestions,q=o&&o.length,r=p&&p.length&&c('MercuryConfig').EnableOmniM;return !!(q||r);};l.propTypes={quickReplyWillShow:k.func,quickReplyDidShow:k.func,lastMessage:k.object,threadID:k.string.isRequired,viewer:k.string.isRequired};f.exports=c('FluxContainer').create(l,{withProps:true});}),null);
__d('FantaConversationScroller.react',['cx','fbt','Animation','Arbiter','BootloadedComponent.react','ChatTypingIndicators.react','CurrentUser','Event','FantaConversation.react','FantaPageGreetingLoader.react','FantaTabActions','Grid.react','immutable','JSResource','MercuryLastMessageIndicator.react','MercuryAttachment','MercuryCamQuickReply.react','MercuryConfig','MercuryIDs','MercuryQuickReply.react','MercuryThreads','MessengerHotLikePreviewEvents','MessengerVideoAutoplayActions','MessengerVideoAutoplayStore','React','ReactDOM','MercuryShareAttachmentRenderLocations','Scroll','ScrollBoundaryContain','Style','SubscriptionsHandler','XUISpinner.react','clearImmediate','emptyFunction','getElementPosition','isEventSupported','setImmediate','throttle'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MercuryThreads').get(),m=c('Grid.react').GridItem,n=c('React').PropTypes,o=15,p=null,q=20;function r(t){if(p===null){var u=t.firstElementChild;if(u){c('Style').set(t,'overflow','scroll');var v=u.clientWidth;c('Style').set(t,'overflow','hidden');var w=u.clientWidth;p=Math.max(w-v,0);c('Style').set(t,'overflow','');}else p=0;}return p;}j=babelHelpers.inherits(s,c('React').Component);k=j&&j.prototype;function s(t){k.constructor.call(this,t);this.$FantaConversationScroller13=function(u){var v=c('ReactDOM').findDOMNode(this.refs.scrollContainer);if(v){this.$FantaConversationScroller14();if(this.$FantaConversationScroller15()&&!this.$FantaConversationScroller16()&&!this.$FantaConversationScroller3&&!this.props.hasFetchedAll){this.setState({loadingMessages:true});this.props.onLoadMoreMessages();}this.$FantaConversationScroller17();}}.bind(this);this.$FantaConversationScroller18=function(){this.$FantaConversationScroller1=null;c('FantaTabActions').scrollBottomChanged(this.props.threadID,this.$FantaConversationScroller6,this.$FantaConversationScroller19);}.bind(this);this.$FantaConversationScroller19=function(){this.$FantaConversationScroller20(false);this.$FantaConversationScroller12();}.bind(this);this.state={loadingMessages:!l.isEmptyLocalThread(t.threadID),scrollbarPadding:p===null?o:p};this.$FantaConversationScroller6=true;this.$FantaConversationScroller7=new (c('SubscriptionsHandler'))();}s.prototype.shouldComponentUpdate=function(t,u){var v=this.props,w=this.state;return v.hasFetchedAll!==t.hasFetchedAll||v.isFocused!==t.isFocused||!v.messages.equals(t.messages)||v.showContextBanner!==t.showContextBanner||v.thread!==t.thread||v.threadID!==t.threadID||w.loadingMessages!==u.loadingMessages;};s.prototype.componentDidMount=function(){this.$FantaConversationScroller8();this.$FantaConversationScroller9();this.$FantaConversationScroller10();c('MessengerVideoAutoplayActions').updateStore(this.props.threadID,this.$FantaConversationScroller11());this.setState({scrollbarPadding:r(this.refs.scrollContainer)});};s.prototype.componentDidUpdate=function(t){this.$FantaConversationScroller10();if(this.$FantaConversationScroller3){var u=c('ReactDOM').findDOMNode(this.refs.scrollContainer),v=this.$FantaConversationScroller3||0,w=u.scrollHeight-v;this.scrollToPosition(w,false);this.$FantaConversationScroller3=null;}if(!t.messages.equals(this.props.messages)){c('MessengerVideoAutoplayActions').updateStore(this.props.threadID,this.$FantaConversationScroller11());var x=t.messages.last(),y=this.props.messages.last();if(x!==y&&y&&y.author){var z=c('MercuryIDs').getUserIDFromParticipantID(y.author);if(z===c('CurrentUser').getID()){this.scrollToBottom(false);this.$FantaConversationScroller12();}}}};s.prototype.componentWillUnmount=function(){this.$FantaConversationScroller1&&c('clearImmediate')(this.$FantaConversationScroller1);this.$FantaConversationScroller7.release();};s.prototype.componentWillReceiveProps=function(t){if(this.state.loadingMessages&&t.messages.size>0&&!t.messages.equals(this.props.messages)||t.hasFetchedAll||t.showContextBanner){this.setState({loadingMessages:false});var u=c('ReactDOM').findDOMNode(this.refs.scrollContainer),v=u.scrollHeight,w=c('Scroll').getTop(u);this.$FantaConversationScroller3=v-w;}};s.prototype.$FantaConversationScroller10=function(){var t=arguments.length<=0||arguments[0]===undefined?false:arguments[0];if(this.$FantaConversationScroller6)this.scrollToBottom(t);};s.prototype.$FantaConversationScroller17=function(){var t=this.props.threadID,u=c('ReactDOM').findDOMNode(this.refs.scrollContainer),v=u.getBoundingClientRect(),w=this.refs.conversation?this.refs.conversation.getMessageList():null;if(!w||!v)return;var x=[],y=c('MessengerVideoAutoplayStore').getMessageIDs(t),z=y||this.$FantaConversationScroller11()||c('immutable').List();z.map(function(aa){var ba=c('MercuryAttachment').getVideoElem(aa,w);if(ba)x.push([aa,ba.getBoundingClientRect()]);});if(x.length)c('MessengerVideoAutoplayActions').onScroll(t,y?null:z,c('immutable').Map(x),v);};s.prototype.$FantaConversationScroller11=function(){return this.props.messages.filter(function(t){return c('MercuryAttachment').isSingleVideoAttachment(t)||c('MercuryAttachment').isSharedVideoAttachmentMessage(t);}).reverse().map(function(t){return t.message_id;});};s.prototype.scrollToBottom=function(t){var u=c('ReactDOM').findDOMNode(this.refs.scrollContainer);if(u)this.scrollToPosition(u.scrollHeight,t);};s.prototype.scrollToPosition=function(t,u){var v=c('ReactDOM').findDOMNode(this.refs.scrollContainer);this.$FantaConversationScroller5&&this.$FantaConversationScroller5.stop();if(u){this.$FantaConversationScroller5=new (c('Animation'))(v).to('scrollTop',t).ease(c('Animation').ease.end).duration(400).go();}else c('Scroll').setTop(v,t);};s.prototype.$FantaConversationScroller16=function(t){var u=c('ReactDOM').findDOMNode(this.refs.scrollContainer);t=t===0?0:t||q;return c('Scroll').getTop(u)+u.clientHeight>=u.scrollHeight-t;};s.prototype.$FantaConversationScroller15=function(){var t=c('ReactDOM').findDOMNode(this.refs.scrollContainer);return c('Scroll').getTop(t)<t.clientHeight;};s.prototype.$FantaConversationScroller12=function(){var t=this.$FantaConversationScroller6;if(this.$FantaConversationScroller16()){this.$FantaConversationScroller6=true;}else this.$FantaConversationScroller6=false;if(t!==this.$FantaConversationScroller6)this.$FantaConversationScroller1=c('setImmediate')(this.$FantaConversationScroller18);};s.prototype.$FantaConversationScroller8=function(){var t=c('ReactDOM').findDOMNode(this.refs.scrollContainer);if(!t)return;var u=c('isEventSupported')('mousewheel')?'mousewheel':c('isEventSupported')('wheel')?'wheel':'DOMMouseScroll',v=function(){this.$FantaConversationScroller12();}.bind(this),w=function z(){t.addEventListener(u,v,{passive:true});},x=function z(){t.removeEventListener(u,v,{passive:true});};this.$FantaConversationScroller7.addSubscriptions(c('Arbiter').subscribe('overflow-applied-to-body',function(){return this.$FantaConversationScroller10();}.bind(this)),c('Event').listen(t,'mousedown',v),c('Event').listen(t,'mouseup',v),c('Event').listen(t,'mouseenter',w),c('Event').listen(t,'mouseleave',x),{cancel:x},c('Event').listen(t,'scroll',c('throttle')(this.$FantaConversationScroller13,50)));var y=c('ScrollBoundaryContain').applyToElem(t);this.$FantaConversationScroller7.addSubscriptions(y);};s.prototype.$FantaConversationScroller9=function(){this.$FantaConversationScroller7.addSubscriptions(c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').START,function(t,u){if(this.props.threadID===u){this.$FantaConversationScroller20(false);clearInterval(this.$FantaConversationScroller4);this.$FantaConversationScroller4=setInterval(function(){this.$FantaConversationScroller20(false);}.bind(this),50);}}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').FINISH_ANIMATION,function(t){clearInterval(this.$FantaConversationScroller4);}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').FINISH_EMOJI_ANIMATION,function(t){clearInterval(this.$FantaConversationScroller4);}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').REMOVE,function(t){if(this.props.threadID===t)clearInterval(this.$FantaConversationScroller4);}.bind(this)));};s.prototype.render=function(){var t=this.props,u=t.hasFetchedAll,v=t.messages,w=t.showContextBanner,x=t.thread,y=t.threadID,z=c('CurrentUser').getID(),aa=c('MercuryConfig').ShowContextBanner,ba=aa&&(l.isEmptyLocalThread(y)||u||w),ca=!c('MercuryConfig').ChatSeenHeadsEnabled,da=this.state.loadingMessages||!x?c('React').createElement(c('XUISpinner.react'),{background:'light',className:"loading",size:'small'}):null;return c('React').createElement('div',{className:"_2v5j"},c('React').createElement('div',{className:'fbNubFlyoutBody scrollable',onClick:function(ea){if(ea.target&&ea.target.classList&&ea.target.classList.contains("_5wd4"))this.props.onFocus&&this.props.onFocus();}.bind(this),ref:'scrollContainer',role:'button',tabIndex:'0'},c('React').createElement('div',{className:'fbNubFlyoutBodyContent'},c('React').createElement(c('FantaPageGreetingLoader.react'),{threadID:y}),c('React').createElement(c('Grid.react'),{className:'conversationContainer',role:'log',cols:1},c('React').createElement(m,{alignv:'bottom'},c('React').createElement('div',{className:'accessible_elem'},i._("Inicio de la conversaci\u00f3n de chat")),ba?c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('MessengerContextBannerContainer.react').__setRef('FantaConversationScroller.react'),isContinuation:false,location:c('MercuryShareAttachmentRenderLocations').CHAT,viewer:z,threadID:y}):null,da,c('React').createElement('div',{style:v.size>0?{height:'176px'}:da?{height:'168px'}:{height:'192px'}},c('React').createElement(c('FantaConversation.react'),babelHelpers['extends']({onAttachmentLoad:function(){return this.$FantaConversationScroller10();}.bind(this),scrollbarPadding:this.state.scrollbarPadding,ref:'conversation'},this.props)),c('MercuryConfig').WebCamQuickReply?c('React').createElement(c('MercuryCamQuickReply.react'),{camQuickReplyWillShow:c('emptyFunction'),camQuickReplyDidShow:function(){return this.$FantaConversationScroller10(true);}.bind(this),lastMessage:v.size>0?v.last():undefined,threadID:y,viewer:z}):null,c('React').createElement(c('ChatTypingIndicators.react'),{threadID:y,indicatorsWillShow:c('emptyFunction'),indicatorsDidShow:function(){return this.$FantaConversationScroller10(true);}.bind(this),viewer:z}),ca?c('React').createElement(c('MercuryLastMessageIndicator.react'),{hideTyping:true,indicatorDidShow:function(){return this.$FantaConversationScroller10(true);}.bind(this),indicatorWillShow:c('emptyFunction'),lastMessage:v.size>0?v.last():null,threadID:y}):null,c('React').createElement(c('MercuryQuickReply.react'),{lastMessage:v.size>0?v.last():undefined,threadID:y,quickReplyWillShow:c('emptyFunction'),quickReplyDidShow:function(){return this.$FantaConversationScroller10(true);}.bind(this),viewer:z})),c('React').createElement('div',{className:'accessible_elem'},i._("Fin de la conversaci\u00f3n de chat")))))));};s.prototype.$FantaConversationScroller14=function(){var t=c('ReactDOM').findDOMNode(this.refs.scrollContainer),u=c('getElementPosition')(t);c('Arbiter').inform('chatScrolled/'+this.props.threadID,{scrollTop:c('Scroll').getTop(t),top:u.y,viewHeight:u.height});};s.prototype.$FantaConversationScroller20=function(t){var u=c('ReactDOM').findDOMNode(this.refs.scrollContainer);if(u)this.$FantaConversationScroller21(u.scrollHeight,t);};s.prototype.$FantaConversationScroller21=function(t,u){var v=c('ReactDOM').findDOMNode(this.refs.scrollContainer);this.$FantaConversationScroller5&&this.$FantaConversationScroller5.stop();if(u===true){this.$FantaConversationScroller5=new (c('Animation'))(v).to('scrollTop',t).ease(c('Animation').ease.end).duration(400).go();}else c('Scroll').setTop(v,t);};s.propTypes={hasFetchedAll:n.bool.isRequired,isFocused:n.bool.isRequired,messages:n.object.isRequired,onFocus:n.func,onLoadMoreMessages:n.func.isRequired,showContextBanner:n.bool,thread:n.object,threadID:n.string.isRequired};f.exports=s;}),null);
__d('FantaDragAndDropRow.react',['cx','fbt','ix','Bootloader','Image.react','MessengerEnvironment','MercuryAttachment','React','XUICloseButton.react','XUISpinner.react','emptyFunction','ifRequired','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=l.constructor).call.apply(n,[this].concat(q)),this.$FantaDragAndDropRow1=function(){var s=this.props,t=s.threadID,u=s.fileData;c('MessengerEnvironment').messengerui?c('ifRequired')('MessengerActions',function(v){v.cancelFileUpload(t,u.id);},function(){c('Bootloader').loadModules(["MessengerActions"],function(v){v.cancelFileUpload(t,u.id);},'FantaDragAndDropRow.react');}):c('ifRequired')('FantaMessageActions',function(v){v.cancelFileUpload(t,u.id);},function(){c('Bootloader').loadModules(["FantaMessageActions"],function(v){v.cancelFileUpload(t,u.id);},'FantaDragAndDropRow.react');});}.bind(this),o;}m.prototype.componentDidMount=function(){c('MessengerEnvironment').messengerui?c('Bootloader').loadModules(["MessengerActions"],c('emptyFunction'),'FantaDragAndDropRow.react'):c('Bootloader').loadModules(["FantaMessageActions"],c('emptyFunction'),'FantaDragAndDropRow.react');};m.prototype.render=function(){var n=this.props,o=n.fileData,p=n.isUploaded,q=o.file,r='';if(q.type)r=c('MercuryAttachment').getAttachIconClassByMime(q.type);var s=c('joinClasses')(r,"_3tn"),t=p?'done':'',u=c('joinClasses')(t,"_2qh _2qe uploadFileRow");return c('React').createElement('div',{className:u},c('React').createElement(c('XUISpinner.react'),{className:"_2qf"}),c('React').createElement(c('XUICloseButton.react'),{'aria-label':i._("Eliminar archivo"),className:"_2qg",shade:'dark',size:'small',onClick:this.$FantaDragAndDropRow1}),c('React').createElement('div',{className:"_4-te"},c('React').createElement('span',{className:s},c('React').createElement(c('Image.react'),{src:j("86988")})),q.name));};f.exports=m;}),null);
__d('FantaDragAndDrop.react',['Bootloader','BootloadOnRender.react','FantaDragAndDropRow.react','MessengerEnvironment','JSResource','LazyComponent.react','MercuryShareAttachmentRenderLocations','React','emptyFunction','ifRequired'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=960,k=c('React').PropTypes;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.$FantaDragAndDrop3=function(r){this.$FantaDragAndDrop7(function(s){s.removeSharePreview(r);});}.bind(this),this.$FantaDragAndDrop4=function(r,s){this.$FantaDragAndDrop7(function(t){t.loadedShareData(r,s);});}.bind(this),this.$FantaDragAndDrop5=function(r){this.$FantaDragAndDrop7(function(s){s.loadingShareData(r);});}.bind(this),n;}l.prototype.componentDidMount=function(){c('MessengerEnvironment').messengerui?c('Bootloader').loadModules(["MessengerActions"],c('emptyFunction'),'FantaDragAndDrop.react'):c('Bootloader').loadModules(["FantaMessageActions"],c('emptyFunction'),'FantaDragAndDrop.react');};l.prototype.shouldComponentUpdate=function(m){var n=this.props;return n.threadID!==m.threadID||!!(!n.uploadingFiles&&m.uploadingFiles)||!!(n.uploadingFiles&&m.uploadingFiles&&!n.uploadingFiles.equals(m.uploadingFiles))||!!(!n.uploadedFiles&&m.uploadedFiles)||!!(n.uploadedFiles&&m.uploadedFiles&&!n.uploadedFiles.equals(m.uploadedFiles))||!!(!n.sharePreview&&m.sharePreview)||!!(n.sharePreview&&m.sharePreview&&!n.sharePreview.equals(m.sharePreview));};l.prototype.render=function(){var m=this.props,n=m.uploadedFiles,o=m.uploadingFiles,p=m.sharePreview,q=m.threadID,r=p||{},s=r.share,t=r.uri;return c('React').createElement('div',{className:'fbNubFlyoutAttachments'},c('React').createElement('div',{className:'chatAttachmentShelf'},s||t?c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('MercurySharePreview.react').__setRef('FantaDragAndDrop.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{onClose:this.$FantaDragAndDrop3,onLoaded:this.$FantaDragAndDrop4,onLoading:this.$FantaDragAndDrop5,threadID:q,imageSize:{width:j,height:j},location:c('MercuryShareAttachmentRenderLocations').CHAT_PREVIEW,share:s,uri:t})}):null,c('React').createElement('div',{ref:function(u){this.$FantaDragAndDrop1=u;}.bind(this)},this.$FantaDragAndDrop6(o,false),this.$FantaDragAndDrop6(n,true))));};l.prototype.$FantaDragAndDrop7=function(m){c('MessengerEnvironment').messengerui?c('ifRequired')('MessengerActions',function(n){m(n);},function(){c('Bootloader').loadModules(["MessengerActions"],function(n){m(n);},'FantaDragAndDrop.react');}):c('ifRequired')('FantaMessageActions',function(n){m(n);},function(){c('Bootloader').loadModules(["FantaMessageActions"],function(n){m(n);},'FantaDragAndDrop.react');});};l.prototype.$FantaDragAndDrop6=function(m,n){var o=this.props.threadID;return m&&m.map(function(p){return c('React').createElement(c('FantaDragAndDropRow.react'),{fileData:p,isUploaded:n,key:n?'uped-'+p.id:'uping-'+p.id,threadID:o});}).toArray();};l.propTypes={threadID:k.string.isRequired,uploadedFiles:k.object,uploadingFiles:k.object};f.exports=l;}),null);
__d('FantaMercuryTabOverflowBootloader.react',['BootloadOnRender.react','JSResource','LazyComponent.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{items:this.props.items}),loader:c('JSResource')('FantaMercuryTabOverflow.react').__setRef('FantaMercuryTabOverflowBootloader.react'),placeholder:c('React').createElement('div',null)});};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('FantaTab.react',['cx','EventProfiler','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.componentDidMount=function(){c('EventProfiler').informManualInteractionTimestamp(['MessageJewelListItem','ChatSideBarLink','FirstChatTabOpen'],true);};k.prototype.render=function(){var l=this.props,m=l.isFocused,n=l.isLastTab,o=l.isLastTabOfType,p=l.MainComponent,q=l.MinimizedComponent,r=l.raisedTabCount,s=l.tab,t=l.tabContent,u=s.isMinimized?q:p,v=s.id+(s.isMinimized?'-minimized':'-maximized');return c('React').createElement('div',{className:"_5qi9"+(' '+"_5qib")+(this.props.isFocused?' '+"_5qic":'')+(s.isMinimized?' '+"_3001":'')},c('React').createElement(u,{isFocused:m,isLastTab:n,isLastTabOfType:o,key:v,raisedTabCount:r,tab:s,tabContent:t}));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('FantaTabGroup.react',['cx','FantaTab.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.shouldComponentUpdate=function(m){return !this.props.tabGroup.equals(m.tabGroup)||!!(!this.props.tabContents&&m.tabContents)||!!(this.props.tabContents&&m.tabContents&&!this.props.tabContents.equals(m.tabContents));};l.prototype.render=function(){var m=this.props,n=m.isLastOfTypeChecker,o=m.MainComponent,p=m.MinimizedComponent,q=m.OverflowComponent,r=m.tabContents,s=m.tabGroup,t=s.focusedTabID,u=s.getRaisedandUnraisedTabs(),v=u.raisedTabs,w=u.unraisedTabs,x=void 0;if(n)x=v.findLastKey(function(aa){return n(aa)&&aa.id;});var y=s.allowedRaisedTabs===0?null:this.$FantaTabGroup1(w,q),z=v.count();return c('React').createElement('div',{className:"_59v1"},y,v.map(function(aa){return c('React').createElement(c('FantaTab.react'),{isFocused:aa.id===t,isLastTab:aa===v.last(),isLastTabOfType:aa.id===x,key:aa.id,MainComponent:o,MinimizedComponent:p,raisedTabCount:z,tab:aa,tabContent:r&&r.get(aa.id)});}).toArray());};l.prototype.$FantaTabGroup1=function(m,n){if(!m.isEmpty())return c('React').createElement('div',{className:"_1kws"},c('React').createElement(n,{items:m}));return null;};function l(){i.apply(this,arguments);}l.propTypes={MainComponent:k.func.isRequired,MinimizedComponent:k.func.isRequired,OverflowComponent:k.func.isRequired,tabContents:k.object,tabGroup:k.object.isRequired};f.exports=l;}),null);
__d('FantaPageComposerNullState.react',['BootloadOnRender.react','JSResource','LazyComponent.react','MNCommercePostbackCTADataManager','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.$FantaPageComposerNullState1=function(){var p=this.props,q=p.nullPageID,r=p.nullPageTitle,s=p.threadID;c('MNCommercePostbackCTADataManager').sendAndConfirm(q,r,s);}.bind(this),l;}j.prototype.render=function(){var k=this.props.nullPageTitle;return c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('ChatPageComposerNullState.react').__setRef('FantaPageComposerNullState.react'),placeholder:c('React').createElement('div',{style:{height:27}}),component:c('React').createElement(c('LazyComponent.react'),{title:k,onClick:this.$FantaPageComposerNullState1})});};f.exports=j;}),null);
__d('FantaPendingActions.react',['Bootloader','BootloadOnRender.react','FantaTabActions','JSResource','LazyComponent.react','MercuryThreadActions','MessageRequestUtils','MessagingTag','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('MercuryThreadActions').get();h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$FantaPendingActions1=function(){var q=this.props,r=q.thread,s=q.threadID,t=!!r&&c('MessageRequestUtils').isFiltered(r);if(t){c('Bootloader').loadModules(["WebMessengerDeleteThreadDialog"],function(u){u.show(s,function(){return c('FantaTabActions').closeTab(s);});},'FantaPendingActions.react');}else{j.changeFolder(s,c('MessagingTag').OTHER);c('FantaTabActions').closeTab(s);}}.bind(this),this.$FantaPendingActions2=function(){j.changeFolder(this.props.threadID,c('MessagingTag').INBOX);}.bind(this),m;}k.prototype.render=function(){var l=this.props.thread,m=!!l&&c('MessageRequestUtils').isFiltered(l);return c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('ChatPendingActions.react').__setRef('FantaPendingActions.react'),placeholder:c('React').createElement('div',{style:{height:27}}),component:c('React').createElement(c('LazyComponent.react'),{isFiltered:m,onDeleteClick:this.$FantaPendingActions1,onReplyClick:this.$FantaPendingActions2})});};f.exports=k;}),null);
__d('FantaTabComposer.react',['fbt','ChatTabComposerContainer.react','FantaTabActions','Keys','LogHistory','MercuryIDs','MercuryThreadIDMap','MercuryThreads','PhotosUploadWaterfall','React','TypingDetectorController','WaterfallIDGenerator','WorkFileUploadsGating','emptyFunction'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('MercuryThreadIDMap').get(),l=c('MercuryThreads').get(),m=c('LogHistory').getInstance('chat_tab_view'),n=c('React').PropTypes,o=/^\s*$/;i=babelHelpers.inherits(p,c('React').Component);j=i&&i.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=j.constructor).call.apply(q,[this].concat(t)),this.$FantaTabComposer3=c('WaterfallIDGenerator').generate(),this.$FantaTabComposer4=function(v,w){var x=this.props.threadID;k.getServerIDFromClientID(x,function(y){this.$FantaTabComposer2=new (c('TypingDetectorController'))(c('MercuryIDs').getUserIDFromThreadID(x),v,'mercury-chat',null,y,w);}.bind(this));}.bind(this),this.$FantaTabComposer14=function(v){this.$FantaTabComposer15(c('PhotosUploadWaterfall').UPLOAD_START,v);this.props.onSendPhoto(v,this.$FantaTabComposer1.onSend);this.$FantaTabComposer16('submit',v);this.focusInput();}.bind(this),this.$FantaTabComposer8=function(v){this.$FantaTabComposer15(c('PhotosUploadWaterfall').CLIENT_ERROR,v);this.$FantaTabComposer16('failed',v);}.bind(this),this.$FantaTabComposer10=function(v){this.$FantaTabComposer15(c('PhotosUploadWaterfall').CLIENT_ERROR,v);this.$FantaTabComposer16('failed',v);}.bind(this),this.$FantaTabComposer12=function(v){this.$FantaTabComposer15(c('PhotosUploadWaterfall').CANCEL_DURING_UPLOAD,v);this.$FantaTabComposer16('canceled',v);}.bind(this),this.$FantaTabComposer13=function(v){this.$FantaTabComposer15(c('PhotosUploadWaterfall').ALL_UPLOADS_DONE,v);this.$FantaTabComposer16('completed',v);var w=v.image_ids.length||v.attachments.length;this.$FantaTabComposer17(w);}.bind(this),this.$FantaTabComposer9=function(){this.props.onSendMessage('',this.$FantaTabComposer1.onSend);}.bind(this),this.$FantaTabComposer11=function(v){this.props.onSelectSticker(v,function(){return this.$FantaTabComposer1.getInput().focus();}.bind(this));}.bind(this),this.$FantaTabComposer6=function(v,w,x){this.props.onSendHotLike(v.emoji,w,x,function(){return this.$FantaTabComposer1.getInput().focus();}.bind(this));}.bind(this),this.$FantaTabComposer7=function(v){this.$FantaTabComposer1.getInput().insertEmoji(v);}.bind(this),this.$FantaTabComposer5=function(event){var v=this.props.threadID;if(event.keyCode===c('Keys').RETURN&&!event.shiftKey){this.props.onSendMessage({message:this.$FantaTabComposer18().trim(),mentions:this.$FantaTabComposer19()},this.$FantaTabComposer1.onSend);return;}if(event.keyCode===c('Keys').DOWN&&event.shiftKey&&this.hasEmptyInput()){c('FantaTabActions').minimizeTab(v);return;}}.bind(this),r;}p.prototype.componentDidMount=function(){var q=this.props,r=q.threadID,s=q.participants;if(this.props.isFocused&&s.length>0&&!l.isEmptyLocalThread(r))this.focusInput();};p.prototype.componentDidUpdate=function(q){if(this.props.isFocused&&this.props.isFocused!==q.isFocused&&!l.isEmptyLocalThread(this.props.threadID))this.focusInput();};p.prototype.componentWillUnmount=function(){this.$FantaTabComposer2&&this.$FantaTabComposer2.destroy();};p.prototype.render=function(){var q=this.props,r=q.participants,s=q.threadID,t=q.viewer;if(r.length===0)return c('React').createElement('div',null);return c('React').createElement(c('ChatTabComposerContainer.react'),{disableInput:this.props.disableInput,disableFileUploads:!c('WorkFileUploadsGating').canUploadFiles,fileUploader:this.props.fileUploader,initializeThingsWithInputFn:this.$FantaTabComposer4,inputKeyDown:this.$FantaTabComposer5,onBlur:c('emptyFunction'),onCustomLikeSelect:this.$FantaTabComposer6,onEmojiSelect:this.$FantaTabComposer7,onEscape:this.props.onEscape,onFileUploadFail:this.$FantaTabComposer8,onMount:function u(){},onP2PTrigger:this.$FantaTabComposer9,onPhotoUploadFail:this.$FantaTabComposer10,onStickerSelect:this.$FantaTabComposer11,onTab:this.props.onTab,onUploadCancel:this.$FantaTabComposer12,onUploadComplete:this.$FantaTabComposer13,onUploadSubmit:this.$FantaTabComposer14,placeholder:h._("Escribe un mensaje..."),ref:function(u){this.$FantaTabComposer1=u;if(this.props.isFocused&&!l.isEmptyLocalThread(this.props.threadID))this.focusInput();}.bind(this),resizeFn:function u(){},threadID:s,viewer:t});};p.prototype.$FantaTabComposer15=function(q,r){c('PhotosUploadWaterfall').sendSignal(babelHelpers['extends']({qn:this.$FantaTabComposer3,step:q,uploader:c('PhotosUploadWaterfall').APP_CHAT},r||{}));};p.prototype.$FantaTabComposer17=function(q){if(q===0)return;this.$FantaTabComposer15(c('PhotosUploadWaterfall').POST_PUBLISHED,{count:q});this.$FantaTabComposer3=c('WaterfallIDGenerator').generate();};p.prototype.$FantaTabComposer16=function(q,r){m.debug('photo_uploader:'+q,'{}');};p.prototype.focusInput=function(){this.$FantaTabComposer1&&this.$FantaTabComposer1.getInput().focus();};p.prototype.$FantaTabComposer18=function(){return this.$FantaTabComposer1&&this.$FantaTabComposer1.getInput().getValue()||'';};p.prototype.$FantaTabComposer19=function(){if(!this.$FantaTabComposer1)return null;var q=this.$FantaTabComposer1.getInput();return q.getMentions?q.getMentions():null;};p.prototype.hasEmptyInput=function(){return o.test(this.$FantaTabComposer18());};p.propTypes={fileUploader:n.object,isFocused:n.bool.isRequired,onEscape:n.func.isRequired,onSelectSticker:n.func.isRequired,onSendHotLike:n.func.isRequired,onSendMessage:n.func.isRequired,onSendPhoto:n.func.isRequired,onTab:n.func.isRequired,participants:n.array.isRequired,threadID:n.string.isRequired,viewer:n.string.isRequired};f.exports=p;}),null);
__d('FantaTabSheetPlaceholder.react',['cx','React','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(){return c('React').createElement('div',{className:"_w_z"},c('React').createElement(c('XUISpinner.react'),null));};f.exports=i;}),null);
__d('FantaTabSheet.react',['cx','BootloadedComponent.react','CurrentUser','FantaTabSheetActions','FantaTabSheetPlaceholder.react','JSResource','MercuryIDs','MercuryMessages','MercuryParticipants','MercurySheetPolicy','React','emptyFunction'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('MercuryMessages').get(),l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.shouldComponentUpdate=function(n){var o=this.props;return o.threadID!==n.threadID||!o.tabContent.equals(n.tabContent);};m.prototype.render=function(){var n=this.props,o=n.threadID,p=n.tabContent,q=p.openSheet,r=p.pageIndicatorDescription,s=p.privacyController,t=p.thread,u=p.typeahead,v=void 0;switch(q){case c('MercurySheetPolicy').sheets.ChatThreadIsMutedTabSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaTabSheetChatThreadIsMuted.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatNameConversationTabSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaTabSheetNameConversation.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement(c('FantaTabSheetPlaceholder.react'),null),key:q,thread:t,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatUserBlockedTabSheet:var w=c('MercuryIDs').getUserIDFromThreadID(o);if(w){var x=c('MercuryParticipants').getNow(c('MercuryIDs').getParticipantIDFromUserID(w));if(x&&s)v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatUserBlockedTabSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),gender:x.gender,key:q,privacyActionController:s,shortName:x.short_name});}break;case c('MercurySheetPolicy').sheets.ChatOfflineTabSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaTabSheetOffline.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,privacyController:s,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatReadOnlyTabSheet:case c('MercurySheetPolicy').sheets.ChatReadOnlyPermanentTabSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaTabSheetReadOnly.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,threadID:o});break;case c('MercurySheetPolicy').sheets.FantaAddFriendsSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaTabSheetAddFriends.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement(c('FantaTabSheetPlaceholder.react'),null),key:q,thread:t,threadID:o,typeahead:u});break;case c('MercurySheetPolicy').sheets.FantaAddMoreFriendsSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaTabSheetAddMoreFriends.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement(c('FantaTabSheetPlaceholder.react'),null),key:q,thread:t,threadID:o,typeahead:u});break;case c('MercurySheetPolicy').sheets.ChatThreadIsMessageBlockedSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaTabSheetMessageBlocked.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatUserFocusSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatUserFocusSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,thread:t,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatUserFocusBypassSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatUserFocusBypassSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q});break;case c('MercurySheetPolicy').sheets.ChatUserTimezoneSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatUserTimezoneSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),data:p.timezoneInfo,key:q,onDismiss:function ca(){return c('FantaTabSheetActions').closeUserTimezoneSheet(o);},resize:c('emptyFunction'),threadID:o});break;case c('MercurySheetPolicy').sheets.ChatUploadWarningTabSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatUploadWarningTabSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q});break;case c('MercurySheetPolicy').sheets.ChatNoRecipientsTabSheet:if(!c('MercuryIDs').isCanonical(o))v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatNoRecipientsTabSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q});break;case c('MercurySheetPolicy').sheets.ChatNewMessagesTabSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaNewMessagesTabSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatEmployeeAwaySheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatEmployeeAwaySheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q});break;case c('MercurySheetPolicy').sheets.ChatUserIsPersonalUserSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaUserIsPersonalUserSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,thread:t,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatUserIsWorkUserSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaUserIsWorkUserSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,thread:t,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatPageResponsivenessIndicator:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatPageResponsivenessIndicator.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),description:r,key:q,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatEventReminderTabSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('FantaEventReminderTabSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,threadID:o});break;case c('MercurySheetPolicy').sheets.ChatAppointmentBanner:if(t){var y=k.getCurrentlyLoadedMessages(o);v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatAppointmentBannerRoot.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),pageID:t.other_user_fbid,userID:c('CurrentUser').getID(),count:100,messageList:y,appointmentBannerDidUpdate:c('emptyFunction'),key:q,threadID:o});}break;case c('MercurySheetPolicy').sheets.ChatMontageSheet:v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatMontageSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,threadID:o,onResize:c('emptyFunction')});break;case c('MercurySheetPolicy').sheets.ChatJoinCallSheet:if(t){var z=t.rtc_call_data,aa=t.thread_fbid;v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatJoinCallSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,rtcCallData:z,threadFBID:aa});}break;case c('MercurySheetPolicy').sheets.ChatRoomAssociatedObjectSheet:if(t){var ba=t.associated_object;v=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatRoomAssociatedObjectSheet.react').__setRef('FantaTabSheet.react'),bootloadPlaceholder:c('React').createElement('div',null),key:q,associatedObject:ba});}break;}if(v)return c('React').createElement('div',{className:"_1sk5"},c('React').createElement('div',{className:"_1sk6"},v));return null;};function m(){i.apply(this,arguments);}m.propTypes={threadID:l.string.isRequired,tabContent:l.object.isRequired};f.exports=m;}),null);
__d('FantaTabMain.react',['cx','fbt','Bootloader','BootloadOnRender.react','ChatBehavior','ChatTabBlinking','CurrentUser','DragDropTarget','Event','FantaAvailableStatus','FantaChatHeaderContainer.react','FantaConversationScroller.react','FantaDragAndDrop.react','FantaDispatcher','FantaMessageActions','FantaPageComposerNullState.react','FantaPendingActions.react','FantaTabActions','FantaTabComposer.react','FantaTabSheet.react','immutable','JSResource','Keys','LazyComponent.react','MercuryIDs','MessageRequestUtils','MessengerBotMenuDataFetcher','MNCommercePageSetting','Parent','React','ReactDOM','SimpleXUIDialog','WorkFileUploadsGating','WorkFocusMode','convertMIGColorToFIGColor','FBID','getPageIDFromThreadID','getVendorPrefixedEventName','idx','ifRequired','joinClasses','throttle'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=/\D+/g,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={closing:false,disableInput:false},this.$FantaTabMain16=function(event){var t=!!c('Parent').byClass(event.target,'fantaTabMain-'+this.props.tab.id),u=!!c('Parent').byClass(event.relatedTarget,'fantaTabMain-'+this.props.tab.id);if(!t||!u)if(!event.relatedTarget||!event.target){this.$FantaTabMain7=setTimeout(function(){this.$FantaTabMain7=null;if(!c('FantaDispatcher').isDispatching())c('FantaTabActions').blurTab(this.props.tab.id);}.bind(this),100);}else if(!c('FantaDispatcher').isDispatching())c('FantaTabActions').blurTab(this.props.tab.id);}.bind(this),this.$FantaTabMain17=function(event){if(this.$FantaTabMain7){clearTimeout(this.$FantaTabMain7);this.$FantaTabMain7=null;return;}var t=!!c('Parent').byClass(event.target,'fantaTabMain-'+this.props.tab.id),u=!!c('Parent').byClass(event.relatedTarget,'fantaTabMain-'+this.props.tab.id),v=event.target;if(!(v&&v.classList&&(v.classList.contains("_3olu")||v.classList.contains("_15p4"))))if(!t||!u)if(!c('FantaDispatcher').isDispatching())c('FantaTabActions').focusTab(this.props.tab.id);}.bind(this),this.$FantaTabMain19=function(t){c('FantaMessageActions').linkPreview(this.props.tab.id,t);}.bind(this),this.$FantaTabMain18=function(t){c('FantaMessageActions').prepareFilesForSend(this.props.tab.id,t);}.bind(this),this.$FantaTabMain13=function(t){if(t.keyCode===c('Keys').ESC){this.$FantaTabMain2(true);t.preventDefault();t.stopPropagation();}}.bind(this),this.$FantaTabMain14=function(t){if(t.keyCode===c('Keys').TAB)this.$FantaTabMain15(t);}.bind(this),this.$FantaTabMain15=function(event){var t=this.props.raisedTabCount;if(t>1){event.preventDefault();this.$FantaTabMain3(event.ctrlKey,event.shiftKey);}}.bind(this),this.$FantaTabMain2=function(t){if(!this.refs.composer||this.refs.composer.hasEmptyInput()&&!this.$FantaTabMain20()){this.$FantaTabMain21(t);}else this.$FantaTabMain22(t);}.bind(this),p;}n.prototype.componentWillMount=function(){this.$FantaTabMain2=c('throttle')(this.$FantaTabMain2,100);this.$FantaTabMain3=c('throttle')(this.$FantaTabMain3,100);};n.prototype.componentDidMount=function(){this.$FantaTabMain9();this.$FantaTabMain10();this.$FantaTabMain11();this.$FantaTabMain12();};n.prototype.componentDidUpdate=function(){this.$FantaTabMain10();};n.prototype.componentWillUnmount=function(){this.$FantaTabMain4&&this.$FantaTabMain4.disable();};n.prototype.shouldComponentUpdate=function(o,p){var q=this.props,r=this.state;return q.hasFetchedAll!==o.hasFetchedAll||q.isFocused!==o.isFocused||q.isLastGroupTab!==o.isLastGroupTab||!q.messages.equals(o.messages)||!q.tab.equals(o.tab)||!q.tabContent&&!!o.tabContent||q.tabContent&&!q.tabContent.equals(o.tabContent)||q.thread!==o.thread||r.closing!==p.closing||r.disableInput!==p.disableInput;};n.prototype.$FantaTabMain10=function(){var o=this.props,p=o.tab,q=o.thread,r=p.id;if(!q)return;var s=this.refs.root&&c('ReactDOM').findDOMNode(this.refs.root);if(!s)return;var t=q.unread_count;if(c('WorkFocusMode')&&c('WorkFocusMode').currentViewerInFocusMode(r))return;if(t!==undefined){var u=!!t&&(!c('ChatBehavior').showsTabUnreadUI||c('ChatBehavior').showsTabUnreadUI());if(u){c('ChatTabBlinking').blinkTab(r,{getTabElem:function v(){return s;},isFocused:function(){return this.props.isFocused;}.bind(this),isHovered:function v(){return false;}});}else c('ChatTabBlinking').unblinkTab(r);}};n.prototype.render=function(){var o=this.props,p=o.hasFetchedAll,q=o.isFocused,r=o.isLastGroupTab,s=o.messages,t=o.onLoadMoreMessages,u=o.onSelectSticker,v=o.onSendHotLike,w=o.onSendMessage,x=o.onSendPhoto,y=o.showContextBanner,z=o.tab,aa=o.tabContent,ba=o.thread,ca=z.id,da=c('CurrentUser').getID(),ea=aa&&aa.fileUploader,fa=aa&&aa.sharePreview,ga=ea&&ea.uploadingFiles,ha=ea&&ea.uploadedFiles,ia=ba&&c('convertMIGColorToFIGColor')(ba.custom_color),ja=aa&&aa.nullPageID,ka=aa&&aa.nullPageTitle,la=ja&&ka&&ba&&ba.message_count===0,ma=ba&&ba.participants||[],na=aa&&aa.threadPreviewRecipients||c('immutable').List(),oa=ma.length>0?ma:na.toArray(),pa=ba&&c('MessageRequestUtils').isMessageRequest(ba)?c('React').createElement(c('FantaPendingActions.react'),{thread:ba,threadID:ca}):la&&ja&&ka?c('React').createElement(c('FantaPageComposerNullState.react'),{nullPageID:ja,nullPageTitle:ka,threadID:ca}):c('React').createElement('div',{className:"fbNubFlyoutFooter"+(this.state.disableInput?' '+"fbNubFlyoutComposerDisabled":'')},c('React').createElement(c('FantaTabComposer.react'),{disableInput:this.state.disableInput,fileUploader:ea,isFocused:q,onEscape:this.$FantaTabMain13,onKeyDown:this.$FantaTabMain13,onKeyPress:this.$FantaTabMain14,onSelectSticker:u,onSendHotLike:v,onSendMessage:w,onSendPhoto:x,onTab:this.$FantaTabMain15,ref:'composer',participants:oa,threadID:ca,viewer:da})),qa=c('FantaAvailableStatus').isAvailable(ba,ca),ra=aa&&aa.joinableInterstitialData?c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('ChatJoinableInterstitialPreview.react').__setRef('FantaTabMain.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{data:aa.joinableInterstitialData,isActive:q,onClose:this.$FantaTabMain2})}):c('React').createElement('div',{className:'fbNubFlyoutInner'},c('React').createElement(c('FantaChatHeaderContainer.react'),{customColor:ia,isFocused:q,isLastGroupTab:r,onClose:this.$FantaTabMain2,thread:ba,threadID:ca,viewer:da}),c('React').createElement('div',{className:"_1ia"+(' '+"_2sz2"),ref:function(sa){this.$FantaTabMain5=sa;}.bind(this)},c('React').createElement(c('FantaTabSheet.react'),{tabContent:aa,threadID:ca}),c('React').createElement(c('FantaConversationScroller.react'),{hasFetchedAll:p,isFocused:q,messages:s,onFocus:function(){return this.refs.composer&&this.refs.composer.focusInput();}.bind(this),onLoadMoreMessages:t,showContextBanner:y,thread:ba,threadID:ca,viewer:da}),c('React').createElement('div',{className:"_3bpu"}),c('React').createElement('div',{className:"_2hc2"},c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('P2PChatThreadBannerContainer.react').__setRef('FantaTabMain.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{isVisible:true,otherUserID:c('MercuryIDs').getUserIDFromThreadID(ca),threadID:ca})})),c('React').createElement('div',{className:"_4g6x"},c('React').createElement('div',{className:"_4g6y"},c('React').createElement('div',{className:"_4g6z _4g71"},i._("Coloca los enlaces o archivos aqu\u00ed")),c('React').createElement('div',{className:"_4g6z _4g6- _4g6_"},i._("Coloca los archivos aqu\u00ed")),c('React').createElement('div',{className:"_4g6z _4g6- _4g70"},i._("Coloca el enlace aqu\u00ed")))),pa,c('React').createElement(c('FantaDragAndDrop.react'),{threadID:ca,uploadedFiles:ha,uploadingFiles:ga,sharePreview:fa})));return c('React').createElement('div',{className:c('joinClasses')((this.state.closing?"_2suj":'')+(' '+"_3_9e")+(' '+"_s0f")+(' '+"_50mz")+(' '+"_50m_")+(qa?' '+"_4-0b":'')+(' '+"fbNub")+(' '+"_50-v")+(q?' '+"focusedTab":'')+(' '+"opened")+(' '+"_27_3"),'fantaTabMain-'+ca),onBlur:this.$FantaTabMain16,onFocus:this.$FantaTabMain17,onKeyDown:this.$FantaTabMain13,onKeyPress:this.$FantaTabMain14,ref:'root',role:'presentation'},c('React').createElement('div',{className:'fbNubFlyout fbDockChatTabFlyout uiContextualLayerParent',role:'complementary'},c('React').createElement('div',{className:'fbNubFlyoutOuter'},ra)));};n.prototype.$FantaTabMain12=function(){var o=c('getPageIDFromThreadID')(this.props.tab.id);if(o)c('MessengerBotMenuDataFetcher').getHasPageSetting(o,function(p){this.setState({disableInput:p});}.bind(this),function(){this.setState({disableInput:false});}.bind(this),c('MNCommercePageSetting').COMPOSER_INPUT_DISABLED);};n.prototype.$FantaTabMain9=function(){if(c('WorkFileUploadsGating').canUploadFiles&&!this.$FantaTabMain4){var o=c('ReactDOM').findDOMNode(this.$FantaTabMain5);if(o){var p=new (c('DragDropTarget'))(o);this.$FantaTabMain4=p;p.setOnFilesDropCallback(this.$FantaTabMain18);p.setOnURLDropCallback(this.$FantaTabMain19);p.enable();}}};n.prototype.$FantaTabMain3=function(o,p){if(!o)if(p){c('FantaTabActions').focusPreviousTab();}else c('FantaTabActions').focusNextTab();};n.prototype.$FantaTabMain20=function(){return this.$FantaTabMain23()||this.$FantaTabMain24();};n.prototype.$FantaTabMain23=function(){var o,p,q=this.props.tabContent,r=((o=q)!=null?(o=o.fileUploader)!=null?o.uploadedFiles:o:o)||{size:0},s=((p=q)!=null?(p=p.fileUploader)!=null?p.uploadingFiles:p:p)||{size:0};return r.size>0||s.size>0;};n.prototype.$FantaTabMain24=function(){var o,p=this.props.tabContent,q=(o=p)!=null?o.sharePreview:o;return !!(q&&q.params&&q.type);};n.prototype.$FantaTabMain21=function(o){var p=this.props,q=p.tab,r=p.tabContent,s=r&&r.threadPreviewID?r.threadPreviewID:q.id,t=c('ReactDOM').findDOMNode(this.refs.root);this.$FantaTabMain1=setTimeout(function(){return o?c('FantaTabActions').closeAndTabNext(s):c('FantaTabActions').closeTab(s);},1.2*c('ifRequired')('cssVar',function(v){return "200ms".replace(l,'');},function(){return 200;}));var u=c('Event').listen(t,c('getVendorPrefixedEventName')('animationend'),function(v){if(v.animationName==='closeChatTab'){o?c('FantaTabActions').closeAndTabNext(s):c('FantaTabActions').closeTab(s);clearTimeout(this.$FantaTabMain1);u.remove();}}.bind(this));this.$FantaTabMain25();this.setState({closing:true});};n.prototype.$FantaTabMain22=function(o){var p=this.props.tab,q=p.id;c('FantaTabActions').blurTab(q);var r=i._("\u00bfSeguro que quieres cerrar esta ventana del chat?"),s=i._("No has enviado tu mensaje.");c('SimpleXUIDialog').showConfirm(r,s,function(t){if(t){o?c('FantaTabActions').closeAndTabNext(q):c('FantaTabActions').closeTab(q);}else c('FantaTabActions').focusTab(q);},{autofocusConfirm:true,useReactFocusBehavior:true});};n.prototype.$FantaTabMain11=function(){this.$FantaTabMain8=Math.floor(Date.now()/1000);};n.prototype.$FantaTabMain25=function(){var o=this.props.thread,p=o?o.other_user_fbid:null,q=Math.floor(Date.now()/1000),r=this.$FantaTabMain8;if(o&&p&&!c('FBID').isUser(p))c('Bootloader').loadModules(["PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","PagesEventObserver","PagesEventType"],function(s,t,u,v,w){s.log(p,t.CLICK,u.MESSAGE_FANTA_TAB_CLOSE,'',['pages_surface_team'],{open_tab_timestamp:r,close_tab_timestamp:q,last_message_timestamp:o.last_message_timestamp,message_count:o.message_count,snippet_sender:o.snippet_sender,participants:o.participants});v.notify(w.MESSAGES_FANTA_TAB_CLOSE,p,{open_tab_timestamp:r,close_tab_timestamp:q,last_message_timestamp:o.last_message_timestamp,message_count:o.message_count,snippet_sender:o.snippet_sender,participants:o.participants});},'FantaTabMain.react');};n.propTypes={hasFetchedAll:m.bool.isRequired,isFocused:m.bool.isRequired,isLastGroupTab:m.bool.isRequired,messages:m.object,onLoadMoreMessages:m.func.isRequired,onSelectSticker:m.func.isRequired,onSendHotLike:m.func.isRequired,onSendMessage:m.func.isRequired,onSendPhoto:m.func.isRequired,raisedTabCount:m.number,showContextBanner:m.bool,tab:m.object.isRequired,tabContent:m.object,thread:m.object};f.exports=n;}),null);
__d('FantaTabMainLoader.react',['FantaGetMessageActions','FantaMessageActions','FantaTabMain.react','immutable','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$FantaTabMainLoader1=function(){var q=this.props.tab;c('FantaGetMessageActions').fetchMoreMessages(q.id);}.bind(this),this.$FantaTabMainLoader2=function(q,r){var s=this.props.tab;c('FantaMessageActions').sendSticker(s.id,q,r);}.bind(this),this.$FantaTabMainLoader3=function(q,r,s,t){var u=this.props.tab;c('FantaMessageActions').sendHotLike(u.id,q,r,s,t);}.bind(this),this.$FantaTabMainLoader4=function(q,r){var s=this.props.tab;c('FantaMessageActions').sendMessage(s.id,q,r);}.bind(this),this.$FantaTabMainLoader5=function(q,r){var s=this.props.tab;c('FantaMessageActions').sendPhoto(s.id,q,r);}.bind(this),m;}k.prototype.shouldComponentUpdate=function(l){var m=this.props;return m.isFocused!==l.isFocused||m.isLastTabOfType!==l.isLastTabOfType||!m.tab.equals(l.tab)||!m.tabContent.equals(l.tabContent);};k.prototype.render=function(){var l=this.props,m=l.isFocused,n=l.isLastTabOfType,o=l.raisedTabCount,p=l.tab,q=l.tabContent,r=q.hasFetchedAll,s=q.showContextBanner,t=q.thread,u=q.threadPreviewID,v=q.messages,w=u?p.id+'-'+u:p.id;if(!q)return c('React').createElement('div',{key:'noContent-'+w});if(!v)v=c('immutable').List();return c('React').createElement(c('FantaTabMain.react'),{hasFetchedAll:r,isFocused:m,isLastGroupTab:n,key:w,messages:v,onLoadMoreMessages:this.$FantaTabMainLoader1,onSelectSticker:this.$FantaTabMainLoader2,onSendHotLike:this.$FantaTabMainLoader3,onSendMessage:this.$FantaTabMainLoader4,onSendPhoto:this.$FantaTabMainLoader5,raisedTabCount:o,showContextBanner:s,tab:p,tabContent:q,thread:t});};k.propTypes={isFocused:j.bool.isRequired,isLastTabOfType:j.bool.isRequired,raisedTabCount:j.number,tab:j.object.isRequired,tabContent:j.object};f.exports=k;}),null);
__d('FantaTabMinimized.react',['cx','fbt','ChatBehavior','ChatTabBlinking','ChatTabHeaderContainer.react','CurrentUser','Event','FantaAvailableStatus','FantaTabActions','React','ReactDOM','SimpleXUIDialog','WorkFocusMode','emptyFunction','getVendorPrefixedEventName','ifRequired'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=/\D+/g,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={closing:false},this.$FantaTabMinimized4=function(){var t=this.props.tabContent;if(!t||t&&t.composerText.length===0){this.$FantaTabMinimized5();}else this.$FantaTabMinimized6();}.bind(this),this.$FantaTabMinimized3=function(event){var t=event.target;if(t&&t.classList&&!t.classList.contains('button')){event.preventDefault();c('FantaTabActions').unminimizeTab(this.props.tab.id);}}.bind(this),p;}n.prototype.componentDidMount=function(){this.$FantaTabMinimized2();};n.prototype.componentDidUpdate=function(){this.$FantaTabMinimized2();};n.prototype.shouldComponentUpdate=function(o){var p=this.props;return !p.tab.equals(o.tab)||!p.tabContent&&!!o.tabContent||!!p.tabContent&&!p.tabContent.equals(o.tabContent);};n.prototype.$FantaTabMinimized2=function(){var o=this.props,p=o.tab,q=o.tabContent,r=p.id;if(!q)return;var s=q.thread;if(!s)return;var t=this.refs.root&&c('ReactDOM').findDOMNode(this.refs.root);if(!t)return;var u=s.unread_count;if(c('WorkFocusMode')&&c('WorkFocusMode').currentViewerInFocusMode(r))return;if(u!==undefined){var v=!!u&&(!c('ChatBehavior').showsTabUnreadUI||c('ChatBehavior').showsTabUnreadUI());if(v){c('ChatTabBlinking').blinkTab(r,{getTabElem:function w(){return t;},isFocused:function w(){return false;},isHovered:function w(){return false;}});}else c('ChatTabBlinking').unblinkTab(r);}};n.prototype.render=function(){var o=this.props,p=o.tab,q=o.tabContent,r=q&&q.thread&&q.thread.custom_color,s=r?{color:r}:null,t=p.id,u=q&&!!q.thread&&c('FantaAvailableStatus').isAvailable(q.thread,t);return c('React').createElement('div',{className:"_4cd8"+(' '+"_50mz")+(' '+"_50m_")+(' '+"fbNub")+(' '+"_50-v")+(u?' '+"_4-0b":'')+(' '+"_27_3"),ref:'root'},c('React').createElement('div',{className:(this.state.closing?"_2suj":'')+(' '+"clearfix")+(' '+"fbNubFlyoutTitlebar")+(' '+"titlebar")+(!!r?' '+"_1m34":''),style:s},c('React').createElement(c('ChatTabHeaderContainer.react'),{attachmentsShelf:document.createElement('div'),isActive:false,isRaised:false,isTyping:false,nameConversationFunc:c('emptyFunction'),rtcNuxShown:false,sheetController:{openAddFriendsSheet:c('emptyFunction'),openThreadIsMutedTabSheet:c('emptyFunction'),closeThreadIsMutedTabSheet:c('emptyFunction'),openMessageBlockedTabSheet:c('emptyFunction'),closeMessageBlockedTabSheet:c('emptyFunction')},showAddFriend:c('emptyFunction'),threadID:this.props.tab.id,viewer:c('CurrentUser').getID(),onClick:this.$FantaTabMinimized3,onCloseClick:this.$FantaTabMinimized4,onCloseKeyUp:c('emptyFunction'),onCloseMouseDown:c('emptyFunction'),onFileUploaderMounted:c('emptyFunction'),onFileUploaderSubmit:c('emptyFunction'),onKeyDown:function v(){},onRTCNuxCloseButtonClick:c('emptyFunction'),onUpdateAttachmentsShelf:c('emptyFunction'),onUploadFinished:c('emptyFunction')})));};n.prototype.$FantaTabMinimized5=function(){var o=this.props,p=o.tab,q=o.tabContent,r=q&&q.threadPreviewID?q.threadPreviewID:p.id,s=c('ReactDOM').findDOMNode(this.refs.root);this.$FantaTabMinimized1=setTimeout(function(){return c('FantaTabActions').closeAndTabNext(r);},1.2*c('ifRequired')('cssVar',function(u){return "200ms".replace(l,'');},function(){return 200;}));var t=c('Event').listen(s,c('getVendorPrefixedEventName')('animationend'),function(u){if(u.animationName==='closeChatTab'){c('FantaTabActions').closeAndTabNext(r);clearTimeout(this.$FantaTabMinimized1);t.remove();}}.bind(this));this.setState({closing:true});};n.prototype.$FantaTabMinimized6=function(){var o=this.props,p=o.tab,q=o.tabContent,r=q&&q.threadPreviewID?q.threadPreviewID:p.id,s=i._("\u00bfSeguro que quieres cerrar esta ventana del chat?");c('FantaTabActions').blurTab(r);var t=i._("No has enviado tu mensaje.");c('SimpleXUIDialog').showConfirm(s,t,function(u){if(u){c('FantaTabActions').closeAndTabNext(r);}else c('FantaTabActions').focusTab(r);},{autofocusConfirm:true,useReactFocusBehavior:true});};n.propTypes={tab:m.object.isRequired,tabContent:m.object};f.exports=n;}),null);
__d('FantaMercuryTabsWithMain.react',['Bootloader','FantaAppStore','FantaCookieUtil','FantaMercuryTabOverflowBootloader.react','FantaTabActions','FantaTabGroup.react','FantaTabMainLoader.react','FantaTabMinimized.react','FluxContainer','LazyComponent.react','LoadOnRender.react','MercuryIDs','PresenceState','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=function l(m){c('Bootloader').loadModules(["messengerReasonDialogContainerReact"],function(n){var o=n.jsComponent;return m(o);},'FantaMercuryTabsWithMain.react');};h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.getStores=function(){return [c('FantaAppStore')];};k.calculateState=function(){return {tabGroup:c('FantaAppStore').getState().tabGroup,tabContents:c('FantaAppStore').getState().mercury.tabContents};};k.prototype.componentWillMount=function(){if(this.props.loadDataOnMount)c('FantaTabActions').loadFromData(c('FantaCookieUtil').convertCookieData(c('PresenceState').get()));};k.prototype.render=function(){return c('React').createElement('div',null,c('React').createElement(c('FantaTabGroup.react'),{MainComponent:c('FantaTabMainLoader.react'),MinimizedComponent:c('FantaTabMinimized.react'),OverflowComponent:c('FantaMercuryTabOverflowBootloader.react'),tabGroup:this.state.tabGroup,tabContents:this.state.tabContents,isLastOfTypeChecker:this.$FantaMercuryTabsWithMain1}),c('React').createElement(c('LoadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),null),loader:j,placeholder:c('React').createElement('span',null)}));};k.prototype.$FantaMercuryTabsWithMain1=function(l){return c('MercuryIDs').isGroupChat(l.id);};function k(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(k);}),null);
__d('FantaTabsReactApp',['ChatPerfInstrumentation','FantaMercuryTabsWithMain.react','FantaTabsAppBase','Map','React','ReactDOM','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=void 0;h=babelHelpers.inherits(k,c('FantaTabsAppBase'));i=h&&h.prototype;k.prototype.initializeFantaData=function(l){e(['FantaAppStore','FantaCookieUtil','FantaGetMessageActions','FantaTabActions','MercuryThreadInformer','PresenceState'],function(m,n,o,p,q,r){p.loadFromData(n.convertCookieData(r.get(),null,l));r.registerStateLoader(function(s){return p.loadFromData(n.convertCookieData(s,m.getState().tabGroup,l));});r.registerStateStorer(function(s){var t=m.getState().tabGroup;if(!j||j&&!j.equals(t)){j=t;return n.createCookieData(t,s);}else return s;});m.addListener(function(){return r.doSync();});q.get().subscribe('threads-updated',function(s,t){Object.keys(t).forEach(function(u){c('setImmediate')(function(){o.refreshThread(u);});});});c('ChatPerfInstrumentation').logInitData();});};k.prototype.initializeFantaUI=function(){e(['FantaAppStore','FantaMercuryThreadEventsBootloaded','FantaMessageActions','FantaTabActions','FantaTabViewportManager','FBRTCMessageHandler','MercuryBrowserAlerts'],function(l,m,n,o,p,q,r){q.init();r.init();c('ReactDOM').render(this.getViewComponent(),this.tabsElem);m.onMessagesReceived(function(t,u){c('setImmediate')(function(){n.receivedNewMessage(t,u);});});p.init(this.tabsElem);c('ChatPerfInstrumentation').logInitUI();var s=l.getState().tabGroup.tabs;if(s.toArray().length===0)c('ChatPerfInstrumentation').logDisplayDone();}.bind(this));};k.prototype.getViewComponent=function(){return c('React').createElement(c('FantaMercuryTabsWithMain.react'),{loadDataOnMount:false});};function k(){h.apply(this,arguments);}f.exports=new k();}),null);