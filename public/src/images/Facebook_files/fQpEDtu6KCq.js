if (self.CavalryLogger) { CavalryLogger.start_js(["eQcDv"]); }

__d("PlaceListMapState",[],(function a(b,c,d,e,f,g){f.exports={NORMAL:1,PENDING:2,REMOVABLE:3,REMOVED:4};}),null);
__d("PlaceListRecType",[],(function a(b,c,d,e,f,g){f.exports={PLACE:"place",PROFILE:"profile"};}),null);
__d("ProfileCardInfoGlyph",[],(function a(b,c,d,e,f,g){f.exports={CITY:"city",NETWORK:"network",OTHER:"other",SCHOOL:"school",WORK:"work"};}),null);
__d("XPlaceListCommentRemoveAddAttachmentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/async\/place_list\/remove_comment_add_attachment\/",{comment_id:{type:"String",required:true}});}),null);
__d('PlaceListFancyLinkCommentButton.react',['ix','cx','fbt','Image.react','Layout.react','PlaceListSurvey','React','XAsyncRequest','XPlaceListCommentRemoveAddAttachmentController','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m,n,o=c('Layout.react').Column,p=c('Layout.react').FillColumn;k=babelHelpers.inherits(q,c('React').Component);l=k&&k.prototype;q.prototype.render=function(){return c('React').createElement(c('Layout.react'),{className:"_5ofu",onClick:this.props.onClick},c('React').createElement(o,{className:"_5og0"},c('React').createElement(c('Image.react'),{className:"_5og4",src:h("117012")})),c('React').createElement(p,{className:"_5og5"},c('React').createElement('div',{className:"_5z6p"},c('React').createElement('div',{className:"_5og6"},this.$PlaceListFancyLinkCommentButton1()),c('React').createElement('div',{className:"_5og7"},this.$PlaceListFancyLinkCommentButton2())),c('React').createElement(r,this.props)));};q.prototype.$PlaceListFancyLinkCommentButton1=function(){return this.props.isAddingMore?j._("A\u00f1adir m\u00e1s recomendaciones"):j._("A\u00f1ade un enlace a tu comentario");};q.prototype.$PlaceListFancyLinkCommentButton2=function(){return this.props.isAddingMore?j._("Encuentra otros lugares para recomendar en Facebook."):j._("A\u00f1ade un enlace a la p\u00e1gina de Facebook de la recomendaci\u00f3n para mejorarla.");};function q(){k.apply(this,arguments);}m=babelHelpers.inherits(r,c('React').Component);n=m&&m.prototype;r.prototype.render=function(){if(this.props.isAddingMore)return null;return c('React').createElement('div',{className:"_4nxw"},c('React').createElement('a',{href:'#',className:"_4nxx",onClick:this.$RemoveLink1.bind(this)}));};r.prototype.$RemoveLink1=function(s){var t=c('XPlaceListCommentRemoveAddAttachmentController').getURIBuilder().setString('comment_id',this.props.commentID).getURI();new (c('XAsyncRequest'))(t).setHandler(function(u){if(u.payload&&u.payload.surveyURI)c('PlaceListSurvey').showSurvey(u.payload.surveyURI);}).setErrorHandler(function(){this.props.onChangeAttachmentPermissions({canViewerAdd:true});}.bind(this)).send();this.props.onChangeAttachmentPermissions({canViewerAdd:false});s.stopPropagation();};function r(){m.apply(this,arguments);}f.exports=q;}),null);
__d("XCommentAddPlaceListItemController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/async\/placelist_comment\/add_item\/",{comment_fbid:{type:"String",required:true},place_ids:{type:"StringVector",required:true}});}),null);
__d('AddPlaceToMapComponent.react',['cx','fbt','invariant','AsyncRequest','CommentPlaceTypeahead.react','Link.react','PlaceListEventEmitter','PlaceListFancyLinkCommentButton.react','PlaceListMapEvents','PlaceListMapUpdater','QE','React','ReactDOM','XCommentAddPlaceListItemController','XUISpinner.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m,n,o='add';k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(r){l.constructor.call(this,r);this.state={isLoading:false,isShowingTypeahead:false};}p.prototype.render=function(){if(this.state.isLoading){return c('React').createElement('div',{className:"_5jpv"},c('React').createElement(c('XUISpinner.react'),null));}else if(this.state.isShowingTypeahead){return c('React').createElement(c('CommentPlaceTypeahead.react'),{className:!this.props.isAddingMore?"_x_w":'',commentID:this.props.commentID,onBlur:function(){return this.setState({isShowingTypeahead:false});}.bind(this),onSelectPlace:function(r){return this.$AddPlaceToMapComponent1(r);}.bind(this),tallInput:true});}else return c('React').createElement(q,babelHelpers['extends']({},this.props,{onClick:function(){return this.setState({isShowingTypeahead:true});}.bind(this)}));};p.prototype.$AddPlaceToMapComponent1=function(r){var s=c('XCommentAddPlaceListItemController').getURIBuilder().setString('comment_fbid',this.props.commentID).setStringVector('place_ids',[r.getUniqueID()]).getURI();new (c('AsyncRequest'))(s).setHandler(function(t){var u=this.$AddPlaceToMapComponent2(t.payload.pagesData,r.getUniqueID());c('PlaceListMapUpdater').updateMap({ufiNode:c('ReactDOM').findDOMNode(this),commentFBID:this.props.commentID},{mapBoundingPoints:t.payload.newMapBounds,pins:u?[u]:[]});this.setState({isLoading:false,isShowingTypeahead:false});c('PlaceListEventEmitter').emit(c('PlaceListMapEvents').UPDATE_TO_FEED_STORY_COMMENTS,{commentFBID:this.props.commentID,pagesData:t.payload.pagesData,node:c('ReactDOM').findDOMNode(this)});this.props.onRefreshPlaces(t.payload.pagesData);}.bind(this)).setErrorHandler(function(){return this.setState({isLoading:false});}.bind(this)).send();this.setState({isLoading:true});};p.prototype.$AddPlaceToMapComponent2=function(r,s){var t=r.filter(function(u){return u.pageInfo&&u.pageInfo.id===s;});t.length>0||j(0);if(!t[0].pageInfo.location)return null;return {data:{icons:t[0].pageInfo.icons,id:t[0].pageInfo.id,location:t[0].pageInfo.location},operation:o};};m=babelHelpers.inherits(q,c('React').Component);n=m&&m.prototype;q.prototype.render=function(){return this.props.isAddingMore?c('React').createElement(c('Link.react'),{className:"_5jpv",onClick:this.props.onClick},i._("A\u00f1adir m\u00e1s recomendaciones")):c('React').createElement(c('PlaceListFancyLinkCommentButton.react'),{commentID:this.props.commentID,isAddingMore:this.props.isAddingMore,onChangeAttachmentPermissions:this.props.onChangeAttachmentPermissions,onClick:this.props.onClick});};function q(){m.apply(this,arguments);}f.exports=p;}),null);
__d('KeeperPendingButtons.react',['fbt','React','XUIButton.react'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';return c('React').createElement('div',{className:this.props.className},c('React').createElement(c('XUIButton.react'),{label:this.props.denyLabel||h._("No"),disabled:this.props.isDisabled,onClick:this.props.onRemove,use:'default'}),c('React').createElement(c('XUIButton.react'),{label:this.props.confirmLabel||h._("S\u00ed, a\u00f1adir recomendaci\u00f3n"),disabled:this.props.isDisabled,onClick:this.props.onAdd,use:'confirm'}));};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d("XPlaceListCommentRemoveRecController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/async\/place_list\/remove_rec\/",{comment_fbid:{type:"FBID",required:true},is_spotlight:{type:"Bool",defaultValue:false},map_state:{type:"Enum",required:true,enumType:0},rec_id:{type:"FBID",required:true},rec_type:{type:"Enum",required:true,enumType:1}});}),null);
__d('PlacePageRemoveLink.react',['csx','cx','invariant','Parent','PlaceListEventEmitter','PlaceListMapEvents','PlaceListMapState','PlaceListRecType','React','ReactDOM','Set','SubscriptionsHandler','XAsyncRequest','XPlaceListCommentRemoveRecController','getObjectValues'],(function a(b,c,d,e,f,g,h,i,j){var k,l;k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;function m(n){'use strict';l.constructor.call(this,n);this.state={isCommittingUpdate:false};this.$PlacePageRemoveLink1=new (c('SubscriptionsHandler'))();}m.prototype.componentDidMount=function(){'use strict';this.$PlacePageRemoveLink1.addSubscriptions(c('PlaceListEventEmitter').addListener(c('PlaceListMapEvents').PLACE_REMOVED_FROM_MAP,function(n){if(n.placeID===this.props.recID&&n.postID===this.props.mapContext.postID)this.$PlacePageRemoveLink2();}.bind(this)));this.$PlacePageRemoveLink1.addSubscriptions(c('PlaceListEventEmitter').addListener(c('PlaceListMapEvents').COMMENT_REMOVED_PLACE,function(n){if(n.placeID===this.props.recID&&n.commentID===this.props.mapContext.commentID)this.$PlacePageRemoveLink2();}.bind(this)));};m.prototype.componentWillUnmount=function(){'use strict';this.$PlacePageRemoveLink1.release();};m.prototype.render=function(){'use strict';return c('React').createElement('div',null,c('React').createElement('a',{href:'#',className:"_35g7",onClick:function(){return this.$PlacePageRemoveLink3();}.bind(this)}));};m.prototype.$PlacePageRemoveLink3=function(){'use strict';if(!this.props.recID||!this.props.mapContext.commentID)return;this.setState({isCommittingUpdate:true});var n=c('XPlaceListCommentRemoveRecController').getURIBuilder().setFBID('comment_fbid',this.props.mapContext.commentID).setBool('is_spotlight',this.$PlacePageRemoveLink4()).setEnum('map_state',this.props.mapContext.mapState).setFBID('rec_id',this.props.recID).setEnum('rec_type',this.props.recType).getURI();new (c('XAsyncRequest'))(n).setHandler(function(){this.setState({isCommittingUpdate:false});c('PlaceListEventEmitter').emit(c('PlaceListMapEvents').COMMENT_REMOVED_PLACE,{placeID:this.props.recID,postID:this.props.mapContext.postID,commentID:this.props.mapContext.commentID});}.bind(this)).setErrorHandler(function(){this.setState({isCommittingUpdate:false});}.bind(this)).send();};m.prototype.$PlacePageRemoveLink2=function(){'use strict';this.props.onChangePlaceState!=null||j(0);this.props.onChangePlaceState(this.props.recID,c('PlaceListMapState').REMOVED,null);};m.prototype.$PlacePageRemoveLink4=function(){'use strict';var n=c('ReactDOM').findDOMNode(this);if(!n)return false;return c('Parent').bySelector(n,"._23ce")!==null;};f.exports=m;}),null);
__d('PlaceListInfoCardHeader.react',['cx','Layout.react','PlaceListMapState','PlacePageRemoveLink.react','React'],(function a(b,c,d,e,f,g,h){var i=c('Layout.react').Column,j=c('Layout.react').FillColumn,k=function l(m){if(m.mapContext==null)return null;var n=void 0;switch(m.mapContext.mapState){case c('PlaceListMapState').PENDING:n=m.headerLabel;break;case c('PlaceListMapState').REMOVABLE:case c('PlaceListMapState').NORMAL:return null;}var o=null;if(m.canViewerRemove&&m.removablePlaceID&&m.recType)o=c('React').createElement(c('PlacePageRemoveLink.react'),{mapContext:m.mapContext,onChangePlaceState:m.onChangePlaceState,recID:m.removablePlaceID,recType:m.recType});return c('React').createElement(c('Layout.react'),{className:"_2phz _22k8"},c('React').createElement(j,{className:"_22kb"},n),c('React').createElement(i,null,o));};f.exports=k;}),null);
__d('PlaceListProfileInfoCard.react',['ix','cx','Image.react','ImageBlock.react','PlacePageInfoCard.react','ProfileCardInfoGlyph','React','URI','fbglyph','sprintf'],(function a(b,c,d,e,f,g,h,i){var j,k,l=60;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';var p=this.props.profileInfo,q=p.bio,r=p.id,s=p.name,t=p.cityString,u=p.socialContext;return c('React').createElement('div',{className:this.props.className},c('React').createElement(c('ImageBlock.react'),{spacing:'medium'},c('React').createElement('a',{href:'/'+r},c('React').createElement(c('Image.react'),{src:c('sprintf')('https://graph.facebook.com/%s/picture?width=%s&height=%s',r,l,l)})),c('React').createElement('div',{className:"_3-8w _e4i",style:{minHeight:this.props.profilePicSize}},c('React').createElement('div',{className:"_3zac"},c('React').createElement('a',{'data-hovercard':new (c('URI'))('/ajax/hovercard/user.php').setQueryData({id:r}),href:'/'+r},s),c('React').createElement('div',{className:"_3zad"},q.text?c('React').createElement(n,q):null,t?c('React').createElement(n,{icon:'city',text:t}):null,q.text&&t?null:c('React').createElement('div',{className:"_3zae"},u))))));};function m(){'use strict';j.apply(this,arguments);}m.defaultProps={profilePicSize:l};var n=function p(q){return c('React').createElement('div',null,c('React').createElement(c('Image.react'),{className:"_3zaf",src:o(q.icon)}),q.text);};function o(p){switch(p){case c('ProfileCardInfoGlyph').CITY:return h("122630");case c('ProfileCardInfoGlyph').NETWORK:return h("123290");case c('ProfileCardInfoGlyph').SCHOOL:return h("122834");case c('ProfileCardInfoGlyph').WORK:return h("122471");case c('ProfileCardInfoGlyph').OTHER:default:return h("123136");}}f.exports=m;}),null);
__d('PlaceListAnimation',['cssVar','Animation'],(function a(b,c,d,e,f,g,h){f.exports={glow:function i(j){new (c('Animation'))(j).from('background','#fffbe2').to('background',"#e9ebee").duration(2000).go().ondone(function(){return j.style.removeProperty('background');});}};}),null);
__d("XPlaceListCommentConfirmPendingRecController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/async\/place_list\/confirm_pending_recs\/",{comment_fbid:{type:"FBID",required:true},rec_id:{type:"FBID",required:true},rec_type:{type:"Enum",required:true,enumType:1}});}),null);
__d('PlaceListCommentPendingRecButtons.react',['KeeperPendingButtons.react','PlaceListMapState','PlaceListRecType','PlaceListSurvey','React','Set','XAsyncRequest','XPlaceListCommentConfirmPendingRecController','XPlaceListCommentRemoveRecController'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);this.$PlaceListCommentPendingRecButtons1=function(){var l=c('XPlaceListCommentConfirmPendingRecController').getURIBuilder().setFBID('comment_fbid',this.props.commentID).setFBID('rec_id',this.props.recID).setEnum('rec_type',this.props.recType).getURI();this.$PlaceListCommentPendingRecButtons3(l,c('PlaceListMapState').NORMAL);}.bind(this);this.$PlaceListCommentPendingRecButtons2=function(){var l=c('XPlaceListCommentRemoveRecController').getURIBuilder().setFBID('comment_fbid',this.props.commentID).setEnum('map_state',c('PlaceListMapState').PENDING).setFBID('rec_id',this.props.recID).setEnum('rec_type',this.props.recType).getURI();this.$PlaceListCommentPendingRecButtons3(l,c('PlaceListMapState').REMOVED);}.bind(this);this.state={isCommittingUpdate:false};}j.prototype.render=function(){'use strict';return c('React').createElement(c('KeeperPendingButtons.react'),{className:this.props.className,isDisabled:this.state.isCommittingUpdate,onAdd:this.$PlaceListCommentPendingRecButtons1,onRemove:this.$PlaceListCommentPendingRecButtons2});};j.prototype.$PlaceListCommentPendingRecButtons3=function(k,l){'use strict';this.setState({isCommittingUpdate:true});new (c('XAsyncRequest'))(k).setHandler(function(m){this.setState({isCommittingUpdate:false});this.props.onChangePlaceState&&this.props.onChangePlaceState(this.props.recID,l,(m.payload||{}).newMapBounds);if(m.payload&&m.payload.surveyURI)c('PlaceListSurvey').showSurvey(m.payload.surveyURI);}.bind(this)).setErrorHandler(function(){this.setState({isCommittingUpdate:false});}.bind(this)).send();};f.exports=j;}),null);
__d('PlaceListInfoCardInteractiveWrapper.react',['cx','PlaceListCommentPendingRecButtons.react','PlaceListInfoCardHeader.react','PlaceListMapState','PlacePageRemoveLink.react','React'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';var n=null;if(this.props.showHeader)n=c('React').createElement(c('PlaceListInfoCardHeader.react'),{canViewerRemove:this.props.canViewerRemove,headerLabel:this.props.headerLabel,mapContext:this.props.mapContext,numPlaces:1,onChangePlaceState:this.props.onChangePlaceState,recType:this.props.recType,removablePlaceID:this.props.recID});return c('React').createElement('div',null,n,c('React').createElement('div',{className:"_2phz"},c('React').Children.only(this.props.children),c('React').createElement(m,{canViewerRemove:this.props.canViewerRemove,disableHeader:!this.props.showHeader,mapContext:this.props.mapContext,onChangePlaceState:this.props.onChangePlaceState,recID:this.props.recID,recType:this.props.recType})),c('React').createElement(l,{mapContext:this.props.mapContext,onChangePlaceState:this.props.onChangePlaceState,recID:this.props.recID,recType:this.props.recType}));};function k(){'use strict';i.apply(this,arguments);}var l=function n(o){var p=o.mapContext;if(!p||p.mapState!==c('PlaceListMapState').PENDING)return null;return c('React').createElement('div',{className:"_d_y clearfix"},c('React').createElement(c('PlaceListCommentPendingRecButtons.react'),{className:"_2q-1",commentID:p.commentID,onChangePlaceState:o.onChangePlaceState,recID:o.recID,recType:o.recType}));},m=function n(o){if(!o.mapContext||!o.disableHeader||!o.canViewerRemove)return null;return c('React').createElement('div',{className:"_4yjl"},c('React').createElement(c('PlacePageRemoveLink.react'),{mapContext:o.mapContext,onChangePlaceState:o.onChangePlaceState,recID:o.recID,recType:o.recType}));};f.exports=k;}),null);
__d('PlacePageInfoCard.react',['csx','cx','fbt','Parent','PlaceListAnimation','PlaceListEventEmitter','PlaceListInfoCardInteractiveWrapper.react','PlaceListMapEvents','PlaceListProfileInfoCard.react','PlaceListRecType','PlacePageReadOnlyInfoCard.react','React','ReactDOM','SubscriptionsHandler','getObjectValues','joinClasses','nullthrows'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p,q,r;k=babelHelpers.inherits(s,c('React').Component);l=k&&k.prototype;s.prototype.render=function(){'use strict';if(this.props.pageInfo){return c('React').createElement(v,this.props);}else if(this.props.userCreatedRecInfo){return c('React').createElement(t,this.props);}else if(this.props.profileInfo)return c('React').createElement(u,this.props);return null;};function s(){'use strict';k.apply(this,arguments);}m=babelHelpers.inherits(t,c('React').Component);n=m&&m.prototype;t.prototype.render=function(){'use strict';var w=c('nullthrows')(this.props.userCreatedRecInfo),x=w.address,y=w.name,z=w.phoneNumber,aa=w.shimmedWebsiteURI,ba=w.websiteURI,ca=["_2wtp","_2wtq"],da=[z,x].map(function(fa,ga){return fa?c('React').createElement('div',{key:ga,className:ca[ga]},fa):null;}),ea=c('joinClasses')(this.props.className,"_4yjk _2phz");return c('React').createElement('div',{className:ea},c('React').createElement('div',{className:"_5s5y"},y),da,c('React').createElement('a',{href:aa},ba));};function t(){'use strict';m.apply(this,arguments);}o=babelHelpers.inherits(u,c('React').Component);p=o&&o.prototype;u.prototype.render=function(){'use strict';var w=this.props.attachmentPermissions,x=c('joinClasses')(this.props.className,"_4yjk");return c('React').createElement('div',{className:x},c('React').createElement(c('PlaceListInfoCardInteractiveWrapper.react'),{canViewerRemove:w?w.canViewerRemove:false,headerLabel:j._("\u00bfEst\u00e1s recomendando..."),mapContext:this.props.mapContext,onChangePlaceState:this.props.onChangePlaceState,recID:c('nullthrows')(this.props.profileInfo).id,recType:c('PlaceListRecType').PROFILE,showHeader:!this.props.disableHeader&&Boolean(this.props.mapContext)},c('React').createElement(c('PlaceListProfileInfoCard.react'),{profileInfo:c('nullthrows')(this.props.profileInfo)})));};function u(){'use strict';o.apply(this,arguments);}q=babelHelpers.inherits(v,c('React').Component);r=q&&q.prototype;function v(w){'use strict';r.constructor.call(this,w);this.$PageCard1=new (c('SubscriptionsHandler'))();this.state={activePage:false};}v.prototype.componentDidMount=function(){'use strict';if(this.$PageCard2())this.$PageCard1.addSubscriptions(c('PlaceListEventEmitter').addListener(c('PlaceListMapEvents').ACTIVE_MAP_PAGE_UPDATE,function(w){this.setState({activePage:w.placeID==this.$PageCard3()});if(w.highlight&&w.placeID==this.$PageCard3())c('PlaceListAnimation').glow(c('ReactDOM').findDOMNode(this));}.bind(this)),c('PlaceListEventEmitter').addListener(c('PlaceListMapEvents').COMMENT_ATTACHMENT_HOVER_ON,function(w){this.setState({activePage:w.placeID==this.$PageCard3()});}.bind(this)),c('PlaceListEventEmitter').addListener(c('PlaceListMapEvents').COMMENT_ATTACHMENT_HOVER_OFF,function(){return this.setState({activePage:false});}.bind(this)));};v.prototype.componentWillUnmount=function(){'use strict';this.$PageCard1&&this.$PageCard1.release();};v.prototype.render=function(){'use strict';var w=this.$PageCard3(),x=this.props.attachmentPermissions,y=c('joinClasses')(this.props.className,"_4yjk"+(this.state.activePage?' '+"_3xgf":'')),z=this.props.mapContext?this.props.mapContext.commentID:null;return c('React').createElement('div',{className:y,onMouseEnter:function(){return this.$PageCard4(w);}.bind(this),onMouseLeave:function(){return this.$PageCard5();}.bind(this)},c('React').createElement(c('PlaceListInfoCardInteractiveWrapper.react'),{canViewerRemove:x?x.canViewerRemove:false,headerLabel:j._("\u00bfQuer\u00edas decir..."),mapContext:this.props.mapContext,onChangePlaceState:this.props.onChangePlaceState,recID:w,recType:c('PlaceListRecType').PLACE,showHeader:!this.props.disableHeader&&Boolean(this.props.mapContext)},c('React').createElement(c('PlacePageReadOnlyInfoCard.react'),{commentIDForHover:z,pageInfo:c('nullthrows')(this.props.pageInfo)})));};v.prototype.$PageCard3=function(){'use strict';return c('nullthrows')(this.props.pageInfo).id;};v.prototype.$PageCard2=function(){'use strict';var w=c('ReactDOM').findDOMNode(this);if(!w)return false;return c('Parent').bySelector(w,"._23ce")!==null;};v.prototype.$PageCard4=function(w){'use strict';setTimeout(function(){return c('PlaceListEventEmitter').emit(c('PlaceListMapEvents').COMMENT_ATTACHMENT_HOVER_ON,{placeID:w});},0);};v.prototype.$PageCard5=function(){'use strict';c('PlaceListEventEmitter').emit(c('PlaceListMapEvents').COMMENT_ATTACHMENT_HOVER_OFF);};f.exports=s;}),null);
__d('PlacePageInfoAggregation.react',['cx','fbt','AddPlaceToMapComponent.react','PlaceListEventEmitter','PlaceListInfoCardHeader.react','PlaceListMapEvents','PlaceListMapState','PlacePageInfoCard.react','React','ReactDOM','ShimButton.react','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i){var j,k,l,m,n=3;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;o.prototype.render=function(){'use strict';return c('React').createElement('div',this.props,this.props.pageSections.map(function(r){return this.$PlacePageInfoAggregation1(r);}.bind(this)));};o.prototype.$PlacePageInfoAggregation1=function(r){'use strict';if(r.length===0)return null;var s=r[0].mapContext?r[0].mapContext.mapState:c('PlaceListMapState').NORMAL;return c('React').createElement(p,{attachmentPermissions:this.props.attachmentPermissions,key:'mapstate_'+s,mapState:s,onChangeAttachmentPermissions:this.props.onChangeAttachmentPermissions,onChangePlaceState:this.props.onChangePlaceState,onRefreshPlaces:this.props.onRefreshPlaces,pagesData:r});};function o(){'use strict';j.apply(this,arguments);}l=babelHelpers.inherits(p,c('React').Component);m=l&&l.prototype;function p(r){'use strict';m.constructor.call(this,r);this.$MultiPlaceSection1=new (c('SubscriptionsHandler'))();this.state={isShowingAll:false};}p.prototype.componentDidMount=function(){'use strict';this.$MultiPlaceSection1.addSubscriptions(c('PlaceListEventEmitter').addListener(c('PlaceListMapEvents').UPDATE_TO_FEED_STORY_COMMENTS,function(r){if(this.props.pagesData[0].mapContext&&r.commentFBID===this.props.pagesData[0].mapContext.commentID){var s=c('ReactDOM').findDOMNode(this),t=r.node;if(s&&s.contains(t))this.setState({isShowingAll:true});this.props.onRefreshPlaces(r.pagesData);}}.bind(this)));};p.prototype.componentWillUnmount=function(){'use strict';this.$MultiPlaceSection1.release();};p.prototype.render=function(){'use strict';var r=this.props.pagesData,s=this.props.pagesData[0].mapContext,t=this.props.mapState===c('PlaceListMapState').PENDING,u=this.props.attachmentPermissions,v=null;if(r.length>1&&t)v=c('React').createElement(c('PlaceListInfoCardHeader.react'),{canViewerRemove:u?u.canViewerRemove:false,headerLabel:i._("\u00bfQuer\u00edas decir..."),mapContext:s,numPlaces:r.length,onChangePlaceState:this.props.onChangePlaceState});var w=null;if(r.length>n&&!this.state.isShowingAll){r=r.slice(0,n);w=c('React').createElement(q,{onClick:function(){return this.setState({isShowingAll:true});}.bind(this)});}else if(u&&u.canViewerAdd&&this.props.mapState!==c('PlaceListMapState').PENDING&&s!=null)w=c('React').createElement(c('AddPlaceToMapComponent.react'),{commentID:s.commentID,isAddingMore:true,onChangeAttachmentPermissions:this.props.onChangeAttachmentPermissions,onRefreshPlaces:this.$MultiPlaceSection2.bind(this)});return c('React').createElement('div',{className:"_3-e2"},v,r.map(function(x,y){return c('React').createElement(c('PlacePageInfoCard.react'),babelHelpers['extends']({},x,{attachmentPermissions:this.props.attachmentPermissions,disableHeader:v!=null||!t,key:y,onChangePlaceState:this.props.onChangePlaceState}));}.bind(this)),w);};p.prototype.$MultiPlaceSection2=function(r){'use strict';if(r.length>=n)this.setState({isShowingAll:true});this.props.onRefreshPlaces(r);};var q=function r(s){return c('React').createElement(c('ShimButton.react'),{className:"_3-e7",form:'link',onClick:s.onClick},i._("Ver todas las recomendaciones"));};f.exports=o;}),null);
__d('CurateCommentPlaceInfo.react',['cx','fbt','CurationModeDeps','CurationModeEvents','PlaceListEventEmitter','React','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('CurationModeDeps').XUIButton,m=c('CurationModeDeps').XUIButtonGroup,n=c('CurationModeDeps').XUICard,o=c('CurationModeDeps').XUIText;j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(q){'use strict';k.constructor.call(this,q);this.set_is_shown=function(r){this.setState({is_shown:r,confirmed_status:true});}.bind(this);this.$CurateCommentPlaceInfo1=new (c('SubscriptionsHandler'))();this.state={is_shown:false,confirmed_status:false};}p.prototype.componentDidMount=function(){'use strict';this.$CurateCommentPlaceInfo1.addSubscriptions(c('PlaceListEventEmitter').addListener(c('CurationModeEvents').TOGGLE_STATUS_CHANGE,function(q){if(this.props.postID===q.postID)this.setState({is_shown:q.is_shown,confirmed_status:true});}.bind(this)));if(!this.state.confirmed_status)c('PlaceListEventEmitter').emit(c('CurationModeEvents').TOGGLE_STATUS_REQUEST,{postID:this.props.postID,response:this.set_is_shown});};p.prototype.componentWillUnmount=function(){'use strict';this.$CurateCommentPlaceInfo1&&this.$CurateCommentPlaceInfo1.release();};p.prototype.render=function(){'use strict';return this.state.is_shown?c('React').createElement(n,{className:"_2ph- _3pvt"},c('React').createElement(o,{size:'medium',className:"_2pii"},i._("Options:")),c('React').createElement(m,{onClick:function q(event){event.preventDefault();}},c('React').createElement(l,{label:'No Place'}),c('React').createElement(l,{label:'Edit Places'}),c('React').createElement(l,{label:'Add Place'}))):null;};f.exports=p;}),null);
__d('MultiPlacePageInfoCard.react',['csx','cx','AddPlaceToMapComponent.react','CurateCommentPlaceInfo.react','Parent','PlaceListInteractiveMapOperation','PlaceListMapState','PlaceListMapUpdater','PlacePageInfoAggregation.react','React','ReactDOM','areEqual','idx','nullthrows'],(function a(b,c,d,e,f,g,h,i){var j,k,l=[[c('PlaceListMapState').PENDING],[c('PlaceListMapState').REMOVABLE],[null,c('PlaceListMapState').NORMAL]],m={};j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(o){'use strict';k.constructor.call(this,o);this.$MultiPlacePageInfoCard1=JSON.stringify(o);this.state={attachmentPermissions:this.props.attachmentPermissions?Object.assign({},this.props.attachmentPermissions):null,pagesData:(m[this.$MultiPlacePageInfoCard1]||o).pagesData.slice(0)};}n.prototype.componentDidMount=function(){'use strict';if(this.$MultiPlacePageInfoCard2()&&this.props.isLocallyComposed&&this.refs.root)this.refs.root.scrollIntoView();};n.prototype.componentWillUpdate=function(o,p){'use strict';if(!c('areEqual')(this.state,p))m[this.$MultiPlacePageInfoCard1]=p;};n.prototype.render=function(){'use strict';var o=this.state.attachmentPermissions,p=l.map(function(t){return this.$MultiPlacePageInfoCard3(t);}.bind(this)).filter(function(t){return t.length>0;}),q=void 0,r=void 0;if(p.length===0){r=o&&o.commentIDForButtonOnEmpty;q=o&&o.canViewerAdd&&r?c('React').createElement(c('AddPlaceToMapComponent.react'),{commentID:r,isAddingMore:false,onChangeAttachmentPermissions:this.$MultiPlacePageInfoCard4.bind(this),onRefreshPlaces:function(t){return this.setState({pagesData:t});}.bind(this)}):null;}else{var s;r=(s=this.state)!=null?(s=s.pagesData)!=null?(s=s[0])!=null?(s=s.mapContext)!=null?s.commentID:s:s:s:s;q=c('React').createElement(c('PlacePageInfoAggregation.react'),{attachmentPermissions:o,onChangeAttachmentPermissions:this.$MultiPlacePageInfoCard4.bind(this),onChangePlaceState:this.$MultiPlacePageInfoCard5.bind(this),onRefreshPlaces:function(t){return this.setState({pagesData:t});}.bind(this),pageSections:p});}q=o&&o.canViewerCurate&&r&&this.props.postID?c('React').createElement('div',null,q,c('React').createElement(c('CurateCommentPlaceInfo.react'),{commentID:r,postID:this.props.postID})):q;return q?c('React').createElement('div',{className:"_53jt",ref:'root'},q):null;};n.prototype.$MultiPlacePageInfoCard3=function(o){'use strict';return this.state.pagesData.filter(function(p){var q=p.mapContext?p.mapContext.mapState:null;return o.indexOf(q)>=0;});};n.prototype.$MultiPlacePageInfoCard4=function(o){'use strict';this.setState({attachmentPermissions:Object.assign({},c('nullthrows')(this.state.attachmentPermissions),o)});};n.prototype.$MultiPlacePageInfoCard5=function(o,p,q){'use strict';var r=this.state.pagesData,s=[],t=r.map(function(w){var x=w.pageInfo&&w.pageInfo.id||w.profileInfo&&w.profileInfo.id;if(x!==o||!w.mapContext)return w;var y=Object.assign({},w.mapContext);y.mapState=p;var z=w.pageInfo;if(z!=null&&(p===c('PlaceListMapState').NORMAL||p===c('PlaceListMapState').REMOVABLE))s.push({data:{location:c('nullthrows')(z.location),icons:c('nullthrows')(z.icons),id:c('nullthrows')(z.id)},operation:c('PlaceListInteractiveMapOperation').ADD});return Object.assign({},w,{mapContext:y});}),u=c('nullthrows')(c('nullthrows')(r[0]).mapContext).commentID;this.setState({pagesData:t.filter(function(w){var x=w.mapContext?w.mapContext.mapState:null;return x!==c('PlaceListMapState').REMOVED;})});var v={mapBoundingPoints:q,pins:s};this.$MultiPlacePageInfoCard6(u,v);};n.prototype.$MultiPlacePageInfoCard2=function(){'use strict';var o=c('ReactDOM').findDOMNode(this);if(!o)return false;return c('Parent').bySelector(o,"._23ce")!==null;};n.prototype.$MultiPlacePageInfoCard6=function(o,p){'use strict';c('PlaceListMapUpdater').updateMap({ufiNode:c('ReactDOM').findDOMNode(this),commentFBID:o},p);};f.exports=n;}),null);