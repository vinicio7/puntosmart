if (self.CavalryLogger) { CavalryLogger.start_js(["29hGe"]); }

__d("HovercardControllerType",[],(function a(b,c,d,e,f,g){f.exports={ARTICLE_AUTHOR_IN_SHARED_LINK:"article_author_in_shared_link",CHAT:"chat",CMS:"cms",COMMUNITY:"community",EGO:"ego",ELECTION_RESULT_MODULE:"election_result_module",FRIEND_WANT_VIDEO:"friend_want_video",GROUP_FORSALE:"group_forsale",GROUP_FORSALE_RECOMMENDATION:"group_forsale_recommendation",GROUP_MEMBER:"groupmember",HELP_COMMUNITY_USER:"help_community_user",MEDIA_TAG:"mediatag",PAGE_ADMIN:"page_admin",PAGE_CONTEXT_CARD:"page_context_card",PLACE_LIST_INTERACTIVE_MAP:"place_list_interactive_map",TIMELINE_UNIT:"timeline_unit",VIDEO_THUMBNAIL:"video_thumbnail",WITH_TAG:"withtag"};}),null);
__d("PlaceListInteractiveMapOperation",[],(function a(b,c,d,e,f,g){f.exports={ADD:"add",REMOVE:"remove"};}),null);
__d("XCommentPlaceTypeaheadBootstrapController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/async\/place_list\/comment_place_typeahead\/bootstrap\/",{comment_fbid:{type:"String"}});}),null);
__d("XCommentPlaceTypeaheadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/async\/place_list\/comment_place_typeahead\/",{comment_fbid:{type:"String"},place_list_id:{type:"String"},value:{type:"String",defaultValue:""}});}),null);
__d('CommentPlaceTypeahead.react',['cx','fbt','invariant','CurrentUser','React','URI','XCommentPlaceTypeaheadController','XCommentPlaceTypeaheadBootstrapController','XUITypeahead.react','WebAsyncSearchSource','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){var k,l;k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;function m(n){'use strict';n.commentID||n.placeListID||j(0);l.constructor.call(this,n);this.$CommentPlaceTypeahead1=this.$CommentPlaceTypeahead2();this.state={query:''};}m.prototype.render=function(){'use strict';var n={focusedOnInit:true,placeholder:i._("Escribe tu recomendaci\u00f3n"),showEntriesOnFocus:true,viewStyle:'rich'};return c('React').createElement(c('XUITypeahead.react'),babelHelpers['extends']({},n,this.props,{className:c('joinClasses')(this.props.className,"_4kol"),onChange:function(o){return this.setState({query:o.target.value});}.bind(this),onSelectAttempt:this.props.onSelectPlace,queryString:this.state.query,searchSource:this.$CommentPlaceTypeahead1}));};m.prototype.$CommentPlaceTypeahead2=function(){'use strict';return new (c('WebAsyncSearchSource'))({getAllForEmptyQuery:true,queryRequests:[{uri:c('XCommentPlaceTypeaheadController').getURIBuilder().setString('comment_fbid',this.props.commentID).setString('place_list_id',this.props.placeListID).getURI()}],bootstrapRequests:[{uri:c('XCommentPlaceTypeaheadBootstrapController').getURIBuilder().setString('comment_fbid',this.props.commentID).getURI()}]});};f.exports=m;}),null);
__d("XPlaceListUpdateFeedStoryController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/async\/placelist\/update_feed_story\/",{comment_fbid:{type:"String"},dom_id:{type:"String",required:true},post_id:{type:"String"}});}),null);
__d('PlaceListCommentFeedStoryUpdater',['csx','XAsyncRequest','DOM','Parent','XPlaceListUpdateFeedStoryController','ge','getOrCreateDOMID'],(function a(b,c,d,e,f,g,h){var i={},j={refreshFeedStoryForUFIRootID:function k(l,m,n,o){var p=c('ge')(l);if(!p)return;this.refreshFeedStory(p,m,n,o);},refreshFeedStory:function k(l,m,n,o){var p=this._findTargetNode(l);p&&this._updateNode(p,m,n,o);},registerFeedContext:function k(l,m){var n=this._findTargetWithinTree(l);i[c('getOrCreateDOMID')(n)]=m;},_updateNode:function k(l,m,n,o){var p=c('getOrCreateDOMID')(l),q=c('XPlaceListUpdateFeedStoryController').getURIBuilder().setString('comment_fbid',n).setString('post_id',m).setString('dom_id',p).getURI();o=o||i[p];new (c('XAsyncRequest'))(q).setData(o?{feed_context:o}:{}).send();},_findTargetNode:function k(l){var m=c('Parent').bySelector(l,"._5pcr");return this._findTargetWithinTree(m);},_findTargetWithinTree:function k(l){return l?c('DOM').find(l,"._3x-2"):null;}};f.exports=j;}),null);
__d('PlaceListEventEmitter',['EventEmitter'],(function a(b,c,d,e,f,g){var h=new (c('EventEmitter'))();f.exports=h;}),null);
__d('PlaceListMapEvents',[],(function a(b,c,d,e,f,g){f.exports={ACTIVE_MAP_PAGE_UPDATE:'PlaceListInteractiveMap/activeMapPageUpdate',COMMENT_ATTACHMENT_HOVER_ON:'PlaceListInteractiveMap/commentAttachmentHoverOn',COMMENT_ATTACHMENT_HOVER_OFF:'PlaceListInteractiveMap/commentAttachmentHoverOff',PLACE_UPDATE:'PlaceListInteractiveMap/placeUpdate',PLACE_REMOVED_FROM_MAP:'PlaceListInteractiveMap/placeRemoved',COMMENT_REMOVED_PLACE:'PlaceListInteractiveMap/commentPlaceRemoved',UPDATE_TO_FEED_STORY_COMMENTS:'AddPlaceToMapComponent/placeAddedToComment'};}),null);
__d('PlaceListMapUpdater',['PlaceListCommentFeedStoryUpdater','PlaceListEventEmitter','PlaceListFeedAttachmentMapper','PlaceListMapEvents'],(function a(b,c,d,e,f,g){f.exports={updateMap:function h(i,j){var k=i.ufiNode,l=i.commentFBID,m=i.feedContext;c('PlaceListCommentFeedStoryUpdater').refreshFeedStory(k,null,l,m);this._broadcastMapUpdate(j);},updateMapForUFIRootID:function h(i,j){var k=i.ufiRootID,l=i.commentFBID,m=i.feedContext;c('PlaceListCommentFeedStoryUpdater').refreshFeedStoryForUFIRootID(k,null,l,m);this._broadcastMapUpdate(j);},updateMapForPostID:function h(i,j){c('PlaceListFeedAttachmentMapper').getFeedStoryDOMIDsForPostID(i).forEach(function(k){return c('PlaceListCommentFeedStoryUpdater').refreshFeedStoryForUFIRootID(k,i);});this._broadcastMapUpdate(j);},_broadcastMapUpdate:function h(i){if(i instanceof Array)i={mapBoundingPoints:null,pins:i};if(!i)return;c('PlaceListEventEmitter').emit(c('PlaceListMapEvents').PLACE_UPDATE,i);}};}),null);
__d("XPlaceListAddCommentFreePlaceController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/async\/placelist\/add_comment_free_place\/",{m_dom_id:{type:"String"},place_list_id:{type:"String",required:true},place_id:{type:"String",required:true}});}),null);
__d('PlaceListCommentFreeAddingComponent.react',['ix','cx','fbt','AsyncRequest','CommentPlaceTypeahead.react','Image.react','PlaceListEventEmitter','PlaceListInteractiveMapOperation','PlaceListMapEvents','PlaceListMapUpdater','React','XPlaceListAddCommentFreePlaceController','XUIButton.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){var k,l;k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;function m(n){'use strict';l.constructor.call(this,n);this.state={isShowingTypeahead:false};}m.prototype.render=function(){'use strict';var n=this.state.isShowingTypeahead?c('React').createElement(c('CommentPlaceTypeahead.react'),{className:"_2cog",onBlur:function(){return this.setState({isShowingTypeahead:false});}.bind(this),onSelectPlace:this.$PlaceListCommentFreeAddingComponent1.bind(this),placeListID:this.props.placeListID,tallInput:true}):c('React').createElement(c('XUIButton.react'),{image:c('React').createElement(c('Image.react'),{src:h("115410")}),label:j._("A\u00f1adir un lugar"),onClick:function(){return this.setState({isShowingTypeahead:true});}.bind(this),placeholder:j._("Busca un lugar"),size:'large',use:'confirm'});return c('React').createElement('div',{className:this.props.className},n);};m.prototype.$PlaceListCommentFreeAddingComponent1=function(n){'use strict';var o=c('XPlaceListAddCommentFreePlaceController').getURIBuilder().setString('place_list_id',this.props.placeListID).setString('place_id',n.getUniqueID()).getURI();new (c('AsyncRequest'))(o).setHandler(function(p){c('PlaceListMapUpdater').updateMapForPostID(p.payload.postID,{mapBoundingPoints:p.payload.newMapBounds,pins:[{data:p.payload.addedPageData,operation:c('PlaceListInteractiveMapOperation').ADD}]});c('PlaceListEventEmitter').emit(c('PlaceListMapEvents').ACTIVE_MAP_PAGE_UPDATE,{placeID:p.payload.addedPageData.id,highlight:true});}).send();this.setState({isShowingTypeahead:false});};f.exports=m;}),null);
__d('PlaceListMapMarker.react',['cx','GeoCoordinates','leaflet','LeafletMarker.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){'use strict';j.constructor.call(this,l);}k.prototype.render=function(){'use strict';var l=Object.assign({},{className:c('joinClasses')(this.props.uniqueClass,"_183r")},this.props.isActive?this.props.icons.pin:this.props.icons.dot);return c('React').createElement(c('LeafletMarker.react'),{coordinates:new (c('GeoCoordinates'))(this.props.placeData.location.latitude,this.props.placeData.location.longitude),eventHandlers:Object.assign({},this.props.eventHandlers),options:{clickable:false,icon:c('leaflet').icon(l)}});};f.exports=k;}),null);
__d('PlaceListInteractiveMap.react',['csx','cx','invariant','DOM','Event','FBTilesMap.react','GeoCoordinates','HovercardControllerType','HovercardLink','leaflet','LeafletUtils','LeafletView','Parent','PlaceListCommentFreeAddingComponent.react','PlaceListInteractiveMapOperation','PlaceListMapEvents','PlaceListEventEmitter','PlaceListMapMarker.react','React','ReactDOM','SubscriptionsHandler','forEachObject','uniqueID'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m={iconAnchor:[12,32],iconSize:[24,32]},n={iconAnchor:[12,12],iconSize:[24,24]},o={width:800,height:600},p={zoomRange:[3,16]};k=babelHelpers.inherits(q,c('React').Component);l=k&&k.prototype;function q(r){'use strict';l.constructor.call(this,r);}q.prototype.componentWillMount=function(){'use strict';var r={};this.props.placesData.forEach(function(s){return r[s.id]=s;});this.setState({mapBoundingPoints:this.props.initialBounds.boundingPoints,mapView:this.$PlaceListInteractiveMap2(this.props.initialBounds.boundingPoints),placesData:r});this.$PlaceListInteractiveMap1=new (c('SubscriptionsHandler'))();this.$PlaceListInteractiveMap1.addSubscriptions(c('PlaceListEventEmitter').addListener(c('PlaceListMapEvents').PLACE_UPDATE,this.$PlaceListInteractiveMap3.bind(this)),c('PlaceListEventEmitter').addListener(c('PlaceListMapEvents').ACTIVE_MAP_PAGE_UPDATE,this.$PlaceListInteractiveMap4.bind(this)),c('PlaceListEventEmitter').addListener(c('PlaceListMapEvents').COMMENT_ATTACHMENT_HOVER_ON,function(s){return this.$PlaceListInteractiveMap5(s);}.bind(this)),c('PlaceListEventEmitter').addListener(c('PlaceListMapEvents').COMMENT_ATTACHMENT_HOVER_OFF,function(){return this.$PlaceListInteractiveMap6();}.bind(this)));};q.prototype.componentWillUnmount=function(){'use strict';this.$PlaceListInteractiveMap1&&this.$PlaceListInteractiveMap1.release();};q.prototype.render=function(){'use strict';return c('React').createElement('div',{className:"_4wp7"},c('React').createElement(c('FBTilesMap.react'),{className:"_3301",eventHandlers:this.$PlaceListInteractiveMap7(),onViewChange:function(r){return this.$PlaceListInteractiveMap8(r);}.bind(this),onSizeSettled:this.$PlaceListInteractiveMap9.bind(this),showZoomControls:true,view:this.state.mapView},this.$PlaceListInteractiveMap10()),this.props.allowCommentFreeAdding?c('React').createElement(c('PlaceListCommentFreeAddingComponent.react'),{className:"_1ape",placeListID:this.props.placelistID}):null);};q.prototype.$PlaceListInteractiveMap4=function(r){'use strict';this.setState({activeMapPageID:r.placeID});};q.prototype.$PlaceListInteractiveMap11=function(r,s){'use strict';return function(t){var u=c('DOM').find(c('ReactDOM').findDOMNode(this),'img.'+r),v=c('HovercardLink').getBaseURI().addQueryData({type:c('HovercardControllerType').PLACE_LIST_INTERACTIVE_MAP,id:s,extragetparams:JSON.stringify({is_place_list_map:true,placelist_id:this.props.placelistID})});u.setAttribute('data-hovercard',v.toString());u.setAttribute('data-hovercard-instant',true);u.setAttribute('data-hovercard-offset-y',12);u.classList.add('leaflet-clickable');if(s!=this.state.activeMapPageID)this.$PlaceListInteractiveMap1.addSubscriptions(c('Event').listen(u,'click',function(event){c('PlaceListEventEmitter').emit(c('PlaceListMapEvents').ACTIVE_MAP_PAGE_UPDATE,{placeID:s,highlight:true});setTimeout(function(){return this.$PlaceListInteractiveMap12();}.bind(this),0);c('Event').stop(event);}.bind(this)));}.bind(this);};q.prototype.$PlaceListInteractiveMap10=function(){'use strict';return Object.keys(this.state.placesData).map(function(r,s){var t=c('uniqueID')();return c('React').createElement(c('PlaceListMapMarker.react'),{eventHandlers:{add:this.$PlaceListInteractiveMap11(t,r).bind(this)},icons:this.$PlaceListInteractiveMap13(this.state.placesData[r].icons),isActive:this.$PlaceListInteractiveMap14(r),key:s,placeData:this.state.placesData[r],uniqueClass:t});}.bind(this));};q.prototype.$PlaceListInteractiveMap8=function(r){'use strict';this.setState({mapView:r});};q.prototype.$PlaceListInteractiveMap9=function(r){'use strict';this.setState({mapSize:r});};q.prototype.$PlaceListInteractiveMap3=function(r){'use strict';if(!r)return;var s=Object.assign({},this.state.placesData);r.pins.forEach(function(t){switch(t.operation){case c('PlaceListInteractiveMapOperation').ADD:if(!(t.data.id in s))s[t.data.id]=t.data;break;case c('PlaceListInteractiveMapOperation').REMOVE:if(t.data.id in s)delete s[t.data.id];break;default:j(0);}});this.setState({mapBoundingPoints:r.mapBoundingPoints||this.state.mapBoundingPoints,placesData:s,mapView:this.$PlaceListInteractiveMap2(r.mapBoundingPoints)});};q.prototype.$PlaceListInteractiveMap12=function(){'use strict';var r=this.$PlaceListInteractiveMap15();if(r.length>0){var s=c('Parent').bySelector(r[0],"._4oep");if(s)s.scrollIntoView({behavior:'smooth'});}};q.prototype.$PlaceListInteractiveMap15=function(){'use strict';var r=c('ReactDOM').findDOMNode(this);if(!r)return [];var s=c('Parent').bySelector(r,"._23ce");if(!s)return [];return c('DOM').scry(s,"._3xgf");};q.prototype.$PlaceListInteractiveMap6=function(){'use strict';this.setState({hoveredCommentAttachment:null});if(this.state.activeMapPageID!==null)setTimeout(function(){return c('PlaceListEventEmitter').emit(c('PlaceListMapEvents').ACTIVE_MAP_PAGE_UPDATE,{placeID:this.state.activeMapPageID});}.bind(this),0);};q.prototype.$PlaceListInteractiveMap5=function(r){'use strict';this.setState({hoveredCommentAttachment:r.placeID});};q.prototype.$PlaceListInteractiveMap14=function(r){'use strict';if(this.state.hoveredCommentAttachment){return r===this.state.hoveredCommentAttachment;}else return r===this.state.activeMapPageID;};q.prototype.$PlaceListInteractiveMap7=function(){'use strict';return {click:function r(){return c('PlaceListEventEmitter').emit(c('PlaceListMapEvents').ACTIVE_MAP_PAGE_UPDATE,{placeID:null});}};};q.prototype.$PlaceListInteractiveMap2=function(r){'use strict';var s=c('leaflet').latLngBounds((r||this.state.mapBoundingPoints).map(function(t){return c('leaflet').latLng(t.latitude,t.longitude);}));return c('LeafletUtils').fitBounds(s,o,p);};q.prototype.$PlaceListInteractiveMap13=function(r){'use strict';return {dot:Object.assign({},n,{iconUrl:r.dotUrl,iconRetinaUrl:r.dotRetinaUrl}),pin:Object.assign({},m,{iconUrl:r.pinUrl,iconRetinaUrl:r.pinRetinaUrl})};};f.exports=q;}),null);
__d('PlaceListMapSpotlightController',['Event','PlaceListCommentFeedStoryUpdater','PlaceListEventEmitter','PlaceListMapEvents','PlaceListMapUpdater','PlaceListPageTransitionsManager','Run','SubscriptionsHandler'],(function a(b,c,d,e,f,g){f.exports={init:function h(i,j){var k=new (c('SubscriptionsHandler'))();k.addSubscriptions(c('Event').listen(j.closeButton,'click',function(){return i.hide();}),c('Run').onLeave(function(){return i.hide();}),i.subscribe('hide',function(){k.release();c('PlaceListMapUpdater').updateMapForPostID(j.postID);c('PlaceListPageTransitionsManager').handleSpotlightClosed();}),c('PlaceListEventEmitter').addListener(c('PlaceListMapEvents').PLACE_UPDATE,function(l){c('PlaceListMapUpdater').updateMapForPostID(j.postID);}));c('PlaceListCommentFeedStoryUpdater').registerFeedContext(i.getRoot(),j.feedContext);}};}),null);